<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="theme-color" content="#1a1a2e">
<title>Famille Aly Ko√Øra</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
:root{
--bg:#0f0f1a;
--card:#1a1a2e;
--card-hover:#252542;
--surface:#16163a;
--primary:#6366f1;
--primary-light:#818cf8;
--secondary:#ec4899;
--accent:#22d3ee;
--success:#10b981;
--text:#f8fafc;
--text-secondary:#94a3b8;
--text-muted:#64748b;
--male:#3b82f6;
--female:#f472b6;
--border:rgba(255,255,255,0.08);
--shadow:0 4px 24px rgba(0,0,0,0.4);
--radius:16px;
--radius-lg:24px;
--radius-full:9999px;
/* Couleurs par g√©n√©ration */
--gen1:#f59e0b;--gen1-bg:rgba(245,158,11,0.15);
--gen2:#10b981;--gen2-bg:rgba(16,185,129,0.15);
--gen3:#6366f1;--gen3-bg:rgba(99,102,241,0.15);
--gen4:#ec4899;--gen4-bg:rgba(236,72,153,0.15);
--gen5:#8b5cf6;--gen5-bg:rgba(139,92,246,0.15);
}

/* ========== √âCRAN DE CONNEXION ========== */
.login-screen{
position:fixed;
inset:0;
background:linear-gradient(135deg,#0f0f1a 0%,#1a1a2e 50%,#16163a 100%);
display:flex;
align-items:center;
justify-content:center;
z-index:9999;
padding:20px;
}
.login-container{
width:100%;
max-width:400px;
animation:loginFadeIn 0.5s ease;
}
@keyframes loginFadeIn{
from{opacity:0;transform:translateY(20px)}
to{opacity:1;transform:translateY(0)}
}
.login-logo{
text-align:center;
margin-bottom:32px;
}
.login-logo-icon{
width:80px;
height:80px;
background:linear-gradient(135deg,var(--primary),var(--secondary));
border-radius:24px;
display:flex;
align-items:center;
justify-content:center;
font-size:40px;
margin:0 auto 16px;
box-shadow:0 8px 32px rgba(99,102,241,0.3);
}
.login-logo h1{
font-size:24px;
font-weight:700;
margin-bottom:4px;
background:linear-gradient(135deg,var(--text),var(--primary-light));
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
background-clip:text;
}
.login-logo p{
font-size:14px;
color:var(--text-secondary);
}
.login-box{
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius-lg);
padding:28px 24px;
box-shadow:var(--shadow);
}
.login-title{
display:flex;
align-items:center;
justify-content:center;
gap:8px;
font-size:15px;
font-weight:600;
color:var(--text-secondary);
margin-bottom:24px;
}
.login-title span{font-size:20px}
.login-form{
display:flex;
flex-direction:column;
gap:16px;
}
.login-input-group label{
display:block;
font-size:13px;
font-weight:500;
color:var(--text-secondary);
margin-bottom:8px;
}
.login-input-wrapper{
position:relative;
display:flex;
align-items:center;
}
.login-input-wrapper input{
width:100%;
padding:16px;
padding-right:50px;
background:var(--surface);
border:2px solid var(--border);
border-radius:var(--radius);
color:var(--text);
font-size:16px;
font-family:inherit;
transition:all 0.2s;
}
.login-input-wrapper input:focus{
outline:none;
border-color:var(--primary);
box-shadow:0 0 0 4px rgba(99,102,241,0.2);
}
.login-input-wrapper input::placeholder{color:var(--text-muted)}
.toggle-password{
position:absolute;
right:12px;
background:none;
border:none;
font-size:18px;
cursor:pointer;
opacity:0.6;
transition:opacity 0.2s;
}
.toggle-password:hover{opacity:1}
.remember-me{
display:flex;
align-items:center;
gap:10px;
font-size:14px;
color:var(--text-secondary);
cursor:pointer;
user-select:none;
}
.remember-me input{display:none}
.checkmark{
width:22px;
height:22px;
border:2px solid var(--border);
border-radius:6px;
display:flex;
align-items:center;
justify-content:center;
transition:all 0.2s;
flex-shrink:0;
}
.remember-me input:checked + .checkmark{
background:var(--primary);
border-color:var(--primary);
}
.remember-me input:checked + .checkmark::after{
content:'‚úì';
color:white;
font-size:14px;
font-weight:bold;
}
.login-btn{
width:100%;
padding:18px;
background:linear-gradient(135deg,var(--primary),var(--secondary));
border:none;
border-radius:var(--radius);
color:white;
font-size:16px;
font-weight:600;
font-family:inherit;
cursor:pointer;
transition:all 0.2s;
margin-top:8px;
}
.login-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(99,102,241,0.4)}
.login-btn:active{transform:translateY(0)}
.login-error{
text-align:center;
color:#ef4444;
font-size:14px;
min-height:20px;
animation:shake 0.3s ease;
}
@keyframes shake{
0%,100%{transform:translateX(0)}
25%{transform:translateX(-8px)}
75%{transform:translateX(8px)}
}
.login-footer{
text-align:center;
margin-top:24px;
}
.login-footer p{
font-size:13px;
color:var(--text-muted);
}

/* ========== APPLICATION ========== */
html,body{
font-family:'Inter',system-ui,sans-serif;
background:var(--bg);
color:var(--text);
height:100%;
overflow:hidden;
-webkit-font-smoothing:antialiased;
}
.app{
display:flex;
flex-direction:column;
height:100dvh;
max-width:500px;
margin:0 auto;
}

/* Header moderne */
.header{
padding:16px 20px;
padding-top:max(16px,env(safe-area-inset-top));
background:linear-gradient(135deg,#1a1a2e 0%,#16163a 100%);
border-bottom:1px solid var(--border);
}
.header-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.logo{display:flex;align-items:center;gap:10px}
.logo-icon{
width:40px;height:40px;
background:linear-gradient(135deg,var(--primary),var(--secondary));
border-radius:12px;
display:flex;align-items:center;justify-content:center;
font-size:20px;
}
.logo-text h1{font-size:18px;font-weight:700;letter-spacing:-0.5px}
.logo-text span{font-size:11px;color:var(--text-secondary);font-weight:500}
.logout-btn{
background:rgba(239,68,68,0.15);
border:none;
width:40px;
height:40px;
border-radius:12px;
display:flex;
align-items:center;
justify-content:center;
cursor:pointer;
transition:all 0.2s;
}
.logout-btn svg{width:20px;height:20px;color:#ef4444}
.logout-btn:active{background:rgba(239,68,68,0.3);transform:scale(0.95)}
.header-stats{
display:flex;gap:16px;
background:var(--surface);
padding:12px 16px;
border-radius:var(--radius);
}
.header-stat{text-align:center;flex:1}
.header-stat-value{font-size:20px;font-weight:700;color:var(--primary-light)}
.header-stat-label{font-size:10px;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.5px}

/* Contenu principal */
main{flex:1;overflow:hidden;position:relative}
.page{
display:none;
height:100%;
flex-direction:column;
}
.page.active{display:flex}

/* Animation de transition pour la vue personne */
#personView{
transition:all 0.3s ease;
}
#personView.changing{
opacity:0;
transform:translateX(30px);
}
#personView.entering{
animation:slideIn 0.4s ease forwards;
}
@keyframes slideIn{
from{opacity:0;transform:translateX(-30px)}
to{opacity:1;transform:translateX(0)}
}

/* Flash de couleur pour confirmer le clic */
.click-flash{
position:fixed;
top:0;left:0;right:0;
height:4px;
z-index:1000;
animation:flashBar 0.5s ease;
}
@keyframes flashBar{
0%{transform:scaleX(0);transform-origin:left}
50%{transform:scaleX(1)}
100%{transform:scaleX(0);transform-origin:right}
}

/* Scroll container */
.scroll{
flex:1;
overflow-y:auto;
-webkit-overflow-scrolling:touch;
padding:16px 20px;
padding-bottom:100px;
}
.scroll::-webkit-scrollbar{display:none}

/* Navigation bottom moderne */
.nav{
position:fixed;
bottom:0;
left:50%;
transform:translateX(-50%);
width:100%;
max-width:500px;
padding:12px 20px;
padding-bottom:max(12px,env(safe-area-inset-bottom));
background:rgba(15,15,26,0.95);
backdrop-filter:blur(20px);
-webkit-backdrop-filter:blur(20px);
border-top:1px solid var(--border);
display:flex;
justify-content:space-around;
z-index:100;
}
.nav-item{
display:flex;
flex-direction:column;
align-items:center;
gap:4px;
padding:8px 16px;
border-radius:var(--radius);
color:var(--text-muted);
font-size:10px;
font-weight:500;
transition:all 0.2s ease;
cursor:pointer;
border:none;
background:none;
}
.nav-item.active{color:var(--primary-light);background:rgba(99,102,241,0.15)}
.nav-item svg{width:24px;height:24px}

/* === PAGE FAMILLE (Arbre simplifi√©) === */
.person-card{
background:linear-gradient(145deg,var(--card),var(--surface));
border-radius:var(--radius-lg);
padding:24px;
text-align:center;
border:2px solid var(--border);
box-shadow:var(--shadow);
margin-bottom:20px;
position:relative;
overflow:hidden;
transition:all 0.3s ease;
}
/* Bandeau de g√©n√©ration en haut de la carte */
.person-card::before{
content:'';
position:absolute;
top:0;left:0;right:0;
height:6px;
}
.person-card.gen1::before{background:linear-gradient(90deg,var(--gen1),#fbbf24)}
.person-card.gen2::before{background:linear-gradient(90deg,var(--gen2),#34d399)}
.person-card.gen3::before{background:linear-gradient(90deg,var(--gen3),#818cf8)}
.person-card.gen4::before{background:linear-gradient(90deg,var(--gen4),#f472b6)}
.person-card.gen5::before{background:linear-gradient(90deg,var(--gen5),#a78bfa)}

/* Badge g√©n√©ration flottant */
.gen-badge{
position:absolute;
top:16px;right:16px;
padding:6px 14px;
border-radius:var(--radius-full);
font-size:12px;
font-weight:700;
color:white;
}
.gen1 .gen-badge{background:var(--gen1)}
.gen2 .gen-badge{background:var(--gen2)}
.gen3 .gen-badge{background:var(--gen3)}
.gen4 .gen-badge{background:var(--gen4)}
.gen5 .gen-badge{background:var(--gen5)}
.person-avatar{
width:80px;height:80px;
border-radius:50%;
margin:0 auto 16px;
display:flex;align-items:center;justify-content:center;
font-size:36px;
position:relative;
}
.person-avatar.male{background:linear-gradient(135deg,#1e3a5f,#3b82f6)}
.person-avatar.female{background:linear-gradient(135deg,#5f1e4a,#ec4899)}
.person-avatar::after{
content:'';
position:absolute;
inset:-4px;
border-radius:50%;
border:3px solid;
opacity:0.8;
animation:pulseRing 2s ease infinite;
}
.gen1 .person-avatar::after{border-color:var(--gen1)}
.gen2 .person-avatar::after{border-color:var(--gen2)}
.gen3 .person-avatar::after{border-color:var(--gen3)}
.gen4 .person-avatar::after{border-color:var(--gen4)}
.gen5 .person-avatar::after{border-color:var(--gen5)}
@keyframes pulseRing{
0%,100%{transform:scale(1);opacity:0.8}
50%{transform:scale(1.05);opacity:0.5}
}
.person-name{font-size:22px;font-weight:700;margin-bottom:4px}
.person-alias{
display:inline-block;
background:var(--primary);
color:white;
padding:4px 12px;
border-radius:var(--radius-full);
font-size:12px;
font-weight:500;
margin-top:8px;
}
.person-gen{font-size:13px;color:var(--text-secondary);margin-top:12px}

/* Parents section */
.section-title{
font-size:12px;
font-weight:600;
color:var(--text-muted);
text-transform:uppercase;
letter-spacing:1px;
margin:24px 0 12px;
display:flex;
align-items:center;
gap:8px;
}
.section-title::before{
content:'';
flex:1;
height:1px;
background:var(--border);
}
.section-title::after{
content:'';
flex:1;
height:1px;
background:var(--border);
}

.parent-cards{display:flex;gap:12px;margin-bottom:8px}
.parent-card{
flex:1;
background:var(--card);
border:2px solid var(--border);
border-radius:var(--radius);
padding:16px;
text-align:center;
cursor:pointer;
transition:all 0.2s ease;
position:relative;
overflow:hidden;
}
.parent-card::before{
content:'';
position:absolute;
top:0;left:0;right:0;
height:3px;
}
.parent-card.gen1::before{background:var(--gen1)}
.parent-card.gen2::before{background:var(--gen2)}
.parent-card.gen3::before{background:var(--gen3)}
.parent-card.gen4::before{background:var(--gen4)}
.parent-card.gen5::before{background:var(--gen5)}
.parent-card:active{transform:scale(0.96);background:var(--card-hover)}
.parent-card .mini-avatar{
width:44px;height:44px;
border-radius:50%;
margin:0 auto 8px;
display:flex;align-items:center;justify-content:center;
font-size:20px;
}
.parent-card .mini-avatar.male{background:rgba(59,130,246,0.2)}
.parent-card .mini-avatar.female{background:rgba(236,72,153,0.2)}
.parent-card .name{font-size:14px;font-weight:600}
.parent-card .label{font-size:11px;color:var(--text-muted);margin-top:2px}
.parent-card .gen-tag{
display:inline-block;
padding:2px 8px;
border-radius:10px;
font-size:9px;
font-weight:600;
color:white;
margin-top:6px;
}

/* Children grid */
.children-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.child-card{
background:var(--card);
border:2px solid var(--border);
border-radius:var(--radius);
padding:14px 8px;
text-align:center;
cursor:pointer;
transition:all 0.2s ease;
position:relative;
overflow:hidden;
}
.child-card::before{
content:'';
position:absolute;
top:0;left:0;right:0;
height:3px;
}
.child-card.gen1::before{background:var(--gen1)}
.child-card.gen2::before{background:var(--gen2)}
.child-card.gen3::before{background:var(--gen3)}
.child-card.gen4::before{background:var(--gen4)}
.child-card.gen5::before{background:var(--gen5)}
.child-card:active{transform:scale(0.94);background:var(--card-hover)}
.child-card .mini-avatar{
width:40px;height:40px;
border-radius:50%;
margin:0 auto 8px;
display:flex;align-items:center;justify-content:center;
font-size:18px;
}
.child-card .mini-avatar.male{background:rgba(59,130,246,0.2)}
.child-card .mini-avatar.female{background:rgba(236,72,153,0.2)}
.child-card .name{font-size:12px;font-weight:600;line-height:1.3}
.child-card .gen-tag{
display:inline-block;
padding:2px 8px;
border-radius:10px;
font-size:9px;
font-weight:600;
color:white;
margin-top:4px;
}
.child-card .badge{
display:block;
background:var(--card-hover);
color:var(--text-secondary);
font-size:10px;
padding:4px 8px;
border-radius:10px;
margin-top:6px;
}
/* L√©gende g√©n√©rations */
.gen-legend{
display:flex;
justify-content:center;
gap:8px;
margin-top:24px;
padding:16px;
background:var(--surface);
border-radius:var(--radius);
flex-wrap:wrap;
}
.gen-legend-item{
display:flex;
align-items:center;
gap:6px;
font-size:11px;
color:var(--text-secondary);
}
.gen-legend-dot{
width:12px;height:12px;
border-radius:50%;
}

/* Parent card statique (sans lien) */
.parent-card.static{
cursor:default;
opacity:0.8;
}
.parent-card.static:active{
transform:none;
background:var(--card);
}

/* √âpouses */
.spouses-list{
display:flex;
flex-direction:column;
gap:10px;
margin-bottom:8px;
}
.spouse-card{
display:flex;
align-items:center;
gap:14px;
background:linear-gradient(135deg,rgba(236,72,153,0.15),rgba(139,92,246,0.15));
border:1px solid rgba(236,72,153,0.3);
border-radius:var(--radius);
padding:14px 16px;
}
.spouse-avatar{
width:44px;height:44px;
background:linear-gradient(135deg,#ec4899,#8b5cf6);
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-size:20px;
flex-shrink:0;
}
.spouse-info{
flex:1;
}
.spouse-name{
font-size:15px;
font-weight:600;
color:var(--text);
}
.spouse-num{
font-size:11px;
color:var(--text-muted);
margin-top:2px;
}

/* Groupes d'enfants par m√®re */
.children-mother-group{
margin-bottom:16px;
}
.mother-label{
display:inline-flex;
align-items:center;
gap:6px;
background:rgba(236,72,153,0.15);
border:1px solid rgba(236,72,153,0.3);
padding:8px 14px;
border-radius:var(--radius-full);
font-size:12px;
font-weight:500;
color:var(--text);
margin-bottom:10px;
}

/* Navigation dans l'arbre */
.tree-nav{
display:flex;
gap:8px;
margin-bottom:16px;
overflow-x:auto;
padding-bottom:4px;
}
.tree-nav::-webkit-scrollbar{display:none}
.tree-nav-item{
display:flex;
align-items:center;
gap:6px;
padding:10px 16px;
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius-full);
font-size:13px;
font-weight:500;
white-space:nowrap;
cursor:pointer;
transition:all 0.2s;
flex-shrink:0;
}
.tree-nav-item:active{background:var(--primary);border-color:var(--primary)}
.tree-nav-item svg{width:16px;height:16px}

/* Racine selector */
.root-select{
width:100%;
padding:14px 16px;
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius);
color:var(--text);
font-size:15px;
font-family:inherit;
margin-bottom:16px;
-webkit-appearance:none;
background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
background-repeat:no-repeat;
background-position:right 12px center;
}

/* === PAGE RECHERCHE === */
.search-box{
position:relative;
margin-bottom:16px;
}
.search-input{
width:100%;
padding:16px 16px 16px 48px;
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius);
color:var(--text);
font-size:16px;
font-family:inherit;
transition:all 0.2s;
}
.search-input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(99,102,241,0.2)}
.search-input::placeholder{color:var(--text-muted)}
.search-icon{
position:absolute;
left:16px;
top:50%;
transform:translateY(-50%);
color:var(--text-muted);
}

.person-list{display:flex;flex-direction:column;gap:8px}
.person-item{
display:flex;
align-items:center;
gap:14px;
padding:14px 16px;
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius);
cursor:pointer;
transition:all 0.2s;
}
.person-item:active{background:var(--card-hover);transform:scale(0.99)}
.person-item .avatar{
width:48px;height:48px;
border-radius:50%;
display:flex;align-items:center;justify-content:center;
font-size:22px;
flex-shrink:0;
}
.person-item .avatar.male{background:linear-gradient(135deg,#1e3a5f,#3b82f6)}
.person-item .avatar.female{background:linear-gradient(135deg,#5f1e4a,#ec4899)}
.person-item .info{flex:1;min-width:0}
.person-item .info .name{font-size:15px;font-weight:600;margin-bottom:2px}
.person-item .info .details{font-size:12px;color:var(--text-secondary)}
.person-item .arrow{color:var(--text-muted)}

/* === PAGE PARENT√â === */
.relation-form{display:flex;flex-direction:column;gap:12px}
.relation-select{
width:100%;
padding:16px;
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius);
color:var(--text);
font-size:15px;
font-family:inherit;
-webkit-appearance:none;
background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
background-repeat:no-repeat;
background-position:right 12px center;
}
.relation-btn{
width:100%;
padding:18px;
background:linear-gradient(135deg,var(--primary),var(--secondary));
border:none;
border-radius:var(--radius);
color:white;
font-size:16px;
font-weight:600;
font-family:inherit;
cursor:pointer;
transition:all 0.2s;
margin-top:8px;
}
.relation-btn:active{transform:scale(0.98);opacity:0.9}

.relation-result{
margin-top:24px;
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius-lg);
padding:24px;
text-align:center;
}
.relation-badge{
display:inline-block;
background:linear-gradient(135deg,var(--primary),var(--secondary));
color:white;
padding:12px 28px;
border-radius:var(--radius-full);
font-size:20px;
font-weight:700;
margin:16px 0;
}
.relation-detail{
background:var(--surface);
border-radius:var(--radius);
padding:16px;
margin-top:16px;
text-align:left;
}
.relation-step{
padding:10px 0;
font-size:13px;
color:var(--text-secondary);
border-bottom:1px solid var(--border);
display:flex;
align-items:center;
gap:10px;
}
.relation-step:last-child{border:none}
.relation-step .dot{
width:8px;height:8px;
background:var(--primary);
border-radius:50%;
flex-shrink:0;
}

/* === PAGE STATS === */
.stats-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.stat-card{
background:linear-gradient(145deg,var(--card),var(--surface));
border:1px solid var(--border);
border-radius:var(--radius-lg);
padding:24px 16px;
text-align:center;
}
.stat-icon{font-size:32px;margin-bottom:12px}
.stat-value{font-size:36px;font-weight:700;background:linear-gradient(135deg,var(--primary-light),var(--accent));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.stat-label{font-size:12px;color:var(--text-muted);margin-top:4px;text-transform:uppercase;letter-spacing:0.5px}

/* Empty state */
.empty{
text-align:center;
padding:48px 24px;
color:var(--text-muted);
}
.empty-icon{font-size:48px;margin-bottom:16px;opacity:0.5}
.empty-text{font-size:14px}

/* === FORMULAIRE CONTRIBUER === */
.form-intro{
text-align:center;
padding:24px 16px;
margin-bottom:16px;
}
.form-intro-icon{font-size:48px;margin-bottom:12px}
.form-intro h2{font-size:22px;font-weight:700;margin-bottom:8px}
.form-intro p{font-size:14px;color:var(--text-secondary);line-height:1.5}

.form-section{
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius-lg);
padding:20px;
margin-bottom:16px;
}
.form-section-title{
font-size:14px;
font-weight:600;
margin-bottom:16px;
display:flex;
align-items:center;
justify-content:space-between;
}
.form-group{
margin-bottom:14px;
flex:1;
}
.form-group:last-child{margin-bottom:0}
.form-group label{
display:block;
font-size:12px;
color:var(--text-secondary);
margin-bottom:6px;
font-weight:500;
}
.form-group input, .form-group select{
width:100%;
padding:14px 16px;
background:var(--surface);
border:1px solid var(--border);
border-radius:var(--radius);
color:var(--text);
font-size:15px;
font-family:inherit;
transition:all 0.2s;
}
.form-group input:focus, .form-group select:focus{
outline:none;
border-color:var(--primary);
box-shadow:0 0 0 3px rgba(99,102,241,0.2);
}
.form-group input::placeholder{color:var(--text-muted)}
.form-row{
display:flex;
gap:12px;
}

.add-child-btn{
background:var(--primary);
color:white;
border:none;
padding:8px 16px;
border-radius:var(--radius-full);
font-size:13px;
font-weight:600;
cursor:pointer;
}
.add-child-btn:active{opacity:0.8}

.no-children{
text-align:center;
padding:24px;
color:var(--text-muted);
}
.no-children p{margin-bottom:12px;font-size:14px}
.add-first-child{
background:var(--surface);
color:var(--text);
border:1px dashed var(--border);
padding:12px 24px;
border-radius:var(--radius);
font-size:14px;
cursor:pointer;
}
.add-first-child:active{background:var(--card-hover)}

.child-item{
background:var(--surface);
border:1px solid var(--border);
border-radius:var(--radius);
padding:16px;
margin-bottom:12px;
position:relative;
}
.child-item-header{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:12px;
}
.child-number{
font-size:13px;
font-weight:600;
color:var(--primary-light);
}
.remove-child{
background:rgba(239,68,68,0.2);
color:#ef4444;
border:none;
width:28px;
height:28px;
border-radius:50%;
font-size:16px;
cursor:pointer;
display:flex;
align-items:center;
justify-content:center;
}
.remove-child:active{background:rgba(239,68,68,0.4)}
.child-fields{
display:flex;
flex-direction:column;
gap:10px;
}
.child-row{
display:flex;
gap:10px;
}
.child-row .form-group{margin-bottom:0}
.gender-select{
display:flex;
gap:8px;
}
.gender-option{
flex:1;
padding:12px;
background:var(--card);
border:2px solid var(--border);
border-radius:var(--radius);
text-align:center;
cursor:pointer;
transition:all 0.2s;
}
.gender-option.selected{
border-color:var(--primary);
background:rgba(99,102,241,0.15);
}
.gender-option:active{transform:scale(0.98)}
.gender-option span{font-size:20px;display:block;margin-bottom:4px}
.gender-option small{font-size:11px;color:var(--text-secondary)}

.form-actions{
display:flex;
flex-direction:column;
gap:10px;
margin:24px 0;
}
.action-btn{
display:flex;
align-items:center;
justify-content:center;
gap:10px;
padding:16px 24px;
border:none;
border-radius:var(--radius);
font-size:15px;
font-weight:600;
font-family:inherit;
cursor:pointer;
transition:all 0.2s;
}
.action-btn:active{transform:scale(0.98)}
.action-btn svg{width:20px;height:20px}
.action-btn.whatsapp{
background:#25D366;
color:white;
}
.action-btn.copy{
background:var(--primary);
color:white;
}
.action-btn.download{
background:var(--card);
color:var(--text);
border:1px solid var(--border);
}

.form-note{
background:var(--surface);
border:1px solid var(--border);
border-radius:var(--radius);
padding:16px;
font-size:13px;
color:var(--text-secondary);
line-height:1.6;
}

/* Toast notification */
.toast{
position:fixed;
bottom:100px;
left:50%;
transform:translateX(-50%) translateY(100px);
background:var(--card);
color:var(--text);
padding:14px 24px;
border-radius:var(--radius-full);
font-size:14px;
font-weight:500;
box-shadow:var(--shadow);
opacity:0;
transition:all 0.3s ease;
z-index:1000;
}
.toast.show{
transform:translateX(-50%) translateY(0);
opacity:1;
}
.toast.success{background:#10b981}
.toast.error{background:#ef4444}

/* Messages */
.no-data{
background:var(--surface);
border-radius:var(--radius);
padding:20px;
text-align:center;
color:var(--text-muted);
font-size:14px;
}
</style>
</head>
<body>
<!-- √âcran de connexion -->
<div class="login-screen" id="loginScreen">
<div class="login-container">
<div class="login-logo">
<div class="login-logo-icon">üå≥</div>
<h1>Famille Aly Ko√Øra</h1>
<p>Arbre g√©n√©alogique familial</p>
</div>

<div class="login-box">
<div class="login-title">
<span>üîê</span>
Acc√®s r√©serv√© √† la famille
</div>

<div class="login-form">
<div class="login-input-group">
<label>Mot de passe</label>
<div class="login-input-wrapper">
<input type="password" id="loginPassword" placeholder="Entrez le mot de passe" onkeypress="if(event.key==='Enter')login()">
<button class="toggle-password" onclick="togglePassword()">üëÅÔ∏è</button>
</div>
</div>

<label class="remember-me">
<input type="checkbox" id="rememberMe">
<span class="checkmark"></span>
Se souvenir de moi
</label>

<button class="login-btn" onclick="login()">
Acc√©der √† l'arbre familial
</button>

<div class="login-error" id="loginError"></div>
</div>
</div>

<div class="login-footer">
<p>üîí Espace priv√© familial</p>
</div>
</div>
</div>

<!-- Application principale (cach√©e par d√©faut) -->
<div class="app" id="mainApp" style="display:none">
<!-- Header -->
<header class="header">
<div class="header-top">
<div class="logo">
<div class="logo-icon">üå≥</div>
<div class="logo-text">
<h1>Famille Aly Ko√Øra</h1>
<span>Arbre g√©n√©alogique</span>
</div>
</div>
<button class="logout-btn" onclick="logout()" title="D√©connexion">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
</button>
</div>
<div class="header-stats">
<div class="header-stat">
<div class="header-stat-value">191</div>
<div class="header-stat-label">Membres</div>
</div>
<div class="header-stat">
<div class="header-stat-value">5</div>
<div class="header-stat-label">G√©n√©rations</div>
</div>
<div class="header-stat">
<div class="header-stat-value" id="maleCount">-</div>
<div class="header-stat-label">Hommes</div>
</div>
<div class="header-stat">
<div class="header-stat-value" id="femaleCount">-</div>
<div class="header-stat-label">Femmes</div>
</div>
</div>
</header>

<!-- Main content -->
<main>
<!-- Page Famille -->
<div class="page active" id="pageFamille">
<div class="scroll">
<select class="root-select" id="rootSelect" onchange="changeRoot()">
<option value="">üìç Choisir un point de d√©part...</option>
</select>

<div class="tree-nav" id="breadcrumb"></div>

<div id="personView"></div>
</div>
</div>

<!-- Page Recherche -->
<div class="page" id="pageRecherche">
<div class="scroll">
<div class="search-box">
<svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
<input type="text" class="search-input" placeholder="Rechercher une personne..." id="searchInput" oninput="filterSearch()">
</div>
<div class="person-list" id="personList"></div>
</div>
</div>

<!-- Page Parent√© -->
<div class="page" id="pageParente">
<div class="scroll">
<div class="relation-form">
<select class="relation-select" id="person1">
<option value="">üë§ Premi√®re personne...</option>
</select>
<select class="relation-select" id="person2">
<option value="">üë§ Deuxi√®me personne...</option>
</select>
<button class="relation-btn" onclick="findRelation()">
üîó Trouver le lien de parent√©
</button>
</div>
<div id="relationResult"></div>
</div>
</div>

<!-- Page Contribuer -->
<div class="page" id="pageContribuer">
<div class="scroll">
<div class="form-intro">
<div class="form-intro-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
<h2>Contribuer √† l'arbre</h2>
<p>Aidez-nous √† compl√©ter l'arbre familial en renseignant vos informations</p>
</div>

<div class="form-section">
<div class="form-section-title">üë§ Vos informations</div>
<div class="form-group">
<label>Nom</label>
<input type="text" id="f_nom" placeholder="Votre nom de famille">
</div>
<div class="form-group">
<label>Pr√©nom</label>
<input type="text" id="f_prenom" placeholder="Votre pr√©nom">
</div>
</div>

<div class="form-section">
<div class="form-section-title">üë® Votre p√®re</div>
<div class="form-row">
<div class="form-group">
<label>Nom</label>
<input type="text" id="f_pere_nom" placeholder="Nom du p√®re">
</div>
<div class="form-group">
<label>Pr√©nom</label>
<input type="text" id="f_pere_prenom" placeholder="Pr√©nom du p√®re">
</div>
</div>
</div>

<div class="form-section">
<div class="form-section-title">üë© Votre m√®re</div>
<div class="form-row">
<div class="form-group">
<label>Nom</label>
<input type="text" id="f_mere_nom" placeholder="Nom de la m√®re">
</div>
<div class="form-group">
<label>Pr√©nom</label>
<input type="text" id="f_mere_prenom" placeholder="Pr√©nom de la m√®re">
</div>
</div>
</div>

<div class="form-section">
<div class="form-section-title">
<span>üë∂ Vos enfants</span>
<button class="add-child-btn" onclick="addChild()">+ Ajouter</button>
</div>
<div id="childrenList"></div>
<div class="no-children" id="noChildren">
<p>Aucun enfant ajout√©</p>
<button class="add-first-child" onclick="addChild()">+ Ajouter un enfant</button>
</div>
</div>

<div class="form-actions">
<button class="action-btn whatsapp" onclick="sendWhatsApp()">
<svg viewBox="0 0 24 24" fill="currentColor"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
Envoyer par WhatsApp
</button>
<button class="action-btn copy" onclick="copyData()">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
Copier le texte
</button>
<button class="action-btn download" onclick="downloadData()">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7,10 12,15 17,10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
T√©l√©charger
</button>
</div>

<div class="form-note">
<strong>üìå Comment √ßa marche ?</strong><br>
Remplissez le formulaire puis envoyez-le par WhatsApp ou copiez le texte pour l'envoyer par email. Vos informations seront ajout√©es √† l'arbre familial.
</div>
</div>
</div>
</main>

<!-- Navigation -->
<nav class="nav">
<button class="nav-item active" onclick="showPage('pageFamille',this)">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9,22 9,12 15,12 15,22"/></svg>
Famille
</button>
<button class="nav-item" onclick="showPage('pageRecherche',this)">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
Recherche
</button>
<button class="nav-item" onclick="showPage('pageParente',this)">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
Parent√©
</button>
<button class="nav-item" onclick="showPage('pageContribuer',this)">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
Contribuer
</button>
</nav>
</div>

<script>
// ========== AUTHENTIFICATION S√âCURIS√âE ==========
// Seul le hash SHA-256 est stock√© - le mot de passe n'appara√Æt JAMAIS dans le code
const VALID_HASH = '2846e08eff7ade0829bf37e3bd3b0022e34649e1271cedd88a986c59df8afe77';

// Fonction de hashage SHA-256
async function sha256(message) {
  const msgBuffer = new TextEncoder().encode(message);
  const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
  const hashArray = Array.from(new Uint8Array(hashBuffer));
  return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
}

// V√©rification du mot de passe
async function login() {
  const input = document.getElementById('loginPassword').value;
  const remember = document.getElementById('rememberMe').checked;
  const errorEl = document.getElementById('loginError');
  
  // Hasher l'input et comparer avec le hash valide
  const inputHash = await sha256(input);
  
  if (inputHash === VALID_HASH) {
    // Succ√®s - stocker le hash comme preuve d'authentification
    if (remember) {
      localStorage.setItem('aly_koira_auth', inputHash);
    } else {
      sessionStorage.setItem('aly_koira_auth', inputHash);
    }
    
    // Animation et affichage de l'app
    document.getElementById('loginScreen').style.animation = 'loginFadeOut 0.3s ease forwards';
    setTimeout(() => {
      document.getElementById('loginScreen').style.display = 'none';
      document.getElementById('mainApp').style.display = 'flex';
    }, 300);
  } else {
    // Erreur
    errorEl.textContent = '‚ùå Mot de passe incorrect';
    document.getElementById('loginPassword').value = '';
    document.getElementById('loginPassword').focus();
    setTimeout(() => { errorEl.textContent = ''; }, 3000);
  }
}

function togglePassword() {
  const input = document.getElementById('loginPassword');
  const btn = event.target;
  if (input.type === 'password') {
    input.type = 'text';
    btn.textContent = 'üôà';
  } else {
    input.type = 'password';
    btn.textContent = 'üëÅÔ∏è';
  }
}

function checkAuth() {
  const remembered = localStorage.getItem('aly_koira_auth');
  const session = sessionStorage.getItem('aly_koira_auth');
  
  // V√©rifier si le hash stock√© correspond au hash valide
  if (remembered === VALID_HASH || session === VALID_HASH) {
    document.getElementById('loginScreen').style.display = 'none';
    document.getElementById('mainApp').style.display = 'flex';
    return true;
  }
  return false;
}

function logout() {
  localStorage.removeItem('aly_koira_auth');
  sessionStorage.removeItem('aly_koira_auth');
  location.reload();
}

// Animation de sortie
const loginStyle = document.createElement('style');
loginStyle.textContent = '@keyframes loginFadeOut{from{opacity:1}to{opacity:0}}';
document.head.appendChild(loginStyle);

// V√©rifier l'auth au chargement
document.addEventListener('DOMContentLoaded', () => {
  if (!checkAuth()) {
    document.getElementById('loginPassword').focus();
  }
});

// ========== DONN√âES ==========
const D={
// G√âN√âRATION 1
"alkamahamane":{id:"alkamahamane",n:"Alkamahamane Sabalkaidi",a:null,g:"M",gen:1,f:null,m:null,sp:["Lalla Hamatou Lassane Koro"],c:["goussoumbi","goma","hounaye","soumboulou","farimata_alk","ali"]},

// G√âN√âRATION 2
"goussoumbi":{id:"goussoumbi",n:"Goussoumbi Alkamahamane",a:null,g:"M",gen:2,f:"alkamahamane",m:"Lalla Hamatou",sp:["Aissa Mahamane Hamatou"],c:["alphary_g","garba_g","tillimmazou"]},
"goma":{id:"goma",n:"Goma Alkamahamane",a:null,g:"M",gen:2,f:"alkamahamane",m:"Lalla Hamatou",c:["sidiki_g"]},
"hounaye":{id:"hounaye",n:"Hounaye (Hounna) Alkamahamane",a:null,g:"M",gen:2,f:"alkamahamane",m:"Lalla Hamatou",sp:["Ibannia Albichir"],c:["hallachi_h","aissa_h","tayda_h"]},
"soumboulou":{id:"soumboulou",n:"Soumboulou Alkamahamane",a:null,g:"F",gen:2,f:"alkamahamane",m:"Lalla Hamatou",c:[]},
"farimata_alk":{id:"farimata_alk",n:"Farimata Alkamahamane",a:null,g:"F",gen:2,f:"alkamahamane",m:"Lalla Hamatou",c:["dalla"]},
"ali":{id:"ali",n:"Ali Alkamahamane",a:"Aly Ko√Øra",g:"M",gen:2,f:"alkamahamane",m:"Lalla Hamatou",sp:["Waykounga Samba","Farimata Alassane","Fouga Alassane Hamatou"],c:["mahamane","babachigaw","kobbo","moussa","omorou","tamimoune","mahadi"]},

// G√âN√âRATION 3
// Enfants de Goussoumbi
"alphary_g":{id:"alphary_g",n:"Alphary Goussoumbi",a:null,g:"M",gen:3,f:"goussoumbi",m:"Aissa Mahamane Hamatou",c:[]},
"garba_g":{id:"garba_g",n:"Garba Goussoumbi",a:null,g:"M",gen:3,f:"goussoumbi",m:"Aissa Mahamane Hamatou",c:[]},
"tillimmazou":{id:"tillimmazou",n:"Tillimmazou Goussoumbi",a:null,g:"M",gen:3,f:"goussoumbi",m:"Aissa Mahamane Hamatou",c:[]},
// Enfants de Goma
"sidiki_g":{id:"sidiki_g",n:"Sidiki Goma",a:null,g:"M",gen:3,f:"goma",m:null,c:[]},
// Enfants de Hounaye
"hallachi_h":{id:"hallachi_h",n:"Hallachi Hounna",a:null,g:"M",gen:3,f:"hounaye",m:"Ibannia Albichir",c:[]},
"aissa_h":{id:"aissa_h",n:"Aissa Hounna",a:null,g:"F",gen:3,f:"hounaye",m:"Ibannia Albichir",c:[]},
"tayda_h":{id:"tayda_h",n:"Tayda Hounna",a:null,g:"M",gen:3,f:"hounaye",m:"Ibannia Albichir",c:[]},
// Enfants de Ali Alkamahamane
"mahamane":{id:"mahamane",n:"Mahamane Ali",a:null,g:"M",gen:3,f:"ali",m:"Waykounga Samba",sp:["A√Øcha Houneye","Adijatou Hamma (Hadizatou)","A√Øcha Hamma"],c:["mohomone","taya","ahmadou","yata","issouf","halilou","alhalil","aliou_m","houzaye","alassane_s","agaicha_m","abdou_d"]},
"babachigaw":{id:"babachigaw",n:"Babachigaw Ali",a:null,g:"M",gen:3,f:"ali",m:"Farimata Alassane",sp:["Halimatou Mohomodou"],c:["aliou_b","aboubacar","ousmane_a","alhousseini","abdoulaye_s","nouhoum","mata_b"]},
"kobbo":{id:"kobbo",n:"Agacha Ali",a:"Kobbo",g:"F",gen:3,f:"ali",m:"Fouga Alassane",sp:["Fedja Zongo","Mouhammadou Gagay","Ta√Øda Houne√Ø"],c:["aicha_f","arhamatou_f","issa_m","taya_m","izeboncana","jaouja","dally"]},
"moussa":{id:"moussa",n:"Moussa Ali",a:null,g:"M",gen:3,f:"ali",m:"Fouga Alassane",sp:["Hab√Ølatou Mama"],c:["mata_m","haylloli","wanaissou_m","jato","alassane_m","assoumane_m","abdou_m","sala"]},
"omorou":{id:"omorou",n:"Omorou Ali",a:null,g:"M",gen:3,f:"ali",m:"Fouga Alassane",sp:["Cheffou Aliou"],c:["houssouba","kabongou","mahamadou_o","sourgou","tabbo_o","zabbo","ichata_o"]},
"tamimoune":{id:"tamimoune",n:"Tamimoune Ali",a:null,g:"M",gen:3,f:"ali",m:"Fouga Alassane",sp:["Alfari Goussoundi"],c:["chiddaye","mata_a","ichata_a","boudjal","saleymatou"]},
"mahadi":{id:"mahadi",n:"Mahadi Ali",a:null,g:"M",gen:3,f:"ali",m:"Fouga Alassane",sp:["Aldjannatou Ahmadou"],c:["dayo","saffia","sawde","zarha","aminta_m","chaffa","seydou_m"]},
"dalla":{id:"dalla",n:"Dalla",a:null,g:"M",gen:3,f:null,m:"farimata_alk",c:[]},

// G√âN√âRATION 4 - Enfants de Mahamane
"mohomone":{id:"mohomone",n:"Mohomone Mahamane",a:"Galla",g:"M",gen:4,f:"mahamane",m:"A√Øcha Houneye",sp:["(√©pouse inconnue)"],c:["ibrahim_m","seydou_mo","ousmane_m","adama_m","hirinissa"]},
"taya":{id:"taya",n:"Taya Mahamane",a:null,g:"M",gen:4,f:"mahamane",m:"A√Øcha Houneye",sp:["(√©pouse inconnue)"],c:["halimatou_h","assaliha_h","arboncana","hadaye"]},
"ahmadou":{id:"ahmadou",n:"Ahmadou Mahamane",a:"Agawa",g:"M",gen:4,f:"mahamane",m:"Adijatou Hamma",c:[]},
"yata":{id:"yata",n:"Yata Mahamane",a:null,g:"F",gen:4,f:"mahamane",m:"Adijatou Hamma",sp:["Assabi"],c:["momo","adama_a","hounaijata","waykouti","daoulata","mouna_a","zeinaba"]},
"issouf":{id:"issouf",n:"Issouf Mahamane",a:"Tabbo",g:"M",gen:4,f:"mahamane",m:"Adijatou Hamma",sp:["Haoua Assaliha","Nafissatou Achekou","Saffia Mahadi"],c:["moulaye","adijatou_t","annoussourou","alassane_t","arhamatou_t","assaliha_t","yahiya_t"]},
"halilou":{id:"halilou",n:"Halilou Mahamane",a:null,g:"M",gen:4,f:"mahamane",m:"A√Øcha Hamma",sp:["Yolli Hamadalamine"],c:["hamma","idrissa_h","mariam_h","aichata_h"]},
"alhalil":{id:"alhalil",n:"Alhalil Mahamane",a:null,g:"M",gen:4,f:"mahamane",m:"A√Øcha Hamma",c:[]},
"aliou_m":{id:"aliou_m",n:"Aliou Mahamane",a:null,g:"M",gen:4,f:"mahamane",m:"A√Øcha Hamma",c:[]},
"houzaye":{id:"houzaye",n:"Houzaye Mahamane",a:null,g:"M",gen:4,f:"mahamane",m:"A√Øcha Hamma",c:[]},
"alassane_s":{id:"alassane_s",n:"Alassane Mahamane",a:"Sosso",g:"M",gen:4,f:"mahamane",m:"A√Øcha Hamma",sp:["Aminta N'Goiba Kabongou"],c:["alhabibou","alkassoume","ibrahim_a","abdourhamane_a","moussa_a","mariama_a","safietou_a","hamsatou","arhamatou_a","hawa_a","bintou","aichata_a"]},
"agaicha_m":{id:"agaicha_m",n:"Agaicha Mahamane",a:null,g:"F",gen:4,f:"mahamane",m:"A√Øcha Hamma",c:[]},
"abdou_d":{id:"abdou_d",n:"Abdou Mahamane",a:"Doudou",g:"M",gen:4,f:"mahamane",m:"A√Øcha Hamma",sp:["Bacha Tabbo","Arhama Ibrahim"],c:["ichata_d","saley_d","hanchata","zaouzata","sarata","akilou","moukaila","daouda","sadou_d","idrissa_d"]},

// G√âN√âRATION 4 - Enfants de Babachigaw
"aliou_b":{id:"aliou_b",n:"Aliou Babachigaw",a:null,g:"M",gen:4,f:"babachigaw",m:"Halimatou Mohomodou",sp:["Halimatou Hamadahamane","Salama Amiro"],c:[]},
"aboubacar":{id:"aboubacar",n:"Aboubacar Babachigaw",a:"Djama",g:"M",gen:4,f:"babachigaw",m:"Halimatou Mohomodou",c:[]},
"ousmane_a":{id:"ousmane_a",n:"Ousmane Babachigaw",a:"Achidogo",g:"M",gen:4,f:"babachigaw",m:"Halimatou Mohomodou",c:[]},
"alhousseini":{id:"alhousseini",n:"Alhousseini Babachigaw",a:"Aggada",g:"M",gen:4,f:"babachigaw",m:"Halimatou Mohomodou",sp:["Mata Alphary (Tamimoune)"],c:["hakimoune","hamida","houna","zabbo_ag"]},
"abdoulaye_s":{id:"abdoulaye_s",n:"Abdoulaye Babachigaw",a:"Sagara",g:"M",gen:4,f:"babachigaw",m:"Halimatou Mohomodou",c:[]},
"nouhoum":{id:"nouhoum",n:"Nouhoum Babachigaw",a:null,g:"M",gen:4,f:"babachigaw",m:"Halimatou Mohomodou",c:[]},
"mata_b":{id:"mata_b",n:"Mata Babachigaw",a:null,g:"F",gen:4,f:"babachigaw",m:"Halimatou Mohomodou",c:[]},

// G√âN√âRATION 4 - Enfants de Moussa
"mata_m":{id:"mata_m",n:"Mata Moussa",a:null,g:"F",gen:4,f:"moussa",m:"Hab√Ølatou Mama",c:[]},
"haylloli":{id:"haylloli",n:"Haylloli Moussa",a:null,g:"F",gen:4,f:"moussa",m:"Hab√Ølatou Mama",c:[]},
"wanaissou_m":{id:"wanaissou_m",n:"Wanaissou Moussa",a:null,g:"M",gen:4,f:"moussa",m:"Hab√Ølatou Mama",c:[]},
"jato":{id:"jato",n:"Jato Moussa",a:null,g:"F",gen:4,f:"moussa",m:"Hab√Ølatou Mama",c:[]},
"alassane_m":{id:"alassane_m",n:"Alassane Moussa",a:null,g:"M",gen:4,f:"moussa",m:"Hab√Ølatou Mama",c:[]},
"assoumane_m":{id:"assoumane_m",n:"Assoumane Moussa",a:null,g:"M",gen:4,f:"moussa",m:"Hab√Ølatou Mama",c:[]},
"abdou_m":{id:"abdou_m",n:"Abdou Moussa",a:"Boudou",g:"M",gen:4,f:"moussa",m:"Hab√Ølatou Mama",c:[]},
"sala":{id:"sala",n:"Sala Moussa",a:null,g:"M",gen:4,f:"moussa",m:"Hab√Ølatou Mama",c:[]},

// G√âN√âRATION 4 - Enfants d'Omorou
"houssouba":{id:"houssouba",n:"Houssouba Omorou",a:null,g:"M",gen:4,f:"omorou",m:"Cheffou Aliou",c:[]},
"kabongou":{id:"kabongou",n:"Kabongou Omorou",a:null,g:"M",gen:4,f:"omorou",m:"Cheffou Aliou",c:["wayo","aminta_k","makiou","yacouba","ngolo","issiaka"]},
"mahamadou_o":{id:"mahamadou_o",n:"Mahamadou Omorou",a:null,g:"M",gen:4,f:"omorou",m:"Cheffou Aliou",c:["zeinabou","koddo_m","bouba_m"]},
"sourgou":{id:"sourgou",n:"Sourgou Omorou",a:null,g:"M",gen:4,f:"omorou",m:"Cheffou Aliou",c:["adija_s","mariama_s","fatoumata_s","ammou","koddo_s"]},
"tabbo_o":{id:"tabbo_o",n:"Tabbo Omorou",a:"Abdoulaye",g:"M",gen:4,f:"omorou",m:"Cheffou Aliou",sp:["Saffia Mahadi"],c:["almahamoudou","minkailou","bacha","moumoumini","gallou","soumma","sadou_t"]},
"zabbo":{id:"zabbo",n:"Zabbo Omorou",a:null,g:"F",gen:4,f:"omorou",m:"Cheffou Aliou",c:[]},
"ichata_o":{id:"ichata_o",n:"Ichata Omorou",a:null,g:"F",gen:4,f:"omorou",m:"Cheffou Aliou",c:["alhoussouna","hachimine","hallachi","houreita_a","mariama_dj","haoua_dj","aminta_dj","haja"]},

// G√âN√âRATION 4 - Enfants de Tamimoune
"chiddaye":{id:"chiddaye",n:"Chiddaye Alphary",a:null,g:"M",gen:4,f:"tamimoune",m:"Alfari Goussoundi",sp:["Bintou Mayloule"],c:["djiougou","arhamatou_ch"]},
"mata_a":{id:"mata_a",n:"Mata Alphary",a:null,g:"F",gen:4,f:"tamimoune",m:"Alfari Goussoundi",sp:["Alhousseini Babachigaw (Aggada)"],c:["hakimoune","hamida","houna","zabbo_ag"]},
"ichata_a":{id:"ichata_a",n:"Ichata Alphary",a:"Aissata",g:"F",gen:4,f:"tamimoune",m:"Alfari Goussoundi",c:[]},
"boudjal":{id:"boudjal",n:"Boudjal Alphary",a:"Boudia",g:"M",gen:4,f:"tamimoune",m:"Alfari Goussoundi",c:[]},
"saleymatou":{id:"saleymatou",n:"Saleymatou Alphary",a:null,g:"F",gen:4,f:"tamimoune",m:"Alfari Goussoundi",sp:["Ario Salo de Zindiga"],c:["salo"]},

// G√âN√âRATION 4 - Enfants de Mahadi
"dayo":{id:"dayo",n:"Dayo Mahadi",a:null,g:"F",gen:4,f:"mahadi",m:"Aldjannatou Ahmadou",c:[]},
"saffia":{id:"saffia",n:"Saffia Mahadi",a:null,g:"F",gen:4,f:"mahadi",m:"Aldjannatou Ahmadou",c:[]},
"sawde":{id:"sawde",n:"Sawde Mahadi",a:null,g:"F",gen:4,f:"mahadi",m:"Aldjannatou Ahmadou",c:[]},
"zarha":{id:"zarha",n:"Zarha Mahadi",a:null,g:"F",gen:4,f:"mahadi",m:"Aldjannatou Ahmadou",c:[]},
"aminta_m":{id:"aminta_m",n:"Aminta Mahadi",a:null,g:"F",gen:4,f:"mahadi",m:"Aldjannatou Ahmadou",c:[]},
"chaffa":{id:"chaffa",n:"Chaffa Mahadi",a:null,g:"M",gen:4,f:"mahadi",m:"Aldjannatou Ahmadou",c:[]},
"seydou_m":{id:"seydou_m",n:"Seydou Mahadi",a:null,g:"M",gen:4,f:"mahadi",m:"Aldjannatou Ahmadou",c:["babeye","abaneye","adija_se","chidi","arhamatou_se","mariama_se","ali_se","bibata","abdoulaye_se","saleye"]},

// G√âN√âRATION 4 - Enfants de Kobbo
"aicha_f":{id:"aicha_f",n:"Aicha Fedja",a:null,g:"F",gen:4,f:"fedja_zongo",m:"kobbo",c:["safietou_h","farimata_h","mohomodou_h","haoua_h","adama_h"]},
"arhamatou_f":{id:"arhamatou_f",n:"Arhamatou Fedja",a:null,g:"F",gen:4,f:"fedja_zongo",m:"kobbo",c:["fatou_m","maimouna_m","yahiya_m","mommo_m","wanaissou_b"]},
"issa_m":{id:"issa_m",n:"Issa Mohomodou",a:null,g:"M",gen:4,f:"mouhammadou_gagay",m:"kobbo",c:["mohomone_i","haoua_i"]},
"taya_m":{id:"taya_m",n:"Taya Mohomodou",a:null,g:"M",gen:4,f:"mouhammadou_gagay",m:"kobbo",c:["babba","noussoura","kabongou_a"]},
"izeboncana":{id:"izeboncana",n:"Izeboncana Tayda",a:null,g:"F",gen:4,f:"taida_hounei",m:"kobbo",c:["timintika","sawata","zarha_b"]},
"jaouja":{id:"jaouja",n:"Jaouja Tayda",a:null,g:"F",gen:4,f:"taida_hounei",m:"kobbo",c:["chidiya","ichata_ha"]},
"dally":{id:"dally",n:"Dally Tayda",a:null,g:"F",gen:4,f:"taida_hounei",m:"kobbo",c:["arhamatou_d","hancha","idrissa_da","abdoulaye_d","mouna_d","bouba_d","souma","koddo_d"]},

// G√âN√âRATION 5 - Petits-enfants (√©chantillon avec m√®res)
"moulaye":{id:"moulaye",n:"Moulaye Tabbo",a:null,g:"M",gen:5,f:"issouf",m:"Haoua Assaliha",c:[]},
"adijatou_t":{id:"adijatou_t",n:"Adijatou Tabbo",a:null,g:"F",gen:5,f:"issouf",m:"Haoua Assaliha",c:[]},
"annoussourou":{id:"annoussourou",n:"Annoussourou Tabbo",a:null,g:"M",gen:5,f:"issouf",m:"Nafissatou Achekou",c:[]},
"alassane_t":{id:"alassane_t",n:"Alassane Tabbo",a:"Boncana",g:"M",gen:5,f:"issouf",m:"Nafissatou Achekou",c:[]},
"arhamatou_t":{id:"arhamatou_t",n:"Arhamatou Tabbo",a:null,g:"F",gen:5,f:"issouf",m:"Nafissatou Achekou",c:[]},
"assaliha_t":{id:"assaliha_t",n:"Assaliha Tabbo",a:null,g:"F",gen:5,f:"issouf",m:"Nafissatou Achekou",c:[]},
"yahiya_t":{id:"yahiya_t",n:"Yahiya Tabbo",a:null,g:"M",gen:5,f:"issouf",m:"Saffia Mahadi",c:[]},
"momo":{id:"momo",n:"Momo Assabi",a:null,g:"M",gen:5,f:null,m:"yata",c:[]},
"adama_a":{id:"adama_a",n:"Adama Assabi",a:null,g:"M",gen:5,f:null,m:"yata",c:[]},
"hounaijata":{id:"hounaijata",n:"Hounaijata Assabi",a:null,g:"F",gen:5,f:null,m:"yata",c:[]},
"waykouti":{id:"waykouti",n:"Waykouti Assabi",a:null,g:"F",gen:5,f:null,m:"yata",c:[]},
"daoulata":{id:"daoulata",n:"Daoulata Assabi",a:null,g:"F",gen:5,f:null,m:"yata",c:[]},
"mouna_a":{id:"mouna_a",n:"Mouna Assabi",a:null,g:"F",gen:5,f:null,m:"yata",c:[]},
"zeinaba":{id:"zeinaba",n:"Zeinaba Assabi",a:null,g:"F",gen:5,f:null,m:"yata",c:[]},
"alhabibou":{id:"alhabibou",n:"Alhabibou Alassane",a:null,g:"M",gen:5,f:"alassane_s",m:"Aminta N'Goiba",c:[]},
"alkassoume":{id:"alkassoume",n:"Alkassoume Alassane",a:null,g:"M",gen:5,f:"alassane_s",m:"Aminta N'Goiba",c:[]},
"ibrahim_a":{id:"ibrahim_a",n:"Ibrahim Alassane",a:null,g:"M",gen:5,f:"alassane_s",m:"Aminta N'Goiba",c:[]},
"abdourhamane_a":{id:"abdourhamane_a",n:"Abdourhamane Alassane",a:null,g:"M",gen:5,f:"alassane_s",m:"Aminta N'Goiba",c:[]},
"moussa_a":{id:"moussa_a",n:"Moussa Alassane",a:null,g:"M",gen:5,f:"alassane_s",m:"Aminta N'Goiba",c:[]},
"mariama_a":{id:"mariama_a",n:"Mariama Alassane",a:null,g:"F",gen:5,f:"alassane_s",m:"Aminta N'Goiba",c:[]},
"safietou_a":{id:"safietou_a",n:"Safietou Alassane",a:null,g:"F",gen:5,f:"alassane_s",m:"Aminta N'Goiba",c:[]},
"hamsatou":{id:"hamsatou",n:"Hamsatou Alassane",a:null,g:"F",gen:5,f:"alassane_s",m:"Aminta N'Goiba",c:[]},
"arhamatou_a":{id:"arhamatou_a",n:"Arhamatou Alassane",a:null,g:"F",gen:5,f:"alassane_s",m:"Aminta N'Goiba",c:[]},
"hawa_a":{id:"hawa_a",n:"Hawa Alassane",a:null,g:"F",gen:5,f:"alassane_s",m:"Aminta N'Goiba",c:[]},
"bintou":{id:"bintou",n:"Bintou Alassane",a:null,g:"F",gen:5,f:"alassane_s",m:"Aminta N'Goiba",c:[]},
"aichata_a":{id:"aichata_a",n:"Aichata Alassane",a:null,g:"F",gen:5,f:"alassane_s",m:"Aminta N'Goiba",c:[]},
"ibrahim_m":{id:"ibrahim_m",n:"Ibrahim Mohomone",a:null,g:"M",gen:5,f:"mohomone",m:null,c:[]},
"seydou_mo":{id:"seydou_mo",n:"Seydou Mohomone",a:null,g:"M",gen:5,f:"mohomone",m:null,c:[]},
"ousmane_m":{id:"ousmane_m",n:"Ousmane Mohomone",a:null,g:"M",gen:5,f:"mohomone",m:null,c:[]},
"adama_m":{id:"adama_m",n:"Adama Mohomone",a:null,g:"M",gen:5,f:"mohomone",m:null,c:[]},
"hirinissa":{id:"hirinissa",n:"Hirinissa Mohomone",a:"Aichata",g:"F",gen:5,f:"mohomone",m:null,c:[]},
"hamma":{id:"hamma",n:"Hamma Halilou",a:"Ario",g:"M",gen:5,f:"halilou",m:"Yolli Hamadalamine",c:[]},
"idrissa_h":{id:"idrissa_h",n:"Idrissa Halilou",a:null,g:"M",gen:5,f:"halilou",m:"Yolli Hamadalamine",c:[]},
"mariam_h":{id:"mariam_h",n:"Mariam Halilou",a:null,g:"F",gen:5,f:"halilou",m:"Yolli Hamadalamine",c:[]},
"aichata_h":{id:"aichata_h",n:"Aichata Halilou",a:null,g:"F",gen:5,f:"halilou",m:"Yolli Hamadalamine",c:[]},
"halimatou_h":{id:"halimatou_h",n:"Halimatou Hamadahamane",a:null,g:"F",gen:5,f:"taya",m:null,c:[]},
"assaliha_h":{id:"assaliha_h",n:"Assaliha Hamadahamane",a:null,g:"F",gen:5,f:"taya",m:null,c:[]},
"arboncana":{id:"arboncana",n:"Arboncana Hamadahamane",a:null,g:"M",gen:5,f:"taya",m:null,c:[]},
"hadaye":{id:"hadaye",n:"Hadaye Hamadahamane",a:null,g:"F",gen:5,f:"taya",m:null,c:[]},
"ichata_d":{id:"ichata_d",n:"Ichata Doudou",a:null,g:"F",gen:5,f:"abdou_d",m:"Bacha Tabbo",c:[]},
"saley_d":{id:"saley_d",n:"Saley Doudou",a:null,g:"M",gen:5,f:"abdou_d",m:"Bacha Tabbo",c:[]},
"hanchata":{id:"hanchata",n:"Hanchata Doudou",a:null,g:"F",gen:5,f:"abdou_d",m:"Bacha Tabbo",c:[]},
"zaouzata":{id:"zaouzata",n:"Zaouzata Doudou",a:null,g:"F",gen:5,f:"abdou_d",m:"Bacha Tabbo",c:[]},
"sarata":{id:"sarata",n:"Sarata Doudou",a:null,g:"F",gen:5,f:"abdou_d",m:"Bacha Tabbo",c:[]},
"akilou":{id:"akilou",n:"Akilou Doudou",a:null,g:"M",gen:5,f:"abdou_d",m:"Bacha Tabbo",c:[]},
"moukaila":{id:"moukaila",n:"Moukaila Doudou",a:null,g:"M",gen:5,f:"abdou_d",m:"Bacha Tabbo",c:[]},
"daouda":{id:"daouda",n:"Daouda Doudou",a:null,g:"M",gen:5,f:"abdou_d",m:"Bacha Tabbo",c:[]},
"sadou_d":{id:"sadou_d",n:"Sadou Doudou",a:null,g:"M",gen:5,f:"abdou_d",m:"Bacha Tabbo",c:[]},
"idrissa_d":{id:"idrissa_d",n:"Idrissa Doudou",a:null,g:"M",gen:5,f:"abdou_d",m:"Bacha Tabbo",c:[]},
"wayo":{id:"wayo",n:"Wayo Kabongou",a:"N'goyba",g:"M",gen:5,f:"kabongou",m:null,c:[]},
"aminta_k":{id:"aminta_k",n:"Aminta Kabongou",a:"N'goyba",g:"F",gen:5,f:"kabongou",m:null,c:[]},
"makiou":{id:"makiou",n:"Makiou Kabongou",a:"N'goyba",g:"M",gen:5,f:"kabongou",m:null,c:[]},
"yacouba":{id:"yacouba",n:"Yacouba Kabongou",a:"N'goyba",g:"M",gen:5,f:"kabongou",m:null,c:[]},
"ngolo":{id:"ngolo",n:"N'Golo Kabongou",a:"N'goyba",g:"M",gen:5,f:"kabongou",m:null,c:[]},
"issiaka":{id:"issiaka",n:"Issiaka Kabongou",a:"N'goyba",g:"M",gen:5,f:"kabongou",m:null,c:[]},
"zeinabou":{id:"zeinabou",n:"Zeinabou Mahamadou",a:null,g:"F",gen:5,f:"mahamadou_o",m:null,c:[]},
"koddo_m":{id:"koddo_m",n:"Koddo Mahamadou",a:null,g:"F",gen:5,f:"mahamadou_o",m:null,c:[]},
"bouba_m":{id:"bouba_m",n:"Bouba Mahamadou",a:null,g:"M",gen:5,f:"mahamadou_o",m:null,c:[]},
"adija_s":{id:"adija_s",n:"Adija Sourgou",a:null,g:"F",gen:5,f:"sourgou",m:null,c:[]},
"mariama_s":{id:"mariama_s",n:"Mariama Sourgou",a:null,g:"F",gen:5,f:"sourgou",m:null,c:[]},
"fatoumata_s":{id:"fatoumata_s",n:"Fatoumata Sourgou",a:null,g:"F",gen:5,f:"sourgou",m:null,c:[]},
"ammou":{id:"ammou",n:"Ammou Sourgou",a:null,g:"F",gen:5,f:"sourgou",m:null,c:[]},
"koddo_s":{id:"koddo_s",n:"Koddo Sourgou",a:null,g:"F",gen:5,f:"sourgou",m:null,c:[]},
"almahamoudou":{id:"almahamoudou",n:"Almahamoudou Tabagore",a:"Illile",g:"M",gen:5,f:"tabbo_o",m:"Saffia Mahadi",c:[]},
"minkailou":{id:"minkailou",n:"Minkailou Tabagore",a:"Kila",g:"M",gen:5,f:"tabbo_o",m:"Saffia Mahadi",c:[]},
"bacha":{id:"bacha",n:"Bacha Tabagore",a:null,g:"M",gen:5,f:"tabbo_o",m:"Saffia Mahadi",c:[]},
"moumoumini":{id:"moumoumini",n:"Moumoumini Tabagore",a:"Belleythiero",g:"M",gen:5,f:"tabbo_o",m:"Saffia Mahadi",c:[]},
"gallou":{id:"gallou",n:"Gallou Tabagore",a:null,g:"M",gen:5,f:"tabbo_o",m:"Saffia Mahadi",c:[]},
"soumma":{id:"soumma",n:"Soumma Tabagore",a:null,g:"M",gen:5,f:"tabbo_o",m:"Saffia Mahadi",c:[]},
"sadou_t":{id:"sadou_t",n:"Sadou Tabagore",a:null,g:"M",gen:5,f:"tabbo_o",m:"Saffia Mahadi",c:[]},
"alhoussouna":{id:"alhoussouna",n:"Alhoussouna Bodowal",a:null,g:"M",gen:5,f:null,m:"ichata_o",c:[]},
"hachimine":{id:"hachimine",n:"Hachimine Bodowal",a:null,g:"M",gen:5,f:null,m:"ichata_o",c:[]},
"hallachi":{id:"hallachi",n:"Hallachi Agawa",a:null,g:"M",gen:5,f:null,m:"ichata_o",c:[]},
"houreita_a":{id:"houreita_a",n:"Houreita Agawa",a:null,g:"F",gen:5,f:null,m:"ichata_o",c:[]},
"mariama_dj":{id:"mariama_dj",n:"Mariama Djama",a:null,g:"F",gen:5,f:null,m:"ichata_o",c:[]},
"haoua_dj":{id:"haoua_dj",n:"Haoua Djama",a:null,g:"F",gen:5,f:null,m:"ichata_o",c:[]},
"aminta_dj":{id:"aminta_dj",n:"Aminta Djama",a:null,g:"F",gen:5,f:null,m:"ichata_o",c:[]},
"haja":{id:"haja",n:"Haja Galleye",a:null,g:"F",gen:5,f:null,m:"ichata_o",c:[]},
"babeye":{id:"babeye",n:"Babeye Seydou",a:null,g:"M",gen:5,f:"seydou_m",m:null,c:[]},
"abaneye":{id:"abaneye",n:"Abaneye Seydou",a:null,g:"M",gen:5,f:"seydou_m",m:null,c:[]},
"adija_se":{id:"adija_se",n:"Adija Seydou",a:null,g:"F",gen:5,f:"seydou_m",m:null,c:[]},
"chidi":{id:"chidi",n:"Chidi Seydou",a:null,g:"M",gen:5,f:"seydou_m",m:null,c:[]},
"arhamatou_se":{id:"arhamatou_se",n:"Arhamatou Seydou",a:null,g:"F",gen:5,f:"seydou_m",m:null,c:[]},
"mariama_se":{id:"mariama_se",n:"Mariama Seydou",a:null,g:"F",gen:5,f:"seydou_m",m:null,c:[]},
"ali_se":{id:"ali_se",n:"Ali Seydou",a:null,g:"M",gen:5,f:"seydou_m",m:null,c:[]},
"bibata":{id:"bibata",n:"Bibata Seydou",a:null,g:"F",gen:5,f:"seydou_m",m:null,c:[]},
"abdoulaye_se":{id:"abdoulaye_se",n:"Abdoulaye Seydou",a:null,g:"M",gen:5,f:"seydou_m",m:null,c:[]},
"saleye":{id:"saleye",n:"Saleye Seydou",a:null,g:"M",gen:5,f:"seydou_m",m:null,c:[]},
"djiougou":{id:"djiougou",n:"Djiougou Chideye",a:null,g:"M",gen:5,f:"chiddaye",m:"Bintou Mayloule",c:[]},
"arhamatou_ch":{id:"arhamatou_ch",n:"Arhamatou Chideye",a:null,g:"F",gen:5,f:"chiddaye",m:null,c:[]},
"hakimoune":{id:"hakimoune",n:"Hakimoune Aggada",a:null,g:"M",gen:5,f:"alhousseini",m:"mata_a",c:[]},
"hamida":{id:"hamida",n:"Hamida Aggada",a:null,g:"F",gen:5,f:"alhousseini",m:"mata_a",c:[]},
"houna":{id:"houna",n:"Houna Aggada",a:null,g:"F",gen:5,f:"alhousseini",m:"mata_a",c:[]},
"zabbo_ag":{id:"zabbo_ag",n:"Zabbo Aggada",a:null,g:"F",gen:5,f:"alhousseini",m:"mata_a",c:[]},
"salo":{id:"salo",n:"Salo Alkassahi",a:null,g:"M",gen:5,f:null,m:"saleymatou",c:[]},
"safietou_h":{id:"safietou_h",n:"Safietou Hanakoukou",a:null,g:"F",gen:5,f:null,m:"aicha_f",c:[]},
"farimata_h":{id:"farimata_h",n:"Farimata Hanakoukou",a:null,g:"F",gen:5,f:null,m:"aicha_f",c:[]},
"mohomodou_h":{id:"mohomodou_h",n:"Mohomodou Hanakoukou",a:"Mawal",g:"M",gen:5,f:null,m:"aicha_f",c:[]},
"haoua_h":{id:"haoua_h",n:"Haoua Hanakoukou",a:null,g:"F",gen:5,f:null,m:"aicha_f",c:[]},
"adama_h":{id:"adama_h",n:"Adama Hanakoukou",a:null,g:"M",gen:5,f:null,m:"aicha_f",c:[]},
"fatou_m":{id:"fatou_m",n:"Fatou Moussa",a:null,g:"F",gen:5,f:null,m:"arhamatou_f",c:[]},
"maimouna_m":{id:"maimouna_m",n:"Maimouna Moussa",a:null,g:"F",gen:5,f:null,m:"arhamatou_f",c:[]},
"yahiya_m":{id:"yahiya_m",n:"Yahiya Moussa",a:null,g:"M",gen:5,f:null,m:"arhamatou_f",c:[]},
"mommo_m":{id:"mommo_m",n:"Mommo Moussa",a:null,g:"M",gen:5,f:null,m:"arhamatou_f",c:[]},
"wanaissou_b":{id:"wanaissou_b",n:"Wanaissou Moussa Bahadou",a:null,g:"M",gen:5,f:null,m:"arhamatou_f",c:[]},
"babba":{id:"babba",n:"Babba Amiro",a:null,g:"M",gen:5,f:"taya_m",m:null,c:[]},
"noussoura":{id:"noussoura",n:"Noussoura Amiro",a:null,g:"F",gen:5,f:"taya_m",m:null,c:[]},
"kabongou_a":{id:"kabongou_a",n:"Kabongou Amiro",a:null,g:"M",gen:5,f:"taya_m",m:null,c:[]},
"mohomone_i":{id:"mohomone_i",n:"Mohomone Issa",a:null,g:"M",gen:5,f:"issa_m",m:null,c:[]},
"haoua_i":{id:"haoua_i",n:"Haoua Issa",a:"N'gary",g:"F",gen:5,f:"issa_m",m:null,c:[]},
"timintika":{id:"timintika",n:"Timintika Bodowal",a:null,g:"F",gen:5,f:null,m:"izeboncana",c:[]},
"sawata":{id:"sawata",n:"Sawata Bodowal",a:null,g:"F",gen:5,f:null,m:"izeboncana",c:[]},
"zarha_b":{id:"zarha_b",n:"Zarha Bodowal",a:null,g:"F",gen:5,f:null,m:"izeboncana",c:[]},
"chidiya":{id:"chidiya",n:"Chidiya Halimine",a:null,g:"F",gen:5,f:null,m:"jaouja",c:[]},
"ichata_ha":{id:"ichata_ha",n:"Ichata Halimine",a:null,g:"F",gen:5,f:null,m:"jaouja",c:[]},
"arhamatou_d":{id:"arhamatou_d",n:"Arhamatou Dally",a:null,g:"F",gen:5,f:null,m:"dally",c:[]},
"hancha":{id:"hancha",n:"Hancha Dally",a:null,g:"F",gen:5,f:null,m:"dally",c:[]},
"idrissa_da":{id:"idrissa_da",n:"Idrissa Dally",a:null,g:"M",gen:5,f:null,m:"dally",c:[]},
"abdoulaye_d":{id:"abdoulaye_d",n:"Abdoulaye Dally",a:null,g:"M",gen:5,f:null,m:"dally",c:[]},
"mouna_d":{id:"mouna_d",n:"Mouna Dally",a:null,g:"F",gen:5,f:null,m:"dally",c:[]},
"bouba_d":{id:"bouba_d",n:"Bouba Dally",a:null,g:"M",gen:5,f:null,m:"dally",c:[]},
"souma":{id:"souma",n:"Souma Dally",a:null,g:"F",gen:5,f:null,m:"dally",c:[]},
"koddo_d":{id:"koddo_d",n:"Koddo Dally",a:null,g:"F",gen:5,f:null,m:"dally",c:[]}
};

let currentPerson = 'ali';
let history = [];

// Navigation pages
function showPage(pageId, btn) {
  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
  document.getElementById(pageId).classList.add('active');
  document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
  btn.classList.add('active');
}

// Couleurs par g√©n√©ration
const genColors = {
  1: '#f59e0b',
  2: '#10b981', 
  3: '#6366f1',
  4: '#ec4899',
  5: '#8b5cf6'
};

// Afficher une personne avec animation
function showPerson(id) {
  const p = D[id];
  if (!p) return;
  
  const view = document.getElementById('personView');
  const genColor = genColors[p.gen] || '#6366f1';
  
  // Animation de sortie
  view.classList.add('changing');
  
  // Flash de couleur en haut
  const flash = document.createElement('div');
  flash.className = 'click-flash';
  flash.style.background = `linear-gradient(90deg, ${genColor}, transparent)`;
  document.body.appendChild(flash);
  setTimeout(() => flash.remove(), 500);
  
  setTimeout(() => {
    if (currentPerson !== id) {
      history.push(currentPerson);
    }
    currentPerson = id;
    document.getElementById('rootSelect').value = id;
    
    renderBreadcrumb();
    renderPersonView(p);
    
    // Animation d'entr√©e
    view.classList.remove('changing');
    view.classList.add('entering');
    setTimeout(() => view.classList.remove('entering'), 400);
    
    // Scroll en haut
    document.querySelector('#pageFamille .scroll').scrollTo({top: 0, behavior: 'smooth'});
  }, 150);
}

// Fil d'ariane
function renderBreadcrumb() {
  const path = [];
  let cur = currentPerson;
  while (cur && path.length < 5) {
    path.unshift(cur);
    const p = D[cur];
    cur = p.f || p.m;
  }
  
  let html = '';
  if (history.length > 0) {
    html += `<div class="tree-nav-item" onclick="goBack()">
      <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m15 18-6-6 6-6"/></svg>
      Retour
    </div>`;
  }
  
  path.forEach((id, i) => {
    const p = D[id];
    const isLast = i === path.length - 1;
    html += `<div class="tree-nav-item" onclick="showPerson('${id}')" style="${isLast ? 'background:var(--primary);color:white;' : ''}">${p.n.split(' ')[0]}</div>`;
  });
  
  document.getElementById('breadcrumb').innerHTML = html;
}

function goBack() {
  if (history.length > 0) {
    currentPerson = history.pop();
    document.getElementById('rootSelect').value = currentPerson;
    renderBreadcrumb();
    renderPersonView(D[currentPerson]);
  }
}

// Vue personne
function renderPersonView(p) {
  const kids = (p.c || []).filter(c => D[c]);
  const father = p.f && D[p.f] ? D[p.f] : null;
  const mother = p.m ? (typeof p.m === 'string' && D[p.m] ? D[p.m] : null) : null;
  const motherName = typeof p.m === 'string' && !D[p.m] ? p.m : null;
  const spouses = p.sp || [];
  const genClass = `gen${p.gen}`;
  const genColor = genColors[p.gen];
  const genNames = {1: '1√®re', 2: '2√®me', 3: '3√®me', 4: '4√®me', 5: '5√®me'};
  
  let html = `
    <div class="person-card ${genClass}">
      <div class="gen-badge">G${p.gen}</div>
      <div class="person-avatar ${p.g === 'M' ? 'male' : 'female'}">${p.g === 'M' ? 'üë®' : 'üë©'}</div>
      <div class="person-name">${p.n}</div>
      ${p.a ? `<div class="person-alias">${p.a}</div>` : ''}
      <div class="person-gen">${genNames[p.gen]} g√©n√©ration</div>
    </div>
  `;
  
  // Parents
  if (father || mother || motherName) {
    html += `<div class="section-title">‚¨ÜÔ∏è Parents</div><div class="parent-cards">`;
    if (father) {
      const fGenClass = `gen${father.gen}`;
      html += `
        <div class="parent-card ${fGenClass}" onclick="showPerson('${father.id}')">
          <div class="mini-avatar male">üë®</div>
          <div class="name">${father.n.split(' ')[0]}</div>
          <div class="label">P√®re</div>
          <div class="gen-tag" style="background:${genColors[father.gen]}">G${father.gen}</div>
        </div>
      `;
    }
    if (mother) {
      const mGenClass = `gen${mother.gen}`;
      html += `
        <div class="parent-card ${mGenClass}" onclick="showPerson('${mother.id}')">
          <div class="mini-avatar female">üë©</div>
          <div class="name">${mother.n.split(' ')[0]}</div>
          <div class="label">M√®re</div>
          <div class="gen-tag" style="background:${genColors[mother.gen]}">G${mother.gen}</div>
        </div>
      `;
    } else if (motherName) {
      html += `
        <div class="parent-card static">
          <div class="mini-avatar female">üë©</div>
          <div class="name">${motherName.split(' ')[0]}</div>
          <div class="label">M√®re</div>
        </div>
      `;
    }
    html += `</div>`;
  }
  
  // √âpouse(s) / √âpoux
  if (spouses.length > 0) {
    const spouseLabel = p.g === 'M' ? '√âpouse(s)' : '√âpoux';
    const spouseIcon = p.g === 'M' ? 'üë©' : 'üë®';
    html += `<div class="section-title">üíë ${spouseLabel}</div><div class="spouses-list">`;
    spouses.forEach((sp, idx) => {
      html += `
        <div class="spouse-card">
          <div class="spouse-avatar">${spouseIcon}</div>
          <div class="spouse-info">
            <div class="spouse-name">${sp}</div>
            ${spouses.length > 1 ? `<div class="spouse-num">${idx + 1}${idx === 0 ? '√®re' : '√®me'} √©pouse</div>` : ''}
          </div>
        </div>
      `;
    });
    html += `</div>`;
  }
  
  // Enfants group√©s par m√®re si plusieurs √©pouses
  if (kids.length > 0) {
    if (spouses.length > 1 && p.g === 'M') {
      // Grouper les enfants par m√®re
      const childrenByMother = {};
      kids.forEach(cid => {
        const c = D[cid];
        const motherKey = c.m || 'M√®re inconnue';
        if (!childrenByMother[motherKey]) childrenByMother[motherKey] = [];
        childrenByMother[motherKey].push(c);
      });
      
      html += `<div class="section-title">‚¨áÔ∏è Enfants (${kids.length})</div>`;
      
      for (const [motherKey, children] of Object.entries(childrenByMother)) {
        html += `<div class="children-mother-group">
          <div class="mother-label">üë© ${motherKey}</div>
          <div class="children-grid">`;
        children.forEach(c => {
          const cGenClass = `gen${c.gen}`;
          const grandKids = (c.c || []).filter(gc => D[gc]).length;
          html += `
            <div class="child-card ${cGenClass}" onclick="showPerson('${c.id}')">
              <div class="mini-avatar ${c.g === 'M' ? 'male' : 'female'}">${c.g === 'M' ? 'üë®' : 'üë©'}</div>
              <div class="name">${c.n.split(' ')[0]}</div>
              <span class="gen-tag" style="background:${genColors[c.gen]}">G${c.gen}</span>
              ${grandKids > 0 ? `<div class="badge">${grandKids} üë∂</div>` : ''}
            </div>
          `;
        });
        html += `</div></div>`;
      }
    } else {
      // Affichage simple
      html += `<div class="section-title">‚¨áÔ∏è Enfants (${kids.length})</div><div class="children-grid">`;
      kids.forEach(cid => {
        const c = D[cid];
        const cGenClass = `gen${c.gen}`;
        const grandKids = (c.c || []).filter(gc => D[gc]).length;
        html += `
          <div class="child-card ${cGenClass}" onclick="showPerson('${cid}')">
            <div class="mini-avatar ${c.g === 'M' ? 'male' : 'female'}">${c.g === 'M' ? 'üë®' : 'üë©'}</div>
            <div class="name">${c.n.split(' ')[0]}</div>
            <span class="gen-tag" style="background:${genColors[c.gen]}">G${c.gen}</span>
            ${grandKids > 0 ? `<div class="badge">${grandKids} üë∂</div>` : ''}
          </div>
        `;
      });
      html += `</div>`;
    }
  } else if (p.c && p.c.length === 0) {
    html += `<div class="section-title">Enfants</div><div class="no-data">Pas d'enfants enregistr√©s</div>`;
  }
  
  // L√©gende des g√©n√©rations
  html += `
    <div class="gen-legend">
      <div class="gen-legend-item"><div class="gen-legend-dot" style="background:var(--gen1)"></div>G1</div>
      <div class="gen-legend-item"><div class="gen-legend-dot" style="background:var(--gen2)"></div>G2</div>
      <div class="gen-legend-item"><div class="gen-legend-dot" style="background:var(--gen3)"></div>G3</div>
      <div class="gen-legend-item"><div class="gen-legend-dot" style="background:var(--gen4)"></div>G4</div>
      <div class="gen-legend-item"><div class="gen-legend-dot" style="background:var(--gen5)"></div>G5</div>
    </div>
  `;
  
  document.getElementById('personView').innerHTML = html;
}

// Changement racine
function changeRoot() {
  const id = document.getElementById('rootSelect').value;
  if (id && D[id]) {
    history = [];
    showPerson(id);
  }
}

// Recherche
function renderSearch() {
  const list = Object.values(D).sort((a, b) => a.n.localeCompare(b.n, 'fr'));
  let html = '';
  list.forEach(p => {
    html += `
      <div class="person-item" onclick="goToPerson('${p.id}')">
        <div class="avatar ${p.g === 'M' ? 'male' : 'female'}">${p.g === 'M' ? 'üë®' : 'üë©'}</div>
        <div class="info">
          <div class="name">${p.n}</div>
          <div class="details">G√©n√©ration ${p.gen}${p.a ? ' ‚Ä¢ ' + p.a : ''}</div>
        </div>
        <svg class="arrow" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m9 18 6-6-6-6"/></svg>
      </div>
    `;
  });
  document.getElementById('personList').innerHTML = html;
}

function filterSearch() {
  const q = document.getElementById('searchInput').value.toLowerCase();
  document.querySelectorAll('#personList .person-item').forEach(el => {
    el.style.display = el.textContent.toLowerCase().includes(q) ? '' : 'none';
  });
}

function goToPerson(id) {
  history = [];
  showPerson(id);
  showPage('pageFamille', document.querySelector('.nav-item'));
}

// Parent√©
function initSelects() {
  const list = Object.values(D).sort((a, b) => a.n.localeCompare(b.n, 'fr'));
  const roots = ['alkamahamane', 'ali', 'mahamane', 'babachigaw', 'kobbo', 'moussa', 'omorou', 'tamimoune', 'mahadi'];
  
  // Root select
  const rootSel = document.getElementById('rootSelect');
  roots.forEach(id => {
    if (D[id]) {
      const o = document.createElement('option');
      o.value = id;
      o.textContent = D[id].n + (D[id].a ? ' (' + D[id].a + ')' : '');
      o.selected = id === 'ali';
      rootSel.appendChild(o);
    }
  });
  
  // Relation selects
  ['person1', 'person2'].forEach(sid => {
    const sel = document.getElementById(sid);
    list.forEach(p => {
      const o = document.createElement('option');
      o.value = p.id;
      o.textContent = p.n + (p.a ? ' (' + p.a + ')' : '');
      sel.appendChild(o);
    });
  });
}

// Algorithme parent√©
function getPaths(id, visited = new Set()) {
  const paths = [];
  const p = D[id];
  if (!p || visited.has(id)) return [[p]];
  visited.add(id);
  if (p.f && D[p.f]) getPaths(p.f, new Set(visited)).forEach(x => paths.push([p, ...x]));
  if (p.m && D[p.m]) getPaths(p.m, new Set(visited)).forEach(x => paths.push([p, ...x]));
  if (!paths.length) paths.push([p]);
  return paths;
}

function findAncestor(id1, id2) {
  const p1 = getPaths(id1), p2 = getPaths(id2);
  let best = null, min = Infinity;
  for (const a of p1) for (const b of p2) for (let i = 0; i < a.length; i++) {
    const j = b.findIndex(x => x.id === a[i].id);
    if (j !== -1 && i + j < min) {
      min = i + j;
      best = { anc: a[i], path1: a.slice(0, i + 1), path2: b.slice(0, j + 1), d1: i, d2: j };
      break;
    }
  }
  return best;
}

function getRelationType(d1, d2, p1, p2) {
  if (d1 === 0 && d2 === 0) return "M√™me personne";
  if (d1 === 1 && d2 === 1) return p1.g === p2.g ? (p1.g === 'M' ? "Fr√®res" : "S≈ìurs") : "Fr√®re et s≈ìur";
  if (d1 === 0) return d2 === 1 ? (p1.g === 'M' ? "P√®re" : "M√®re") : d2 === 2 ? (p1.g === 'M' ? "Grand-p√®re" : "Grand-m√®re") : "Anc√™tre";
  if (d2 === 0) return d1 === 1 ? (p1.g === 'M' ? "Fils" : "Fille") : d1 === 2 ? (p1.g === 'M' ? "Petit-fils" : "Petite-fille") : "Descendant";
  if ((d1 === 1 && d2 === 2) || (d1 === 2 && d2 === 1)) return d1 === 1 ? (p1.g === 'M' ? "Oncle" : "Tante") : (p1.g === 'M' ? "Neveu" : "Ni√®ce");
  if (d1 === 2 && d2 === 2) return "Cousins germains";
  return "Parents √©loign√©s";
}

function findRelation() {
  const id1 = document.getElementById('person1').value;
  const id2 = document.getElementById('person2').value;
  const container = document.getElementById('relationResult');
  
  if (!id1 || !id2) {
    container.innerHTML = '<div class="empty"><div class="empty-icon">üëÜ</div><div class="empty-text">S√©lectionnez deux personnes</div></div>';
    return;
  }
  
  if (id1 === id2) {
    container.innerHTML = '<div class="relation-result"><div class="relation-badge">M√™me personne!</div></div>';
    return;
  }
  
  const r = findAncestor(id1, id2);
  if (!r) {
    container.innerHTML = '<div class="empty"><div class="empty-icon">‚ùì</div><div class="empty-text">Lien non trouv√©</div></div>';
    return;
  }
  
  const rel = getRelationType(r.d1, r.d2, D[id1], D[id2]);
  let steps = '';
  for (let i = 0; i < r.path1.length - 1; i++) {
    steps += `<div class="relation-step"><div class="dot"></div>${r.path1[i].n} est ${r.path1[i].g === 'M' ? 'fils' : 'fille'} de ${r.path1[i + 1].n}</div>`;
  }
  for (let i = 0; i < r.path2.length - 1; i++) {
    steps += `<div class="relation-step"><div class="dot"></div>${r.path2[i].n} est ${r.path2[i].g === 'M' ? 'fils' : 'fille'} de ${r.path2[i + 1].n}</div>`;
  }
  
  container.innerHTML = `
    <div class="relation-result">
      <div style="color:var(--text-secondary);font-size:13px">${D[id1].n}<br>&<br>${D[id2].n}</div>
      <div class="relation-badge">${rel}</div>
      <div style="color:var(--text-muted);font-size:12px">Anc√™tre commun : ${r.anc.n}</div>
      <div class="relation-detail">${steps}</div>
    </div>
  `;
}

// Stats header
function renderStats() {
  const ps = Object.values(D);
  const males = ps.filter(p => p.g === 'M').length;
  const females = ps.filter(p => p.g === 'F').length;
  
  document.getElementById('maleCount').textContent = males;
  document.getElementById('femaleCount').textContent = females;
}

// Init
document.addEventListener('DOMContentLoaded', () => {
  initSelects();
  showPerson('ali');
  renderSearch();
  renderStats();
});

// ========== FORMULAIRE CONTRIBUER ==========
let childCount = 0;

function addChild() {
  childCount++;
  document.getElementById('noChildren').style.display = 'none';
  
  const childHtml = `
    <div class="child-item" id="child${childCount}">
      <div class="child-item-header">
        <span class="child-number">Enfant ${childCount}</span>
        <button class="remove-child" onclick="removeChild(${childCount})">√ó</button>
      </div>
      <div class="child-fields">
        <div class="child-row">
          <div class="form-group">
            <label>Nom</label>
            <input type="text" id="child${childCount}_nom" placeholder="Nom">
          </div>
          <div class="form-group">
            <label>Pr√©nom</label>
            <input type="text" id="child${childCount}_prenom" placeholder="Pr√©nom">
          </div>
        </div>
        <div class="form-group">
          <label>Genre</label>
          <div class="gender-select">
            <div class="gender-option" onclick="selectGender(${childCount}, 'M', this)">
              <span>üë®</span>
              <small>Homme</small>
            </div>
            <div class="gender-option" onclick="selectGender(${childCount}, 'F', this)">
              <span>üë©</span>
              <small>Femme</small>
            </div>
          </div>
          <input type="hidden" id="child${childCount}_genre" value="">
        </div>
      </div>
    </div>
  `;
  
  document.getElementById('childrenList').insertAdjacentHTML('beforeend', childHtml);
}

function removeChild(num) {
  document.getElementById(`child${num}`).remove();
  // V√©rifier s'il reste des enfants
  if (document.getElementById('childrenList').children.length === 0) {
    document.getElementById('noChildren').style.display = 'block';
  }
}

function selectGender(childNum, gender, el) {
  // Retirer la s√©lection des autres options
  el.parentElement.querySelectorAll('.gender-option').forEach(opt => opt.classList.remove('selected'));
  // Ajouter la s√©lection √† l'option cliqu√©e
  el.classList.add('selected');
  // Mettre √† jour la valeur cach√©e
  document.getElementById(`child${childNum}_genre`).value = gender;
}

function collectFormData() {
  const data = {
    nom: document.getElementById('f_nom').value.trim(),
    prenom: document.getElementById('f_prenom').value.trim(),
    pere: {
      nom: document.getElementById('f_pere_nom').value.trim(),
      prenom: document.getElementById('f_pere_prenom').value.trim()
    },
    mere: {
      nom: document.getElementById('f_mere_nom').value.trim(),
      prenom: document.getElementById('f_mere_prenom').value.trim()
    },
    enfants: []
  };
  
  // Collecter les enfants
  document.querySelectorAll('.child-item').forEach(item => {
    const id = item.id.replace('child', '');
    const enfant = {
      nom: document.getElementById(`child${id}_nom`)?.value.trim() || '',
      prenom: document.getElementById(`child${id}_prenom`)?.value.trim() || '',
      genre: document.getElementById(`child${id}_genre`)?.value || ''
    };
    if (enfant.nom || enfant.prenom) {
      data.enfants.push(enfant);
    }
  });
  
  return data;
}

function formatDataAsText(data) {
  let text = `üå≥ CONTRIBUTION ARBRE FAMILIAL ALY KO√èRA\n`;
  text += `‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n\n`;
  
  text += `üë§ INFORMATIONS PERSONNELLES\n`;
  text += `   Nom: ${data.nom || '(non renseign√©)'}\n`;
  text += `   Pr√©nom: ${data.prenom || '(non renseign√©)'}\n\n`;
  
  text += `üë® P√àRE\n`;
  text += `   Nom: ${data.pere.nom || '(non renseign√©)'}\n`;
  text += `   Pr√©nom: ${data.pere.prenom || '(non renseign√©)'}\n\n`;
  
  text += `üë© M√àRE\n`;
  text += `   Nom: ${data.mere.nom || '(non renseign√©)'}\n`;
  text += `   Pr√©nom: ${data.mere.prenom || '(non renseign√©)'}\n\n`;
  
  if (data.enfants.length > 0) {
    text += `üë∂ ENFANTS (${data.enfants.length})\n`;
    data.enfants.forEach((e, i) => {
      const genre = e.genre === 'M' ? 'üë®' : e.genre === 'F' ? 'üë©' : '?';
      text += `   ${i + 1}. ${e.prenom} ${e.nom} ${genre}\n`;
    });
  } else {
    text += `üë∂ ENFANTS: Aucun\n`;
  }
  
  text += `\n‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ\n`;
  text += `üìÖ Envoy√© le ${new Date().toLocaleDateString('fr-FR')}`;
  
  return text;
}

function showToast(message, type = 'success') {
  // Supprimer toast existant
  const existing = document.querySelector('.toast');
  if (existing) existing.remove();
  
  const toast = document.createElement('div');
  toast.className = `toast ${type}`;
  toast.textContent = message;
  document.body.appendChild(toast);
  
  setTimeout(() => toast.classList.add('show'), 10);
  setTimeout(() => {
    toast.classList.remove('show');
    setTimeout(() => toast.remove(), 300);
  }, 3000);
}

function validateForm(data) {
  if (!data.nom && !data.prenom) {
    showToast('Veuillez renseigner votre nom ou pr√©nom', 'error');
    return false;
  }
  return true;
}

function sendWhatsApp() {
  const data = collectFormData();
  if (!validateForm(data)) return;
  
  const text = formatDataAsText(data);
  const encoded = encodeURIComponent(text);
  
  // Num√©ro WhatsApp pour recevoir les contributions
  const phoneNumber = '33662992985'; // France
  
  let url;
  if (phoneNumber) {
    url = `https://wa.me/${phoneNumber}?text=${encoded}`;
  } else {
    url = `https://wa.me/?text=${encoded}`;
  }
  
  window.open(url, '_blank');
}

function copyData() {
  const data = collectFormData();
  if (!validateForm(data)) return;
  
  const text = formatDataAsText(data);
  
  navigator.clipboard.writeText(text).then(() => {
    showToast('‚úì Texte copi√© ! Collez-le dans un email ou message');
  }).catch(() => {
    // Fallback pour les anciens navigateurs
    const textarea = document.createElement('textarea');
    textarea.value = text;
    document.body.appendChild(textarea);
    textarea.select();
    document.execCommand('copy');
    document.body.removeChild(textarea);
    showToast('‚úì Texte copi√© !');
  });
}

function downloadData() {
  const data = collectFormData();
  if (!validateForm(data)) return;
  
  const text = formatDataAsText(data);
  const blob = new Blob([text], { type: 'text/plain;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  
  const a = document.createElement('a');
  a.href = url;
  a.download = `contribution_${data.prenom || 'famille'}_${data.nom || 'koira'}.txt`;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
  
  showToast('‚úì Fichier t√©l√©charg√© !');
}
</script>
</body>
</html>
