*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
:root{
--bg:#0f0f1a;
--card:#1a1a2e;
--card-hover:#252542;
--surface:#16163a;
--primary:#6366f1;
--primary-light:#818cf8;
--secondary:#ec4899;
--accent:#22d3ee;
--success:#10b981;
--text:#f8fafc;
--text-secondary:#94a3b8;
--text-muted:#64748b;
--male:#3b82f6;
--female:#f472b6;
--border:rgba(255,255,255,0.08);
--shadow:0 4px 24px rgba(0,0,0,0.4);
--radius:16px;
--radius-lg:24px;
--radius-full:9999px;
--gen1:#f59e0b;--gen1-bg:rgba(245,158,11,0.15);
--gen2:#10b981;--gen2-bg:rgba(16,185,129,0.15);
--gen3:#6366f1;--gen3-bg:rgba(99,102,241,0.15);
--gen4:#ec4899;--gen4-bg:rgba(236,72,153,0.15);
--gen5:#8b5cf6;--gen5-bg:rgba(139,92,246,0.15);
--gen6:#14b8a6;--gen6-bg:rgba(20,184,166,0.15);
--gen7:#f97316;--gen7-bg:rgba(249,115,22,0.15);
--gen0:#9333ea;--gen0-bg:rgba(147,51,234,0.15);
}

/* ========== ECRAN DE CONNEXION ========== */
.login-screen{
position:fixed;
inset:0;
background:linear-gradient(135deg,#0f0f1a 0%,#1a1a2e 50%,#16163a 100%);
display:flex;
align-items:center;
justify-content:center;
z-index:9999;
padding:20px;
}
.login-container{
width:100%;
max-width:400px;
animation:loginFadeIn 0.5s ease;
}
@keyframes loginFadeIn{
from{opacity:0;transform:translateY(20px)}
to{opacity:1;transform:translateY(0)}
}
@keyframes loginFadeOut{
from{opacity:1}
to{opacity:0}
}
.login-logo{
text-align:center;
margin-bottom:32px;
}
.login-logo-icon{
width:80px;
height:80px;
background:linear-gradient(135deg,var(--primary),var(--secondary));
border-radius:24px;
display:flex;
align-items:center;
justify-content:center;
font-size:40px;
margin:0 auto 16px;
box-shadow:0 8px 32px rgba(99,102,241,0.3);
}
.login-logo h1{
font-size:24px;
font-weight:700;
margin-bottom:4px;
background:linear-gradient(135deg,var(--text),var(--primary-light));
-webkit-background-clip:text;
-webkit-text-fill-color:transparent;
background-clip:text;
}
.login-logo p{
font-size:14px;
color:var(--text-secondary);
}
.login-box{
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius-lg);
padding:28px 24px;
box-shadow:var(--shadow);
}
.login-title{
display:flex;
align-items:center;
justify-content:center;
gap:8px;
font-size:15px;
font-weight:600;
color:var(--text-secondary);
margin-bottom:24px;
}
.login-title span{font-size:20px}
.login-form{
display:flex;
flex-direction:column;
gap:16px;
}
.login-input-group label{
display:block;
font-size:13px;
font-weight:500;
color:var(--text-secondary);
margin-bottom:8px;
}
.login-input-wrapper{
position:relative;
display:flex;
align-items:center;
}
.login-input-wrapper input{
width:100%;
padding:16px;
padding-right:50px;
background:var(--surface);
border:2px solid var(--border);
border-radius:var(--radius);
color:var(--text);
font-size:16px;
font-family:inherit;
transition:all 0.2s;
}
.login-input-wrapper input:focus{
outline:none;
border-color:var(--primary);
box-shadow:0 0 0 4px rgba(99,102,241,0.2);
}
.login-input-wrapper input::placeholder{color:var(--text-muted)}
.toggle-password{
position:absolute;
right:12px;
background:none;
border:none;
font-size:18px;
cursor:pointer;
opacity:0.6;
transition:opacity 0.2s;
}
.toggle-password:hover{opacity:1}
.remember-me{
display:flex;
align-items:center;
gap:10px;
font-size:14px;
color:var(--text-secondary);
cursor:pointer;
user-select:none;
}
.remember-me input{display:none}
.checkmark{
width:22px;
height:22px;
border:2px solid var(--border);
border-radius:6px;
display:flex;
align-items:center;
justify-content:center;
transition:all 0.2s;
flex-shrink:0;
}
.remember-me input:checked + .checkmark{
background:var(--primary);
border-color:var(--primary);
}
.remember-me input:checked + .checkmark::after{
content:'\2713';
color:white;
font-size:14px;
font-weight:bold;
}
.login-btn{
width:100%;
padding:18px;
background:linear-gradient(135deg,var(--primary),var(--secondary));
border:none;
border-radius:var(--radius);
color:white;
font-size:16px;
font-weight:600;
font-family:inherit;
cursor:pointer;
transition:all 0.2s;
margin-top:8px;
}
.login-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(99,102,241,0.4)}
.login-btn:active{transform:translateY(0)}
.login-error{
text-align:center;
color:#ef4444;
font-size:14px;
min-height:20px;
animation:shake 0.3s ease;
}
@keyframes shake{
0%,100%{transform:translateX(0)}
25%{transform:translateX(-8px)}
75%{transform:translateX(8px)}
}
/* Email autocomplete */
.email-ac-wrap{position:relative;width:100%}
.email-ac-wrap input{
width:100%;
padding:16px;
padding-right:50px;
background:var(--surface);
border:2px solid var(--border);
border-radius:var(--radius);
color:var(--text);
font-size:16px;
font-family:inherit;
transition:all 0.2s;
}
.email-ac-wrap input:focus{
outline:none;
border-color:var(--primary);
box-shadow:0 0 0 4px rgba(99,102,241,0.2);
}
.email-ac-wrap input::placeholder{color:var(--text-muted)}
.email-ac-list{
position:absolute;
top:100%;
left:0;
right:0;
margin-top:4px;
background:var(--card);
border:1px solid var(--border);
border-radius:12px;
list-style:none;
padding:4px 0;
z-index:50;
box-shadow:0 8px 24px rgba(0,0,0,0.4);
overflow:hidden;
}
.email-ac-item{
padding:10px 16px;
font-size:14px;
color:var(--text-secondary);
cursor:pointer;
transition:background 0.15s;
display:flex;
align-items:center;
}
.email-ac-item:hover,
.email-ac-item.active{
background:var(--card-hover);
color:var(--text);
}
.email-ac-local{color:var(--text-muted)}
.email-ac-domain{color:var(--primary-light);font-weight:600}

.login-footer{
text-align:center;
margin-top:24px;
}
.login-footer p{
font-size:13px;
color:var(--text-muted);
}

/* ========== APPLICATION ========== */
html,body{
font-family:'Inter',system-ui,sans-serif;
background:var(--bg);
color:var(--text);
height:100%;
overflow:hidden;
-webkit-font-smoothing:antialiased;
}
#root{height:100%}
.app{
display:flex;
flex-direction:column;
height:100dvh;
max-width:500px;
margin:0 auto;
}

/* Header moderne */
.header{
padding:16px 20px;
padding-top:max(16px,env(safe-area-inset-top));
background:linear-gradient(135deg,#1a1a2e 0%,#16163a 100%);
border-bottom:1px solid var(--border);
}
.header-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:12px}
.logo{display:flex;align-items:center;gap:10px}
.logo-icon{
width:40px;height:40px;
background:linear-gradient(135deg,var(--primary),var(--secondary));
border-radius:12px;
display:flex;align-items:center;justify-content:center;
font-size:20px;
}
.logo-text h1{font-size:18px;font-weight:700;letter-spacing:-0.5px}
.logo-text span{font-size:11px;color:var(--text-secondary);font-weight:500}
.logout-btn{
background:rgba(239,68,68,0.15);
border:none;
width:40px;
height:40px;
border-radius:12px;
display:flex;
align-items:center;
justify-content:center;
cursor:pointer;
transition:all 0.2s;
}
.logout-btn svg{width:20px;height:20px;color:#ef4444}
.logout-btn:active{background:rgba(239,68,68,0.3);transform:scale(0.95)}
.header-stats{
display:flex;gap:16px;
background:var(--surface);
padding:12px 16px;
border-radius:var(--radius);
}
.header-stat{text-align:center;flex:1}
.header-stat-value{font-size:20px;font-weight:700;color:var(--primary-light)}
.header-stat-label{font-size:10px;color:var(--text-muted);text-transform:uppercase;letter-spacing:0.5px}

/* Contenu principal */
main{flex:1;overflow:hidden;position:relative}
.page{
display:none;
height:100%;
flex-direction:column;
}
.page.active{display:flex}
.admin-page{display:flex;height:100%;flex-direction:column}

/* Animation de transition pour la vue personne */
.person-view-container{
transition:all 0.3s ease;
}
.person-view-container.changing{
opacity:0;
transform:translateX(30px);
}
.person-view-container.entering{
animation:slideIn 0.4s ease forwards;
}
@keyframes slideIn{
from{opacity:0;transform:translateX(-30px)}
to{opacity:1;transform:translateX(0)}
}

/* Flash de couleur pour confirmer le clic */
.click-flash{
position:fixed;
top:0;left:0;right:0;
height:4px;
z-index:1000;
animation:flashBar 0.5s ease;
}
@keyframes flashBar{
0%{transform:scaleX(0);transform-origin:left}
50%{transform:scaleX(1)}
100%{transform:scaleX(0);transform-origin:right}
}

/* Scroll container */
.scroll{
flex:1;
overflow-y:auto;
-webkit-overflow-scrolling:touch;
padding:16px 20px;
padding-bottom:100px;
}
.scroll::-webkit-scrollbar{display:none}
.scroll:focus{outline:none}
.scroll:focus-visible{outline:2px solid var(--primary);outline-offset:-2px}

/* Navigation bottom moderne */
.nav{
position:fixed;
bottom:0;
left:50%;
transform:translateX(-50%);
width:100%;
max-width:500px;
padding:12px 20px;
padding-bottom:max(12px,env(safe-area-inset-bottom));
background:rgba(15,15,26,0.95);
backdrop-filter:blur(20px);
-webkit-backdrop-filter:blur(20px);
border-top:1px solid var(--border);
display:flex;
justify-content:space-around;
z-index:100;
}
.nav-item{
display:flex;
flex-direction:column;
align-items:center;
gap:4px;
padding:8px 16px;
border-radius:var(--radius);
color:var(--text-muted);
font-size:10px;
font-weight:500;
transition:all 0.2s ease;
cursor:pointer;
border:none;
background:none;
text-decoration:none;
}
.nav-item.active{color:var(--primary-light);background:rgba(99,102,241,0.15)}
.nav-item svg{width:24px;height:24px}

/* === PAGE FAMILLE (Arbre simplifie) === */
.person-card{
background:linear-gradient(145deg,var(--card),var(--surface));
border-radius:var(--radius-lg);
padding:24px;
text-align:center;
border:2px solid var(--border);
box-shadow:var(--shadow);
margin-bottom:20px;
position:relative;
overflow:hidden;
transition:all 0.3s ease;
}
.person-card::before{
content:'';
position:absolute;
top:0;left:0;right:0;
height:6px;
}
.person-card.gen1::before{background:linear-gradient(90deg,var(--gen1),#fbbf24)}
.person-card.gen2::before{background:linear-gradient(90deg,var(--gen2),#34d399)}
.person-card.gen3::before{background:linear-gradient(90deg,var(--gen3),#818cf8)}
.person-card.gen4::before{background:linear-gradient(90deg,var(--gen4),#f472b6)}
.person-card.gen5::before{background:linear-gradient(90deg,var(--gen5),#a78bfa)}
.person-card.gen6::before{background:linear-gradient(90deg,var(--gen6),#2dd4bf)}
.person-card.gen7::before{background:linear-gradient(90deg,var(--gen7),#fb923c)}
.person-card.gen0::before{background:linear-gradient(90deg,var(--gen0),#a855f7)}

/* Badge generation flottant */
.gen-badge{
position:absolute;
top:16px;right:16px;
padding:6px 14px;
border-radius:var(--radius-full);
font-size:12px;
font-weight:700;
color:white;
}
.gen1 .gen-badge{background:var(--gen1)}
.gen2 .gen-badge{background:var(--gen2)}
.gen3 .gen-badge{background:var(--gen3)}
.gen4 .gen-badge{background:var(--gen4)}
.gen5 .gen-badge{background:var(--gen5)}
.gen6 .gen-badge{background:var(--gen6)}
.gen7 .gen-badge{background:var(--gen7)}
.gen0 .gen-badge{background:var(--gen0)}
.person-avatar{
width:80px;height:80px;
border-radius:50%;
margin:0 auto 16px;
display:flex;align-items:center;justify-content:center;
font-size:36px;
position:relative;
}
.person-avatar.male{background:linear-gradient(135deg,#1e3a5f,#3b82f6)}
.person-avatar.female{background:linear-gradient(135deg,#5f1e4a,#ec4899)}
.person-avatar::after{
content:'';
position:absolute;
inset:-4px;
border-radius:50%;
border:3px solid;
opacity:0.8;
animation:pulseRing 2s ease infinite;
}
.gen1 .person-avatar::after{border-color:var(--gen1)}
.gen2 .person-avatar::after{border-color:var(--gen2)}
.gen3 .person-avatar::after{border-color:var(--gen3)}
.gen4 .person-avatar::after{border-color:var(--gen4)}
.gen5 .person-avatar::after{border-color:var(--gen5)}
.gen6 .person-avatar::after{border-color:var(--gen6)}
.gen7 .person-avatar::after{border-color:var(--gen7)}
.gen0 .person-avatar::after{border-color:var(--gen0)}
@keyframes pulseRing{
0%,100%{transform:scale(1);opacity:0.8}
50%{transform:scale(1.05);opacity:0.5}
}
.person-name{font-size:22px;font-weight:700;margin-bottom:4px}
.person-name .alias-inline{font-weight:500;color:var(--primary);font-size:18px}
.person-gen{font-size:13px;color:var(--text-secondary);margin-top:12px}
.person-note{
background:var(--surface);
border:1px solid var(--border);
border-radius:var(--radius);
padding:10px 14px;
margin-top:12px;
font-size:13px;
font-style:italic;
color:var(--text-secondary);
line-height:1.5;
}

/* Parents section */
.section-title{
font-size:12px;
font-weight:600;
color:var(--text-muted);
text-transform:uppercase;
letter-spacing:1px;
margin:24px 0 12px;
display:flex;
align-items:center;
gap:8px;
}
.section-title::before{
content:'';
flex:1;
height:1px;
background:var(--border);
}
.section-title::after{
content:'';
flex:1;
height:1px;
background:var(--border);
}

.parent-cards{display:flex;gap:12px;margin-bottom:8px}
.parent-card{
flex:1;
background:var(--card);
border:2px solid var(--border);
border-radius:var(--radius);
padding:16px;
text-align:center;
cursor:pointer;
transition:all 0.2s ease;
position:relative;
overflow:hidden;
}
.parent-card::before{
content:'';
position:absolute;
top:0;left:0;right:0;
height:3px;
}
.parent-card.gen1::before{background:var(--gen1)}
.parent-card.gen2::before{background:var(--gen2)}
.parent-card.gen3::before{background:var(--gen3)}
.parent-card.gen4::before{background:var(--gen4)}
.parent-card.gen5::before{background:var(--gen5)}
.parent-card.gen6::before{background:var(--gen6)}
.parent-card.gen7::before{background:var(--gen7)}
.parent-card.gen0::before{background:var(--gen0)}
.parent-card:active{transform:scale(0.96);background:var(--card-hover)}
.parent-card .mini-avatar{
width:44px;height:44px;
border-radius:50%;
margin:0 auto 8px;
display:flex;align-items:center;justify-content:center;
font-size:20px;
}
.parent-card .mini-avatar.male{background:rgba(59,130,246,0.2)}
.parent-card .mini-avatar.female{background:rgba(236,72,153,0.2)}
.parent-card .name{font-size:14px;font-weight:600}
.parent-card .label{font-size:11px;color:var(--text-muted);margin-top:2px}
.parent-card .gen-tag{
display:inline-block;
padding:2px 8px;
border-radius:10px;
font-size:9px;
font-weight:600;
color:white;
margin-top:6px;
}

/* Children grid */
.children-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.child-card{
background:var(--card);
border:2px solid var(--border);
border-radius:var(--radius);
padding:14px 8px;
text-align:center;
cursor:pointer;
transition:all 0.2s ease;
position:relative;
overflow:hidden;
}
.child-card::before{
content:'';
position:absolute;
top:0;left:0;right:0;
height:3px;
}
.child-card.gen1::before{background:var(--gen1)}
.child-card.gen2::before{background:var(--gen2)}
.child-card.gen3::before{background:var(--gen3)}
.child-card.gen4::before{background:var(--gen4)}
.child-card.gen5::before{background:var(--gen5)}
.child-card.gen6::before{background:var(--gen6)}
.child-card.gen7::before{background:var(--gen7)}
.child-card.gen0::before{background:var(--gen0)}
.child-card:active{transform:scale(0.94);background:var(--card-hover)}
.child-card .mini-avatar{
width:40px;height:40px;
border-radius:50%;
margin:0 auto 8px;
display:flex;align-items:center;justify-content:center;
font-size:18px;
}
.child-card .mini-avatar.male{background:rgba(59,130,246,0.2)}
.child-card .mini-avatar.female{background:rgba(236,72,153,0.2)}
.child-card .name{font-size:12px;font-weight:600;line-height:1.3}
.child-card .gen-tag{
display:inline-block;
padding:2px 8px;
border-radius:10px;
font-size:9px;
font-weight:600;
color:white;
margin-top:4px;
}
.child-card .badge{
display:block;
background:var(--card-hover);
color:var(--text-secondary);
font-size:10px;
padding:4px 8px;
border-radius:10px;
margin-top:6px;
}
/* Legende generations */
.gen-legend{
display:flex;
justify-content:center;
gap:8px;
margin-top:24px;
padding:16px;
background:var(--surface);
border-radius:var(--radius);
flex-wrap:wrap;
}
.gen-legend-item{
display:flex;
align-items:center;
gap:6px;
font-size:11px;
color:var(--text-secondary);
}
.gen-legend-dot{
width:12px;height:12px;
border-radius:50%;
}

/* Parent card statique (sans lien) */
.parent-card.static{
cursor:default;
opacity:0.8;
}
.parent-card.static:active{
transform:none;
background:var(--card);
}

/* Famille elargie */
.extended-family-note{
font-size:12px;
color:var(--text-muted);
text-align:center;
margin-bottom:12px;
font-style:italic;
}
.parent-card.extended{
background:linear-gradient(135deg,rgba(20,184,166,0.15),rgba(6,182,212,0.15));
border:2px solid rgba(20,184,166,0.4);
}
.parent-card.extended::before{
background:linear-gradient(135deg,#14b8a6,#06b6d4);
}
.extended-badge{
font-size:10px;
color:#14b8a6;
margin-top:4px;
font-weight:600;
}

/* Epouses */
.spouses-list{
display:flex;
flex-direction:column;
gap:10px;
margin-bottom:8px;
}
.spouse-card{
position:relative;
display:flex;
align-items:center;
gap:14px;
background:linear-gradient(135deg,rgba(236,72,153,0.15),rgba(139,92,246,0.15));
border:1px solid rgba(236,72,153,0.3);
border-radius:var(--radius);
padding:14px 16px;
}
.spouse-card.clickable{
cursor:pointer;
transition:all 0.2s;
}
.spouse-card.clickable:active{
transform:scale(0.98);
background:linear-gradient(135deg,rgba(236,72,153,0.25),rgba(139,92,246,0.25));
}
.spouse-link{
font-size:11px;
color:var(--primary);
margin-top:4px;
font-weight:500;
}
.spouse-avatar{
width:44px;height:44px;
background:linear-gradient(135deg,#ec4899,#8b5cf6);
border-radius:50%;
display:flex;
align-items:center;
justify-content:center;
font-size:20px;
flex-shrink:0;
}
.spouse-info{
flex:1;
}
.spouse-name{
font-size:15px;
font-weight:600;
color:var(--text);
}
.spouse-num{
font-size:11px;
color:var(--text-muted);
margin-top:2px;
}

/* Groupes d'enfants par mere */
.children-mother-group{
margin-bottom:16px;
}
.mother-label{
display:inline-flex;
align-items:center;
gap:6px;
background:rgba(236,72,153,0.15);
border:1px solid rgba(236,72,153,0.3);
padding:8px 14px;
border-radius:var(--radius-full);
font-size:12px;
font-weight:500;
color:var(--text);
margin-bottom:10px;
}

/* Navigation dans l'arbre */
.tree-nav{
display:flex;
gap:8px;
margin-bottom:16px;
overflow-x:auto;
padding-bottom:4px;
}
.tree-nav::-webkit-scrollbar{display:none}
.tree-nav-item{
display:flex;
align-items:center;
gap:6px;
padding:10px 16px;
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius-full);
font-size:13px;
font-weight:500;
white-space:nowrap;
cursor:pointer;
transition:all 0.2s;
flex-shrink:0;
}
.tree-nav-item:active{background:var(--primary);border-color:var(--primary)}
.tree-nav-item svg{width:16px;height:16px}

/* Racine selector */
/* ========== RECHERCHE MEMBRE (autocomplete) ========== */
.member-search{
position:relative;
margin-bottom:16px;
z-index:50;
}
.member-search-input-wrap{
display:flex;
align-items:center;
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius);
padding:0 14px;
gap:10px;
transition:border-color 0.2s;
}
.member-search-input-wrap:focus-within{
border-color:var(--primary);
box-shadow:0 0 0 3px rgba(99,102,241,0.15);
}
.member-search-icon{
font-size:16px;
flex-shrink:0;
opacity:0.6;
}
.member-search-input{
flex:1;
background:transparent;
border:none;
outline:none;
color:var(--text);
font-size:15px;
font-family:inherit;
padding:14px 0;
min-width:0;
}
.member-search-input::placeholder{
color:var(--text-muted);
}
.member-search-clear{
background:none;
border:none;
color:var(--text-muted);
font-size:22px;
cursor:pointer;
padding:0 2px;
line-height:1;
flex-shrink:0;
}
.member-search-clear:hover{
color:var(--text);
}
.member-search-dropdown{
position:absolute;
top:calc(100% + 4px);
left:0;
right:0;
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius);
max-height:320px;
overflow-y:auto;
box-shadow:var(--shadow);
animation:searchDropIn 0.15s ease;
z-index:50;
}
@keyframes searchDropIn{
from{opacity:0;transform:translateY(-6px)}
to{opacity:1;transform:translateY(0)}
}
.member-search-item{
display:flex;
align-items:center;
gap:10px;
padding:10px 14px;
cursor:pointer;
transition:background 0.15s;
border-bottom:1px solid var(--border);
}
.member-search-item:last-child{
border-bottom:none;
}
.member-search-item:hover,
.member-search-item.active{
background:var(--card-hover);
}
.member-search-item.active{
border-left:3px solid var(--primary);
}
.member-search-gen{
font-size:11px;
font-weight:700;
color:#fff;
padding:2px 6px;
border-radius:6px;
flex-shrink:0;
min-width:28px;
text-align:center;
}
.member-search-name{
flex:1;
font-size:14px;
color:var(--text);
white-space:nowrap;
overflow:hidden;
text-overflow:ellipsis;
min-width:0;
}
.member-search-alias{
color:var(--text-muted);
font-size:13px;
}
.member-search-gender{
font-size:14px;
flex-shrink:0;
opacity:0.5;
}
.member-search-empty,
.member-search-hint{
padding:14px;
text-align:center;
color:var(--text-muted);
font-size:13px;
}

/* === PAGE RECHERCHE === */
.search-box{
position:relative;
margin-bottom:16px;
}
.search-input{
width:100%;
padding:16px 16px 16px 48px;
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius);
color:var(--text);
font-size:16px;
font-family:inherit;
transition:all 0.2s;
}
.search-input:focus{outline:none;border-color:var(--primary);box-shadow:0 0 0 3px rgba(99,102,241,0.2)}
.search-input::placeholder{color:var(--text-muted)}
.search-icon{
position:absolute;
left:16px;
top:50%;
transform:translateY(-50%);
color:var(--text-muted);
}

.person-list{display:flex;flex-direction:column;gap:8px}
.person-item{
display:flex;
align-items:center;
gap:14px;
padding:14px 16px;
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius);
cursor:pointer;
transition:all 0.2s;
}
.person-item:active{background:var(--card-hover);transform:scale(0.99)}
.person-item .avatar{
width:48px;height:48px;
border-radius:50%;
display:flex;align-items:center;justify-content:center;
font-size:22px;
flex-shrink:0;
}
.person-item .avatar.male{background:linear-gradient(135deg,#1e3a5f,#3b82f6)}
.person-item .avatar.female{background:linear-gradient(135deg,#5f1e4a,#ec4899)}
.person-item .info{flex:1;min-width:0}
.person-item .info .name{font-size:15px;font-weight:600;margin-bottom:2px}
.person-item .info .details{font-size:12px;color:var(--text-secondary)}
.person-item .arrow{color:var(--text-muted)}

/* === PAGE PARENTE === */
.page-title{
font-size:20px;
font-weight:700;
margin-bottom:8px;
}
.page-subtitle{
font-size:14px;
color:var(--text-secondary);
margin-bottom:24px;
line-height:1.5;
}
.parente-form{
display:flex;
flex-direction:column;
gap:16px;
}
.parente-select-group label{
display:block;
font-size:13px;
font-weight:500;
color:var(--text-secondary);
margin-bottom:8px;
}
.parente-select{
width:100%;
padding:16px;
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius);
color:var(--text);
font-size:15px;
font-family:inherit;
-webkit-appearance:none;
background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%2394a3b8' stroke-width='2'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
background-repeat:no-repeat;
background-position:right 12px center;
}
.parente-vs{
text-align:center;
font-size:24px;
}
.parente-btn{
width:100%;
padding:18px;
background:linear-gradient(135deg,var(--primary),var(--secondary));
border:none;
border-radius:var(--radius);
color:white;
font-size:16px;
font-weight:600;
font-family:inherit;
cursor:pointer;
transition:all 0.2s;
margin-top:8px;
}
.parente-btn:active{transform:scale(0.98);opacity:0.9}

.relation-result{
margin-top:24px;
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius-lg);
padding:24px;
text-align:center;
}
.relation-badge{
display:inline-block;
background:linear-gradient(135deg,var(--primary),var(--secondary));
color:white;
padding:12px 28px;
border-radius:var(--radius-full);
font-size:20px;
font-weight:700;
margin:16px 0;
}
.relation-detail{
background:var(--surface);
border-radius:var(--radius);
padding:16px;
margin-top:16px;
text-align:left;
}
.relation-step{
padding:10px 0;
font-size:13px;
color:var(--text-secondary);
border-bottom:1px solid var(--border);
display:flex;
align-items:center;
gap:10px;
}
.relation-step:last-child{border:none}
.relation-step .dot{
width:8px;height:8px;
background:var(--primary);
border-radius:50%;
flex-shrink:0;
}

/* Empty state */
.empty{
text-align:center;
padding:48px 24px;
color:var(--text-muted);
}
.empty-icon{font-size:48px;margin-bottom:16px;opacity:0.5}
.empty-text{font-size:14px}

/* === FORMULAIRE CONTRIBUER === */
.form-intro{
text-align:center;
padding:24px 16px;
margin-bottom:16px;
}
.form-intro-icon{font-size:48px;margin-bottom:12px}
.form-intro h2{font-size:22px;font-weight:700;margin-bottom:8px}
.form-intro p{font-size:14px;color:var(--text-secondary);line-height:1.5}

.form-section{
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius-lg);
padding:20px;
margin-bottom:16px;
}
.form-section-title{
font-size:14px;
font-weight:600;
margin-bottom:16px;
display:flex;
align-items:center;
justify-content:space-between;
}
.form-group{
margin-bottom:14px;
flex:1;
}
.form-group:last-child{margin-bottom:0}
.form-group label{
display:block;
font-size:12px;
color:var(--text-secondary);
margin-bottom:6px;
font-weight:500;
}
.form-group input, .form-group select, .form-group textarea{
width:100%;
padding:14px 16px;
background:var(--surface);
border:1px solid var(--border);
border-radius:var(--radius);
color:var(--text);
font-size:15px;
font-family:inherit;
transition:all 0.2s;
}
.form-group input:focus, .form-group select:focus, .form-group textarea:focus{
outline:none;
border-color:var(--primary);
box-shadow:0 0 0 3px rgba(99,102,241,0.2);
}
.form-group input::placeholder, .form-group textarea::placeholder{color:var(--text-muted)}
.form-group textarea{resize:vertical;min-height:80px}
.form-row{
display:flex;
gap:12px;
}

.add-child-btn{
background:var(--primary);
color:white;
border:none;
padding:8px 16px;
border-radius:var(--radius-full);
font-size:13px;
font-weight:600;
cursor:pointer;
}
.add-child-btn:active{opacity:0.8}

.no-children{
text-align:center;
padding:24px;
color:var(--text-muted);
}
.no-children p{margin-bottom:12px;font-size:14px}
.add-first-child{
background:var(--surface);
color:var(--text);
border:1px dashed var(--border);
padding:12px 24px;
border-radius:var(--radius);
font-size:14px;
cursor:pointer;
}
.add-first-child:active{background:var(--card-hover)}

.child-item{
background:var(--surface);
border:1px solid var(--border);
border-radius:var(--radius);
padding:16px;
margin-bottom:12px;
position:relative;
}
.child-item-header{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:12px;
}
.child-number{
font-size:13px;
font-weight:600;
color:var(--primary-light);
}
.remove-child{
background:rgba(239,68,68,0.2);
color:#ef4444;
border:none;
width:28px;
height:28px;
border-radius:50%;
font-size:16px;
cursor:pointer;
display:flex;
align-items:center;
justify-content:center;
}
.remove-child:active{background:rgba(239,68,68,0.4)}
.child-fields{
display:flex;
flex-direction:column;
gap:10px;
}
.child-row{
display:flex;
gap:10px;
}
.child-row .form-group{margin-bottom:0}
.gender-select{
display:flex;
gap:8px;
}
.gender-selector{
display:flex;
gap:10px;
margin-top:8px;
}
.gender-selector .gender-option{
flex:1;
padding:14px 12px;
background:var(--card);
border:2px solid var(--border);
border-radius:var(--radius);
text-align:center;
cursor:pointer;
transition:all 0.2s;
font-size:14px;
font-weight:500;
}
.gender-selector .gender-option.selected{
border-color:var(--primary);
background:rgba(99,102,241,0.15);
}
.gender-selector .gender-option:active{transform:scale(0.98)}
.gender-option{
flex:1;
padding:12px;
background:var(--card);
border:2px solid var(--border);
border-radius:var(--radius);
text-align:center;
cursor:pointer;
transition:all 0.2s;
}
.gender-option.selected{
border-color:var(--primary);
background:rgba(99,102,241,0.15);
}
.gender-option:active{transform:scale(0.98)}
.gender-option span{font-size:20px;display:block;margin-bottom:4px}
.gender-option small{font-size:11px;color:var(--text-secondary)}

.form-actions{
display:flex;
flex-direction:column;
gap:10px;
margin:24px 0;
}
.action-btn{
display:flex;
align-items:center;
justify-content:center;
gap:10px;
padding:16px 24px;
border:none;
border-radius:var(--radius);
font-size:15px;
font-weight:600;
font-family:inherit;
cursor:pointer;
transition:all 0.2s;
}
.action-btn:active{transform:scale(0.98)}
.action-btn svg{width:20px;height:20px}
.action-btn.whatsapp{
background:#25D366;
color:white;
}
.action-btn.copy{
background:var(--primary);
color:white;
}
.action-btn.download{
background:var(--card);
color:var(--text);
border:1px solid var(--border);
}

.form-note{
background:var(--surface);
border:1px solid var(--border);
border-radius:var(--radius);
padding:16px;
font-size:13px;
color:var(--text-secondary);
line-height:1.6;
}

/* Toast notification */
.toast{
position:fixed;
bottom:100px;
left:50%;
transform:translateX(-50%) translateY(100px);
background:var(--card);
color:var(--text);
padding:14px 24px;
border-radius:var(--radius-full);
font-size:14px;
font-weight:500;
box-shadow:var(--shadow);
opacity:0;
transition:all 0.3s ease;
z-index:1000;
}
.toast.show{
transform:translateX(-50%) translateY(0);
opacity:1;
}
.toast.success{background:#10b981}
.toast.error{background:#ef4444}

/* Messages */
.no-data{
background:var(--surface);
border-radius:var(--radius);
padding:20px;
text-align:center;
color:var(--text-muted);
font-size:14px;
}

/* Loading */
.loading-screen{
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
height:100%;
gap:16px;
color:var(--text-secondary);
}
.loading-spinner{
width:40px;height:40px;
border:3px solid var(--border);
border-top-color:var(--primary);
border-radius:50%;
animation:spin 0.8s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}

/* ========== LOGIN TABS ========== */
.login-tabs{
display:flex;
gap:0;
margin-bottom:16px;
border-radius:var(--radius);
overflow:hidden;
background:var(--bg);
}
.login-tab{
flex:1;
padding:10px 16px;
border:none;
background:transparent;
color:var(--text-muted);
font-size:14px;
font-weight:500;
cursor:pointer;
transition:all 0.2s;
}
.login-tab.active{
background:var(--primary);
color:white;
}
.login-success{
background:rgba(16,185,129,0.15);
color:#10b981;
padding:12px;
border-radius:var(--radius);
font-size:13px;
margin-top:8px;
text-align:center;
}

/* ========== HEADER USER INFO ========== */
.header-user{
display:flex;
align-items:center;
gap:10px;
}
.header-user-info{
display:flex;
flex-direction:column;
align-items:flex-end;
gap:2px;
}
.header-user-name{
font-size:13px;
color:var(--text);
font-weight:500;
max-width:120px;
overflow:hidden;
text-overflow:ellipsis;
white-space:nowrap;
}
.header-role-badge{
font-size:10px;
font-weight:600;
padding:2px 8px;
border-radius:var(--radius-full);
text-transform:uppercase;
letter-spacing:0.5px;
}
.header-role-badge.admin{
background:rgba(99,102,241,0.2);
color:var(--primary-light);
}
.header-role-badge.user{
background:rgba(16,185,129,0.15);
color:var(--success);
}

/* ========== SUGGESTIONS ========== */
.suggestions-list{
display:flex;
flex-direction:column;
gap:12px;
}
.suggestion-card{
background:var(--card);
border-radius:var(--radius);
padding:16px;
border:1px solid var(--border);
}
.suggestion-header{
display:flex;
align-items:center;
gap:8px;
margin-bottom:8px;
flex-wrap:wrap;
}
.suggestion-status{
font-size:11px;
font-weight:600;
padding:3px 10px;
border-radius:var(--radius-full);
text-transform:uppercase;
}
.status-pending{background:rgba(245,158,11,0.15);color:#f59e0b}
.status-approved{background:rgba(16,185,129,0.15);color:#10b981}
.status-rejected{background:rgba(239,68,68,0.15);color:#ef4444}
.suggestion-type{
font-size:12px;
color:var(--text-secondary);
}
.suggestion-date{
font-size:12px;
color:var(--text-muted);
margin-left:auto;
}
.suggestion-body{
font-size:14px;
color:var(--text);
line-height:1.5;
}
.suggestion-note{
margin-top:8px;
padding:8px 12px;
background:var(--surface);
border-radius:8px;
font-size:13px;
color:var(--text-secondary);
}
.suggestion-actions{
margin-top:12px;
display:flex;
flex-direction:column;
gap:8px;
}
.suggestion-buttons{
display:flex;
gap:8px;
}
.empty-state{
text-align:center;
padding:40px 20px;
color:var(--text-muted);
font-size:14px;
}
.empty-state p + p{
margin-top:8px;
}


/* ========== ADMIN DESIGN SYSTEM ========== */

/* --- Admin variables --- */
.admin-page {
  --adm-serif: var(--sh-serif, 'Playfair Display', Georgia, serif);
  --adm-sans: var(--sh-sans, 'Nunito Sans', system-ui, sans-serif);
  --adm-gold: var(--sh-gold, #D4A853);
  --adm-gold-bg: rgba(212,168,83,.10);
  --adm-gold-bdr: rgba(212,168,83,.20);
  --adm-blue: #7090FF;
  --adm-blue-bg: rgba(112,144,255,.08);
  --adm-blue-bdr: rgba(112,144,255,.16);
  --adm-violet: #CCA0EE;
  --adm-violet-bg: rgba(204,160,238,.08);
  --adm-violet-bdr: rgba(204,160,238,.16);
  --adm-green: #5ACD8A;
  --adm-green-bg: rgba(90,205,138,.07);
  --adm-green-bdr: rgba(90,205,138,.14);
  --adm-terra: #E0845A;
  --adm-terra-bg: rgba(224,132,90,.08);
  --adm-terra-bdr: rgba(224,132,90,.15);
  --adm-red: #F06050;
  --adm-red-bg: rgba(240,96,80,.08);
  --adm-cyan: #48E8D4;
  --adm-card: var(--card, #111830);
  --adm-card-h: var(--surface, #161F38);
  --adm-bg2: var(--surface, #0B0F1E);
  --adm-txt: var(--text, #EAE6DE);
  --adm-t2: var(--text-secondary, #929AB0);
  --adm-t3: var(--text-muted, #4A5068);
  --adm-bdr: var(--border, rgba(255,255,255,.06));
  --adm-input-bg: rgba(255,255,255,.04);
  --adm-shadow: 0 2px 16px rgba(0,0,0,.45);
  --adm-shadow-h: 0 8px 32px rgba(0,0,0,.55);
}

html[data-theme="light"] .admin-page {
  --adm-gold: #A8802A;
  --adm-gold-bg: rgba(168,128,42,.08);
  --adm-gold-bdr: rgba(168,128,42,.18);
  --adm-blue: #2B68AE;
  --adm-blue-bg: rgba(43,104,174,.07);
  --adm-blue-bdr: rgba(43,104,174,.14);
  --adm-violet: #845AA0;
  --adm-violet-bg: rgba(132,90,160,.07);
  --adm-violet-bdr: rgba(132,90,160,.14);
  --adm-green: #2A8048;
  --adm-green-bg: rgba(42,128,72,.06);
  --adm-green-bdr: rgba(42,128,72,.14);
  --adm-terra: #B05838;
  --adm-terra-bg: rgba(176,88,56,.06);
  --adm-terra-bdr: rgba(176,88,56,.14);
  --adm-red: #B8483A;
  --adm-red-bg: rgba(184,72,58,.06);
  --adm-cyan: #18807A;
  --adm-card: #FFFFFF;
  --adm-card-h: #FFFCF5;
  --adm-bg2: #EBE5D8;
  --adm-txt: #2C2416;
  --adm-t2: #6A5E4E;
  --adm-t3: #A09478;
  --adm-bdr: #E0D8CA;
  --adm-input-bg: #F6F2EA;
  --adm-shadow: 0 1px 10px rgba(90,70,30,.06);
  --adm-shadow-h: 0 6px 24px rgba(90,70,30,.12);
}

/* --- Tabs (pill segmented control) --- */
.adm-tabs{
  display:flex;
  gap:2px;
  padding:3px;
  background:var(--adm-bg2);
  border-radius:12px;
  margin-bottom:20px;
}
.adm-tab{
  flex:1;
  padding:8px 12px;
  border:none;
  background:transparent;
  color:var(--adm-t2);
  font-family:var(--adm-sans);
  font-size:13px;
  font-weight:500;
  cursor:pointer;
  border-radius:10px;
  transition:all .2s;
}
.adm-tab:hover{color:var(--adm-txt)}
.adm-tab.active{
  background:var(--adm-card);
  color:var(--adm-gold);
  font-weight:600;
  box-shadow:var(--adm-shadow);
}

/* --- KPIs --- */
.adm-kpis{
  display:flex;
  flex-wrap:wrap;
  gap:8px;
  margin-bottom:16px;
}
.adm-kpi{
  flex:1;
  min-width:0;
  display:flex;
  align-items:center;
  gap:8px;
  padding:10px 14px;
  background:var(--adm-card);
  border:1px solid var(--adm-bdr);
  border-radius:10px;
  font-family:var(--adm-sans);
  font-size:12px;
  color:var(--adm-t2);
}
.adm-kpi strong{font-size:1rem;font-weight:700}
.adm-kpi.gold strong{color:var(--adm-gold)}
.adm-kpi.blue strong{color:var(--adm-blue)}
.adm-kpi.violet strong{color:var(--adm-violet)}
.adm-kpi.green strong{color:var(--adm-green)}
.adm-kpi.terra strong{color:var(--adm-terra)}

/* --- Toolbar --- */
.adm-toolbar{
  display:flex;
  gap:8px;
  align-items:center;
  margin-bottom:12px;
  flex-wrap:wrap;
}
.adm-search{
  flex:1;
  min-width:180px;
  padding:8px 12px 8px 34px;
  border-radius:10px;
  border:1px solid var(--adm-bdr);
  background:var(--adm-input-bg);
  color:var(--adm-txt);
  font-size:13px;
  font-family:var(--adm-sans);
  background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%23929AB0' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cpath d='m21 21-4.3-4.3'/%3E%3C/svg%3E");
  background-repeat:no-repeat;
  background-position:10px center;
  background-size:16px;
}
.adm-search::placeholder{color:var(--adm-t3)}
.adm-search:focus{outline:none;border-color:var(--adm-gold)}

/* --- Pills / Filters --- */
.adm-pills{display:flex;gap:6px;flex-wrap:wrap}
.adm-pill{
  padding:5px 12px;
  border-radius:20px;
  border:1px solid var(--adm-bdr);
  background:var(--adm-card);
  color:var(--adm-t2);
  font-size:12px;
  font-family:var(--adm-sans);
  cursor:pointer;
  transition:all .2s;
}
.adm-pill:hover{border-color:var(--adm-gold-bdr)}
.adm-pill.active{
  background:var(--adm-gold-bg);
  border-color:var(--adm-gold-bdr);
  color:var(--adm-gold);
  font-weight:600;
}

/* --- Row card --- */
.adm-rows{display:flex;flex-direction:column;gap:6px}
.adm-row{
  display:flex;
  align-items:center;
  gap:12px;
  padding:10px 14px;
  background:var(--adm-card);
  border:1px solid var(--adm-bdr);
  border-radius:12px;
  position:relative;
  transition:all .2s;
  box-shadow:var(--adm-shadow);
}
.adm-row::before{
  content:'';
  position:absolute;
  left:0;top:6px;bottom:6px;
  width:3px;
  border-radius:0 3px 3px 0;
  background:var(--adm-t3);
}
.adm-row:hover{
  transform:translateY(-1px);
  box-shadow:var(--adm-shadow-h);
  background:var(--adm-card-h);
}
.adm-row.admin::before{background:var(--adm-gold)}
.adm-row.member::before,.adm-row.user::before{background:var(--adm-blue)}
.adm-row.male::before{background:var(--adm-blue)}
.adm-row.female::before{background:var(--adm-violet)}
.adm-row-info{
  flex:1;
  display:flex;
  flex-direction:column;
  gap:2px;
  overflow:hidden;
}
.adm-row-info strong{
  font-size:14px;
  color:var(--adm-txt);
  font-family:var(--adm-sans);
}
.adm-row-sub{
  font-size:12px;
  color:var(--adm-t3);
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}
.adm-row-alias{
  font-style:italic;
  color:var(--adm-gold);
  font-size:13px;
}
.adm-row-mini{font-size:11px;color:var(--adm-t3)}

/* --- Avatar --- */
.adm-av{
  width:36px;height:36px;
  border-radius:50%;
  display:flex;align-items:center;justify-content:center;
  font-size:13px;font-weight:700;
  font-family:var(--adm-sans);
  flex-shrink:0;
  color:white;
  background:var(--adm-t3);
}
.adm-av.admin{background:var(--adm-gold-bg);color:var(--adm-gold);border:1.5px solid var(--adm-gold-bdr)}
.adm-av.member,.adm-av.user{background:var(--adm-blue-bg);color:var(--adm-blue);border:1.5px solid var(--adm-blue-bdr)}
.adm-av.m{background:var(--adm-blue-bg);color:var(--adm-blue);border:1.5px solid var(--adm-blue-bdr)}
.adm-av.f{background:var(--adm-violet-bg);color:var(--adm-violet);border:1.5px solid var(--adm-violet-bdr)}

/* --- Badge --- */
.adm-badge{
  display:inline-flex;align-items:center;
  padding:2px 10px;border-radius:20px;
  font-size:11px;font-weight:600;
  font-family:var(--adm-sans);
}
.adm-badge.admin{background:var(--adm-gold-bg);color:var(--adm-gold);border:1px solid var(--adm-gold-bdr)}
.adm-badge.member,.adm-badge.user{background:var(--adm-blue-bg);color:var(--adm-blue);border:1px solid var(--adm-blue-bdr)}
.adm-badge.gen{background:var(--adm-terra-bg);color:var(--adm-terra);border:1px solid var(--adm-terra-bdr)}
.adm-badge.green{background:var(--adm-green-bg);color:var(--adm-green);border:1px solid var(--adm-green-bdr)}

/* --- Actions (circle buttons) --- */
.adm-acts{
  display:flex;gap:4px;
  flex-shrink:0;align-items:center;
  position:relative;
}
.adm-acts button{
  width:28px;height:28px;
  border-radius:50%;
  border:1px solid var(--adm-bdr);
  background:transparent;
  color:var(--adm-t2);
  cursor:pointer;
  display:flex;align-items:center;justify-content:center;
  font-size:13px;
  transition:all .2s;
}
.adm-acts button:hover{
  color:var(--adm-gold);
  border-color:var(--adm-gold-bdr);
  background:var(--adm-gold-bg);
}

/* Dropdown menu */
.adm-dropdown{
  position:absolute;
  top:100%;right:0;
  margin-top:4px;
  min-width:140px;
  background:var(--adm-card);
  border:1px solid var(--adm-bdr);
  border-radius:10px;
  box-shadow:var(--adm-shadow-h);
  z-index:50;
  overflow:hidden;
}
.adm-dropdown button{
  width:100%;border:none;border-radius:0;
  padding:8px 14px;font-size:13px;text-align:left;
  background:transparent;color:var(--adm-txt);
  cursor:pointer;transition:background .15s;
}
.adm-dropdown button:hover{background:var(--adm-input-bg)}
.adm-dropdown .danger{color:var(--adm-red)}
.adm-dropdown .danger:hover{background:var(--adm-red-bg)}

/* --- Generation group separator --- */
.adm-ggroup{
  display:flex;align-items:center;gap:12px;
  margin:16px 0 8px;
  font-family:var(--adm-sans);
}
.adm-ggroup::before,.adm-ggroup::after{
  content:'';flex:1;height:1px;
  background:var(--adm-bdr);
}
.adm-ggroup span{font-size:12px;color:var(--adm-t2);white-space:nowrap}
.adm-ggroup strong{color:var(--adm-terra)}

/* --- Pagination --- */
.adm-pagination{
  display:flex;align-items:center;justify-content:center;
  gap:6px;margin-top:16px;
  font-family:var(--adm-sans);
}
.adm-pagination button{
  width:28px;height:28px;
  border-radius:6px;
  border:1px solid var(--adm-bdr);
  background:var(--adm-card);
  color:var(--adm-t2);
  font-size:12px;cursor:pointer;
  transition:all .2s;
}
.adm-pagination button:hover{border-color:var(--adm-gold-bdr)}
.adm-pagination button.active{
  background:var(--adm-gold);color:white;
  border-color:var(--adm-gold);
}
.adm-pagination button:disabled{opacity:.4;cursor:default}
.adm-page-info{font-size:12px;color:var(--adm-t3);margin:0 8px}

/* --- Category header (terms) --- */
.adm-cat-header{
  display:flex;align-items:center;
  width:100%;padding:12px 16px;
  background:var(--adm-card);
  border:1px solid var(--adm-bdr);
  border-radius:12px;
  cursor:pointer;transition:all .2s;
  position:relative;gap:10px;
}
.adm-cat-header::before{
  content:'';position:absolute;
  left:0;top:6px;bottom:6px;
  width:3px;border-radius:0 3px 3px 0;
}
.adm-cat-header.gold::before{background:var(--adm-gold)}
.adm-cat-header.green::before{background:var(--adm-green)}
.adm-cat-header.terra::before{background:var(--adm-terra)}
.adm-cat-header.blue::before{background:var(--adm-blue)}
.adm-cat-header.violet::before{background:var(--adm-violet)}
.adm-cat-header:hover{background:var(--adm-card-h)}
.adm-cat-icon{font-size:16px;width:28px;text-align:center;flex-shrink:0}
.adm-cat-info{flex:1;display:flex;flex-direction:column;gap:1px}
.adm-cat-title{font-family:var(--adm-serif);font-size:15px;font-weight:700}
.adm-cat-title.gold{color:var(--adm-gold)}
.adm-cat-title.green{color:var(--adm-green)}
.adm-cat-title.terra{color:var(--adm-terra)}
.adm-cat-title.blue{color:var(--adm-blue)}
.adm-cat-title.violet{color:var(--adm-violet)}
.adm-cat-sub{font-size:12px;color:var(--adm-t3)}
.adm-cat-count{padding:2px 10px;border-radius:20px;font-size:11px;font-weight:600}
.adm-cat-count.gold{background:var(--adm-gold-bg);color:var(--adm-gold)}
.adm-cat-count.green{background:var(--adm-green-bg);color:var(--adm-green)}
.adm-cat-count.terra{background:var(--adm-terra-bg);color:var(--adm-terra)}
.adm-cat-count.blue{background:var(--adm-blue-bg);color:var(--adm-blue)}
.adm-cat-count.violet{background:var(--adm-violet-bg);color:var(--adm-violet)}
.adm-cat-chevron{font-size:10px;color:var(--adm-t3);transition:transform .2s;flex-shrink:0}
.adm-cat-header.expanded .adm-cat-chevron{transform:rotate(180deg)}
.adm-cat-body{padding:8px 0;display:flex;flex-direction:column;gap:6px}
.adm-cat-desc{font-size:12px;color:var(--adm-t3);font-style:italic;padding:0 16px;margin-bottom:4px}

/* --- Term card --- */
.adm-term{
  display:flex;align-items:center;gap:12px;
  padding:10px 14px;
  background:var(--adm-card);
  border:1px solid var(--adm-bdr);
  border-radius:10px;
  position:relative;transition:all .2s;
}
.adm-term::before{
  content:'';position:absolute;
  left:0;top:6px;bottom:6px;
  width:3px;border-radius:0 3px 3px 0;
}
.adm-term.gold::before{background:var(--adm-gold)}
.adm-term.green::before{background:var(--adm-green)}
.adm-term.terra::before{background:var(--adm-terra)}
.adm-term.blue::before{background:var(--adm-blue)}
.adm-term.violet::before{background:var(--adm-violet)}
.adm-term:hover{background:var(--adm-card-h)}
.adm-term.inactive{opacity:.5}
.adm-term-main{
  flex:1;display:flex;flex-wrap:wrap;
  align-items:baseline;gap:6px 16px;
}
.adm-term-songhoy{font-family:var(--adm-serif);font-size:16px;font-weight:700}
.adm-term-songhoy.gold{color:var(--adm-gold)}
.adm-term-songhoy.green{color:var(--adm-green)}
.adm-term-songhoy.terra{color:var(--adm-terra)}
.adm-term-songhoy.blue{color:var(--adm-blue)}
.adm-term-songhoy.violet{color:var(--adm-violet)}
.adm-term-prononciation{font-size:12px;color:var(--adm-t3);font-style:italic}
.adm-term-fr{font-size:13px;color:var(--adm-t2)}
.adm-term-dir{
  display:inline-flex;align-items:center;gap:4px;
  font-size:11px;color:var(--adm-t3);
  background:var(--adm-input-bg);
  padding:2px 8px;border-radius:6px;
}
.adm-term-dir svg{width:12px;height:12px}
.adm-term-desc{
  width:100%;font-size:12px;color:var(--adm-t3);
  padding-left:10px;
  border-left:2px solid var(--adm-gold-bdr);
  margin-top:4px;
}
.adm-term-context{
  font-size:10px;padding:1px 6px;border-radius:4px;
  background:var(--adm-gold-bg);color:var(--adm-gold);
}

/* --- Confirmation modal --- */
.adm-confirm-overlay{
  position:fixed;inset:0;
  background:rgba(0,0,0,.6);
  display:flex;align-items:center;justify-content:center;
  z-index:9999;padding:20px;
}
.adm-confirm-modal{
  background:var(--adm-card);
  border:1px solid var(--adm-bdr);
  border-radius:16px;padding:24px;
  max-width:380px;width:100%;
  box-shadow:var(--adm-shadow-h);
  font-family:var(--adm-sans);
}
.adm-confirm-modal p{font-size:14px;color:var(--adm-txt);margin-bottom:6px}
.adm-confirm-sub{font-size:12px !important;color:var(--adm-t3) !important;margin-bottom:16px !important}
.adm-confirm-actions{display:flex;gap:8px;justify-content:flex-end}
.adm-confirm-actions button{
  padding:8px 16px;border-radius:8px;
  border:1px solid var(--adm-bdr);
  background:var(--adm-card);color:var(--adm-t2);
  font-size:13px;cursor:pointer;transition:all .2s;
}
.adm-confirm-actions button:hover{background:var(--adm-card-h)}
.adm-confirm-danger{background:var(--adm-red-bg) !important;color:var(--adm-red) !important;border-color:var(--adm-red) !important}
.adm-confirm-danger:hover{background:var(--adm-red) !important;color:white !important}
.adm-confirm-gold{background:var(--adm-gold-bg) !important;color:var(--adm-gold) !important;border-color:var(--adm-gold-bdr) !important}
.adm-confirm-gold:hover{background:var(--adm-gold) !important;color:white !important}

/* --- Compact add button --- */
.adm-btn-add{
  padding:7px 16px;border-radius:10px;
  border:1px solid var(--adm-gold-bdr);
  background:var(--adm-gold-bg);
  color:var(--adm-gold);
  font-size:13px;font-weight:600;
  font-family:var(--adm-sans);
  cursor:pointer;transition:all .2s;
  white-space:nowrap;
}
.adm-btn-add:hover{background:var(--adm-gold);color:white;border-color:var(--adm-gold)}

/* --- Admin section (backward compat for suggestions) --- */
.admin-section{display:flex;flex-direction:column;gap:12px}
.admin-note-input{
  width:100%;padding:8px 12px;
  border-radius:8px;
  border:1px solid var(--border);
  background:var(--surface);
  color:var(--text);font-size:13px;
}
.admin-note-input:focus{outline:none;border-color:var(--primary)}

/* --- Action buttons (suggestions & TermForm) --- */
.btn-approve,.btn-reject{
  padding:6px 12px;border:none;border-radius:8px;
  font-size:12px;font-weight:500;
  cursor:pointer;transition:all 0.2s;
}
.btn-approve{background:rgba(16,185,129,0.2);color:#10b981}
.btn-approve:hover{background:rgba(16,185,129,0.3)}
.btn-reject{background:rgba(239,68,68,0.2);color:#ef4444}
.btn-reject:hover{background:rgba(239,68,68,0.3)}

/* --- Admin responsive â€” desktop scale-up --- */
@media(min-width:1024px){
  .adm-tabs{padding:4px;border-radius:14px;margin-bottom:24px}
  .adm-tab{font-size:14px;padding:10px 18px;border-radius:12px}
  .adm-kpis{gap:12px;margin-bottom:20px}
  .adm-kpi{padding:14px 20px;font-size:14px;border-radius:12px}
  .adm-kpi strong{font-size:1.25rem}
  .adm-toolbar{gap:12px;margin-bottom:16px}
  .adm-search{font-size:14px;padding:10px 14px 10px 38px;border-radius:12px}
  .adm-pill{font-size:13px;padding:7px 18px}
  .adm-rows{gap:8px}
  .adm-row{padding:14px 20px;gap:16px;border-radius:14px}
  .adm-row-info strong{font-size:15px}
  .adm-row-sub{font-size:13px}
  .adm-row-alias{font-size:14px}
  .adm-row-mini{font-size:12px}
  .adm-av{width:42px;height:42px;font-size:15px}
  .adm-badge{font-size:12px;padding:3px 14px}
  .adm-acts button{width:32px;height:32px;font-size:14px}
  .adm-ggroup{margin:20px 0 10px}
  .adm-ggroup span{font-size:13px}
  .adm-pagination button{width:32px;height:32px;font-size:13px}
  .adm-page-info{font-size:13px}
  .adm-btn-add{font-size:14px;padding:9px 22px;border-radius:12px}
  .adm-cat-header{padding:16px 20px;border-radius:14px;gap:14px}
  .adm-cat-icon{font-size:18px;width:32px}
  .adm-cat-title{font-size:17px}
  .adm-cat-sub{font-size:13px}
  .adm-cat-count{font-size:12px;padding:3px 12px}
  .adm-cat-body{gap:8px;padding:10px 0}
  .adm-term{padding:14px 20px;gap:16px;border-radius:12px}
  .adm-term-songhoy{font-size:18px}
  .adm-term-prononciation{font-size:13px}
  .adm-term-fr{font-size:14px}
  .adm-term-dir{font-size:12px;padding:3px 10px}
  .adm-term-desc{font-size:13px}
  .adm-term-context{font-size:11px;padding:2px 8px}
  .adm-confirm-modal{padding:28px;max-width:420px;border-radius:18px}
  .adm-confirm-modal p{font-size:15px}
  .adm-confirm-actions button{font-size:14px;padding:10px 20px}
}

/* --- Admin responsive â€” mobile scale-down --- */
@media(max-width:640px){
  .adm-toolbar{flex-direction:column;align-items:stretch}
  .adm-search{min-width:0}
  .adm-kpis{gap:6px}
  .adm-kpi{padding:8px 10px;font-size:11px}
  .adm-kpi strong{font-size:.875rem}
  .adm-term-dir{display:none}
  .adm-row-mini{display:none}
  .adm-tab{font-size:12px;padding:6px 8px}
  .adm-term-main{gap:4px 10px}
}


/* ========== MODAL ========== */
.modal-overlay{
position:fixed;
inset:0;
background:rgba(0,0,0,0.6);
display:flex;
align-items:center;
justify-content:center;
z-index:9999;
padding:20px;
}
.modal-content{
background:var(--card);
border-radius:var(--radius-lg);
width:100%;
max-width:500px;
max-height:90vh;
overflow-y:auto;
border:1px solid var(--border);
}
.modal-header{
display:flex;
align-items:center;
justify-content:space-between;
padding:16px 20px;
border-bottom:1px solid var(--border);
}
.modal-header h3{
font-size:16px;
color:var(--text);
}
.modal-close{
background:none;
border:none;
color:var(--text-muted);
font-size:24px;
cursor:pointer;
padding:0 4px;
}
.modal-close:hover{color:var(--text)}
.modal-body{
padding:16px 20px;
display:flex;
flex-direction:column;
gap:12px;
}
.modal-body .form-row{
display:flex;
gap:10px;
}
.modal-body .form-group{
flex:1;
display:flex;
flex-direction:column;
gap:4px;
}
.modal-body label{
font-size:12px;
color:var(--text-secondary);
font-weight:500;
}
.modal-body input,.modal-body select{
padding:8px 12px;
border-radius:8px;
border:1px solid var(--border);
background:var(--surface);
color:var(--text);
font-size:14px;
}
.modal-body input:focus,.modal-body select:focus{
outline:none;
border-color:var(--primary);
}
.modal-body input:disabled{
opacity:0.5;
cursor:not-allowed;
}
.modal-footer{
display:flex;
gap:8px;
justify-content:flex-end;
padding:16px 20px;
border-top:1px solid var(--border);
}

/* ========== ADD MEMBER MODAL (extended) ========== */
.modal-content.modal-lg{
max-width:600px;
}
.add-modal-context{
display:flex;
align-items:center;
gap:8px;
padding:10px 14px;
background:var(--surface);
border-radius:10px;
border:1px solid var(--border);
font-size:13px;
color:var(--text-secondary);
}
.add-modal-context-icon{
font-size:16px;
color:var(--primary-light);
}
.add-section-title{
font-size:11px;
font-weight:700;
text-transform:uppercase;
letter-spacing:1.2px;
color:var(--text-muted);
margin-top:8px;
padding-bottom:4px;
border-bottom:1px solid var(--border);
}
.form-row-2{
display:grid;
grid-template-columns:1fr 1fr;
gap:10px;
}
.inline-entry{
display:flex;
align-items:center;
gap:8px;
padding:8px 0;
}
.inline-entry input{
flex:1;
padding:8px 12px;
border-radius:8px;
border:1px solid var(--border);
background:var(--surface);
color:var(--text);
font-size:14px;
min-width:0;
}
.inline-entry input:focus{
outline:none;
border-color:var(--primary);
}
.inline-entry-rm{
background:none;
border:none;
color:var(--text-muted);
font-size:20px;
cursor:pointer;
padding:0 4px;
line-height:1;
flex-shrink:0;
}
.inline-entry-rm:hover{
color:var(--secondary);
}
.inline-gender{
display:flex;
gap:2px;
flex-shrink:0;
}
.inline-g-opt{
width:30px;
height:30px;
display:flex;
align-items:center;
justify-content:center;
border-radius:50%;
border:1px solid var(--border);
background:var(--surface);
color:var(--text-muted);
font-size:14px;
cursor:pointer;
transition:all 0.15s;
}
.inline-g-opt.on{
background:var(--primary);
border-color:var(--primary);
color:#fff;
}
.modal-body .fiche-add-btn{
display:flex;
align-items:center;
justify-content:center;
gap:8px;
width:100%;
padding:12px 16px;
border-radius:10px;
border:1px dashed rgba(99,102,241,.4);
background:rgba(99,102,241,.06);
color:var(--primary-light);
font-size:.85rem;
cursor:pointer;
transition:all .2s;
margin-top:2px;
}
.modal-body .fiche-add-btn:hover{
border-color:var(--primary-light);
background:rgba(99,102,241,.12);
color:#a5b4fc;
}
.modal-body .fiche-add-ico{
font-size:1.1rem;
font-weight:600;
}

/* ========== TOGGLE EXISTING / NEW ========== */
.add-modal-toggle{
display:grid;
grid-template-columns:1fr 1fr;
gap:0;
border-radius:10px;
overflow:hidden;
border:1px solid var(--border);
}
.add-modal-toggle-btn{
padding:10px 12px;
border:none;
background:var(--surface);
color:var(--text-muted);
font-size:13px;
font-weight:500;
cursor:pointer;
transition:all 0.2s;
}
.add-modal-toggle-btn:first-child{
border-right:1px solid var(--border);
}
.add-modal-toggle-btn.active{
background:var(--primary);
color:#fff;
}
.add-modal-toggle-btn:not(.active):hover{
background:rgba(99,102,241,0.08);
color:var(--text);
}

/* ========== MEMBER PICKER ========== */
.member-picker{
display:flex;
flex-direction:column;
gap:8px;
}
.member-picker-input{
padding:10px 14px;
border-radius:10px;
border:1px solid var(--border);
background:var(--surface);
color:var(--text);
font-size:14px;
}
.member-picker-input:focus{
outline:none;
border-color:var(--primary);
}
.member-picker-input::placeholder{
color:var(--text-muted);
}
.member-picker-list{
max-height:240px;
overflow-y:auto;
border:1px solid var(--border);
border-radius:10px;
background:var(--surface);
}
.member-picker-empty{
padding:16px;
text-align:center;
color:var(--text-muted);
font-size:13px;
}
.member-picker-item{
display:flex;
align-items:center;
gap:10px;
padding:10px 14px;
cursor:pointer;
transition:background 0.15s;
border-bottom:1px solid var(--border);
}
.member-picker-item:last-child{
border-bottom:none;
}
.member-picker-item:hover{
background:rgba(99,102,241,0.06);
}
.member-picker-item.selected{
background:rgba(99,102,241,0.12);
border-left:3px solid var(--primary);
}
.member-picker-gen{
display:inline-flex;
align-items:center;
justify-content:center;
min-width:28px;
height:22px;
border-radius:6px;
font-size:11px;
font-weight:600;
color:#fff;
padding:0 6px;
flex-shrink:0;
}
.member-picker-name{
flex:1;
font-size:14px;
color:var(--text);
min-width:0;
overflow:hidden;
text-overflow:ellipsis;
white-space:nowrap;
}
.member-picker-alias{
color:var(--text-muted);
font-size:12px;
}
.member-picker-gender{
font-size:16px;
flex-shrink:0;
color:var(--text-secondary);
}

/* ========== SELECTED PREVIEW ========== */
.add-modal-selected-preview{
display:flex;
align-items:center;
gap:12px;
padding:12px 16px;
border-radius:10px;
background:rgba(99,102,241,0.08);
border:1px solid rgba(99,102,241,0.2);
}
.preview-gender{
font-size:24px;
flex-shrink:0;
}
.preview-info{
display:flex;
flex-direction:column;
gap:2px;
min-width:0;
}
.preview-info strong{
font-size:14px;
color:var(--text);
}
.preview-alias{
color:var(--text-muted);
font-size:13px;
}
.preview-info small{
font-size:11px;
color:var(--text-secondary);
}

/* ========== CHILDREN ASSIGNMENT CHECKBOXES ========== */
.children-assign-list{
display:flex;
flex-direction:column;
gap:4px;
}
.children-assign-item{
display:flex;
align-items:center;
gap:10px;
padding:8px 12px;
border-radius:8px;
cursor:pointer;
transition:background 0.15s;
font-size:14px;
color:var(--text);
}
.children-assign-item:hover{
background:rgba(99,102,241,0.06);
}
.children-assign-item input[type="checkbox"]{
width:16px;
height:16px;
accent-color:var(--primary);
cursor:pointer;
flex-shrink:0;
}
.children-assign-gender{
font-size:16px;
flex-shrink:0;
color:var(--text-secondary);
}
.children-assign-name{
flex:1;
min-width:0;
overflow:hidden;
text-overflow:ellipsis;
white-space:nowrap;
}

@media(max-width:480px){
.form-row-2{
grid-template-columns:1fr;
}
.modal-content.modal-lg{
max-width:100%;
}
}

/* ========== VIEW TOGGLE (Fiche / Arbre) ========== */
.view-toggle{
display:flex;
gap:0;
margin-bottom:16px;
border-radius:var(--radius);
overflow:hidden;
background:var(--surface);
}
.view-toggle-btn{
flex:1;
padding:10px 16px;
border:none;
background:transparent;
color:var(--text-muted);
font-size:14px;
font-weight:600;
cursor:pointer;
transition:all 0.2s;
font-family:inherit;
}
.view-toggle-btn.active{
background:var(--primary);
color:white;
}

/* ========== TREE VIEW ========== */
.tree-view-wrapper{
display:flex;
flex-direction:column;
gap:12px;
}
.tree-view-toolbar{
display:flex;
gap:8px;
flex-wrap:wrap;
align-items:center;
justify-content:space-between;
}
.tree-toolbar-group{
display:flex;
gap:8px;
}
.tree-toolbar-btn{
padding:8px 16px;
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius-full);
color:var(--text-secondary);
font-size:13px;
font-weight:500;
cursor:pointer;
transition:all 0.2s;
font-family:inherit;
}
.tree-toolbar-btn:active{
background:var(--primary);
color:white;
border-color:var(--primary);
}

/* ========== ZOOM CONTROLS ========== */
.tree-zoom-controls{
display:flex;
align-items:center;
gap:2px;
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius-full);
padding:3px;
}
.tree-zoom-btn{
width:32px;
height:32px;
border-radius:50%;
border:none;
background:transparent;
color:var(--text-secondary);
font-size:16px;
font-weight:700;
cursor:pointer;
display:flex;
align-items:center;
justify-content:center;
transition:all 0.15s;
font-family:inherit;
line-height:1;
}
.tree-zoom-btn:active{
background:var(--primary);
color:white;
}
.tree-zoom-level{
font-size:11px;
color:var(--text-secondary);
font-weight:600;
min-width:38px;
text-align:center;
font-variant-numeric:tabular-nums;
}
.tree-zoom-fit{
border-radius:var(--radius-full);
width:auto;
padding:0 10px;
font-size:11px;
font-weight:600;
}

/* ========== SCROLL VIEWPORT ========== */
.tree-view-scroll{
position:relative;
overflow:auto;
-webkit-overflow-scrolling:touch;
min-height:60vh;
border:1px solid var(--border);
border-radius:12px;
background:rgba(0,0,0,0.12);
}
.tree-view-scroll::-webkit-scrollbar{display:none}
.tree-view-canvas{
display:inline-flex;
min-width:max-content;
padding:16px 32px 16px 16px;
}

/* ========== TREE NODE (vertical) ========== */
.tree-node{
display:flex;
flex-direction:column;
align-items:center;
}
.tree-node-content{
display:flex;
flex-direction:column;
align-items:center;
flex-shrink:0;
}
.tree-node-bridge{
width:2px;
height:20px;
background:var(--border);
flex-shrink:0;
}
.tree-node-children{
display:flex;
flex-direction:row;
align-items:flex-start;
}

/* ========== CHILD COLUMN BRANCHES ========== */
.tree-child-row{
display:flex;
flex-direction:column;
align-items:center;
position:relative;
padding-top:20px;
}
/* Horizontal bus line */
.tree-child-row::before{
content:'';
position:absolute;
top:0;
left:0;
right:0;
height:2px;
background:var(--border);
}
/* First child: cut left half */
.tree-child-row:first-child::before{
left:50%;
}
/* Last child: cut right half */
.tree-child-row:last-child::before{
right:50%;
}
/* Only child: no horizontal bus */
.tree-child-row.only-child::before{
display:none;
}
/* Vertical stub from bus down to child card */
.tree-child-row::after{
content:'';
position:absolute;
top:0;
left:50%;
width:2px;
height:20px;
background:var(--border);
}

/* ========== TREE CARD ========== */
.tree-card{
display:flex;
align-items:center;
gap:8px;
padding:8px 12px;
background:var(--card);
border:2px solid var(--border);
border-radius:12px;
cursor:pointer;
transition:all 0.2s ease;
position:relative;
min-width:120px;
max-width:180px;
margin:0 6px;
flex-shrink:0;
}
.tree-card:hover{
background:var(--card-hover);
border-color:rgba(255,255,255,0.15);
}
.tree-card:active{
transform:scale(0.97);
}

/* Generation top accent */
.tree-card::before{
content:'';
position:absolute;
top:0;left:0;right:0;
height:3px;
border-radius:12px 12px 0 0;
}
.tree-card.gen0::before{background:var(--gen0)}
.tree-card.gen1::before{background:var(--gen1)}
.tree-card.gen2::before{background:var(--gen2)}
.tree-card.gen3::before{background:var(--gen3)}
.tree-card.gen4::before{background:var(--gen4)}
.tree-card.gen5::before{background:var(--gen5)}
.tree-card.gen6::before{background:var(--gen6)}
.tree-card.gen7::before{background:var(--gen7)}

/* Avatar */
.tree-card-avatar{
width:32px;height:32px;
border-radius:50%;
display:flex;align-items:center;justify-content:center;
font-size:16px;
flex-shrink:0;
}
.tree-card.male .tree-card-avatar{background:rgba(59,130,246,0.25)}
.tree-card.female .tree-card-avatar{background:rgba(236,72,153,0.25)}

/* Info */
.tree-card-info{
flex:1;
min-width:0;
overflow:hidden;
}
.tree-card-name{
font-size:12px;
font-weight:600;
white-space:nowrap;
overflow:hidden;
text-overflow:ellipsis;
color:var(--text);
}
.tree-card-alias{
font-weight:400;
color:var(--primary-light);
font-size:11px;
}
.tree-card-gen{
font-size:10px;
font-weight:600;
margin-top:2px;
}
.tree-card-gen.gen0{color:var(--gen0)}
.tree-card-gen.gen1{color:var(--gen1)}
.tree-card-gen.gen2{color:var(--gen2)}
.tree-card-gen.gen3{color:var(--gen3)}
.tree-card-gen.gen4{color:var(--gen4)}
.tree-card-gen.gen5{color:var(--gen5)}
.tree-card-gen.gen6{color:var(--gen6)}
.tree-card-gen.gen7{color:var(--gen7)}

/* Toggle +/- button */
.tree-card-toggle{
position:absolute;
bottom:-12px;
left:50%;
transform:translateX(-50%);
width:24px;height:24px;
border-radius:50%;
background:var(--primary);
color:white;
border:2px solid var(--bg);
font-size:11px;
font-weight:700;
display:flex;align-items:center;justify-content:center;
cursor:pointer;
z-index:2;
transition:all 0.15s;
line-height:1;
}
.tree-card-toggle:hover{
background:var(--primary-light);
transform:translateX(-50%) scale(1.1);
}

/* ========== TREE POPUP ========== */
.tree-popup-overlay{
position:fixed;
inset:0;
background:rgba(0,0,0,0.6);
display:flex;
align-items:center;
justify-content:center;
z-index:9999;
padding:20px;
animation:fadeIn 0.15s ease;
}
@keyframes fadeIn{
from{opacity:0}
to{opacity:1}
}
.tree-popup{
background:var(--card);
border:1px solid var(--border);
border-radius:var(--radius-lg);
width:100%;
max-width:340px;
padding:24px;
position:relative;
animation:popIn 0.2s ease;
}
@keyframes popIn{
from{opacity:0;transform:scale(0.95)}
to{opacity:1;transform:scale(1)}
}
.tree-popup-close{
position:absolute;
top:12px;right:12px;
background:none;
border:none;
color:var(--text-muted);
font-size:24px;
cursor:pointer;
line-height:1;
padding:0 4px;
}
.tree-popup-close:hover{color:var(--text)}

.tree-popup-header{
display:flex;
align-items:center;
gap:12px;
margin-bottom:20px;
}
.tree-popup-avatar{
width:48px;height:48px;
border-radius:50%;
display:flex;align-items:center;justify-content:center;
font-size:24px;
flex-shrink:0;
}
.tree-popup-avatar.male{background:linear-gradient(135deg,#1e3a5f,#3b82f6)}
.tree-popup-avatar.female{background:linear-gradient(135deg,#5f1e4a,#ec4899)}
.tree-popup-title{
flex:1;
min-width:0;
}
.tree-popup-title h3{
font-size:18px;
font-weight:700;
color:var(--text);
}
.tree-popup-alias{
display:block;
font-size:14px;
color:var(--primary-light);
margin-top:2px;
}
.tree-popup-gen-badge{
padding:4px 12px;
border-radius:var(--radius-full);
font-size:11px;
font-weight:700;
color:white;
flex-shrink:0;
}

.tree-popup-body{
display:flex;
flex-direction:column;
gap:0;
}
.tree-popup-row{
display:flex;
justify-content:space-between;
align-items:center;
padding:10px 0;
border-bottom:1px solid var(--border);
font-size:14px;
}
.tree-popup-row:last-child{border-bottom:none}
.tree-popup-note{
background:var(--surface);
border:1px solid var(--border);
border-radius:var(--radius);
padding:10px 14px;
margin-top:10px;
font-size:13px;
font-style:italic;
color:var(--text-secondary);
line-height:1.5;
}
.tree-popup-label{
color:var(--text-muted);
font-weight:500;
}

.tree-popup-footer{
margin-top:16px;
padding-top:16px;
border-top:1px solid var(--border);
}
.tree-popup-edit-btn{
width:100%;
padding:12px;
background:linear-gradient(135deg,var(--primary),var(--secondary));
border:none;
border-radius:var(--radius);
color:white;
font-size:14px;
font-weight:600;
cursor:pointer;
transition:all 0.2s;
font-family:inherit;
}
.tree-popup-edit-btn:active{
transform:scale(0.98);
opacity:0.9;
}
.tree-popup-delete-btn{
width:100%;
padding:12px;
background:rgba(239,68,68,0.15);
border:1px solid rgba(239,68,68,0.3);
border-radius:var(--radius);
color:#ef4444;
font-size:14px;
font-weight:600;
cursor:pointer;
transition:all 0.2s;
font-family:inherit;
margin-top:8px;
}
.tree-popup-delete-btn:disabled{
background:rgba(100,116,139,0.1);
border-color:var(--border);
color:var(--text-muted);
cursor:not-allowed;
opacity:0.6;
}
.tree-popup-delete-btn:hover:not(:disabled){
background:rgba(239,68,68,0.25);
border-color:rgba(239,68,68,0.5);
}
.tree-popup-confirm{
display:flex;
flex-direction:column;
gap:16px;
padding:8px 0;
}
.tree-popup-confirm-msg{
font-size:15px;
color:var(--text);
line-height:1.5;
text-align:center;
}
.tree-popup-confirm-actions{
display:flex;
gap:10px;
}
.tree-popup-confirm-actions .btn-cancel{
flex:1;
padding:12px;
background:var(--surface);
border:1px solid var(--border);
border-radius:var(--radius);
color:var(--text);
font-size:14px;
font-weight:600;
cursor:pointer;
transition:all 0.2s;
font-family:inherit;
}
.tree-popup-confirm-actions .btn-cancel:hover{
background:var(--card-hover);
}
.tree-popup-confirm-actions .btn-confirm-delete{
flex:1;
padding:12px;
background:#ef4444;
border:none;
border-radius:var(--radius);
color:white;
font-size:14px;
font-weight:600;
cursor:pointer;
transition:all 0.2s;
font-family:inherit;
}
.tree-popup-confirm-actions .btn-confirm-delete:hover{
background:#dc2626;
}
.tree-popup-confirm-actions .btn-confirm-delete:disabled{
opacity:0.6;
cursor:not-allowed;
}
.tree-popup-disabled-hint{
font-size:12px;
color:var(--text-muted);
text-align:center;
margin-top:6px;
font-style:italic;
}

/* ========== INFO ICON BUTTON ========== */
.info-icon-btn{
position:absolute;
top:6px;right:6px;
width:24px;height:24px;
border-radius:50%;
background:rgba(99,102,241,0.5);
color:white;
border:none;
font-size:13px;
font-weight:700;
display:flex;align-items:center;justify-content:center;
cursor:pointer;
z-index:2;
transition:all 0.15s;
line-height:1;
padding:0;
}
.info-icon-btn:hover{
background:rgba(99,102,241,0.8);
}
.info-icon-btn:active{
transform:scale(0.9);
}

/* ========== MEMBER PHOTOS ========== */
.person-photo{
width:100%;
height:100%;
border-radius:50%;
object-fit:cover;
}
.tree-popup-photo{
width:100%;
height:100%;
border-radius:50%;
object-fit:cover;
}
.photo-preview{
width:80px;
height:80px;
border-radius:50%;
object-fit:cover;
border:3px solid var(--border);
display:block;
margin:0 auto;
}
.photo-input{
width:100%;
padding:8px;
background:var(--surface);
border:1px solid var(--border);
border-radius:var(--radius);
color:var(--text);
font-size:13px;
}
.photo-input::file-selector-button{
padding:6px 14px;
border-radius:8px;
border:none;
background:var(--primary);
color:white;
font-size:12px;
font-weight:500;
cursor:pointer;
margin-right:8px;
}
.photo-input::file-selector-button:hover{
background:var(--primary-light);
}

/* ========== ADD MEMBER CARD (dashed "+") ========== */
.add-member-card{
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
gap:6px;
padding:14px 16px;
border:2px dashed var(--border);
border-radius:var(--radius);
cursor:pointer;
transition:all 0.2s;
color:var(--text-muted);
background:transparent;
min-height:60px;
}
.add-member-card:hover{
border-color:var(--primary);
color:var(--primary-light);
background:rgba(99,102,241,0.08);
}
.add-member-card:active{
transform:scale(0.97);
}
.add-member-card--grid{
padding:14px 8px;
text-align:center;
}
.add-member-icon{
font-size:24px;
font-weight:300;
line-height:1;
}
.add-member-label{
font-size:12px;
font-weight:500;
}

/* ========== ADD MODAL CONTEXT BANNER ========== */
.add-modal-context{
display:flex;
align-items:center;
gap:10px;
padding:12px 16px;
background:linear-gradient(135deg,rgba(99,102,241,0.15),rgba(236,72,153,0.10));
border:1px solid rgba(99,102,241,0.25);
border-radius:var(--radius);
font-size:14px;
font-weight:500;
color:var(--text);
}
.add-modal-context-icon{
font-size:20px;
flex-shrink:0;
}

/* ==========================================================
   RESPONSIVE â€” Tablet / Desktop / Wide / Hover
   ========================================================== */

/* ---------- Tablet (768px+) ---------- */
@media (min-width: 768px) {
  .app {
    max-width: 768px;
  }
  .nav {
    max-width: 768px;
  }
  .children-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}

/* ---------- Desktop (1024px+) ---------- */
@media (min-width: 1024px) {

  /* 18. Unlock body scroll */
  html, body {
    overflow: auto;
  }

  /* 1. App container â€” CSS Grid with sidebar */
  .app {
    display: grid;
    grid-template-rows: auto 1fr;
    grid-template-columns: 240px 1fr;
    max-width: none;
    width: 100%;
    height: 100dvh;
  }

  /* 2. Header â€” spans full width, horizontal layout */
  .header {
    grid-column: 1 / -1;
    display: flex;
    align-items: center;
    gap: 24px;
    padding: 12px 32px;
  }
  .header-top {
    margin-bottom: 0;
    flex-shrink: 0;
    gap: 16px;
  }
  .header-stats {
    flex: 1;
    max-width: 480px;
  }
  .header-user {
    flex-shrink: 0;
  }

  /* 3. Nav â€” sidebar instead of bottom bar */
  .nav {
    position: static;
    left: auto;
    bottom: auto;
    transform: none;
    width: auto;
    max-width: none;
    grid-column: 1;
    grid-row: 2;
    flex-direction: column;
    justify-content: flex-start;
    gap: 4px;
    padding: 16px 12px;
    padding-bottom: 16px;
    background: var(--card);
    backdrop-filter: none;
    -webkit-backdrop-filter: none;
    border-top: none;
    border-right: 1px solid var(--border);
    overflow-y: auto;
    z-index: auto;
  }
  .nav-item {
    flex-direction: row;
    justify-content: flex-start;
    gap: 10px;
    padding: 12px 16px;
    font-size: 14px;
    border-radius: 12px;
    width: 100%;
  }
  .nav-item svg {
    width: 20px;
    height: 20px;
  }

  /* 4. Main + scroll area */
  main {
    grid-column: 2;
    grid-row: 2;
    overflow: hidden;
  }
  .scroll {
    padding-bottom: 32px;
    max-width: 900px;
    margin: 0 auto;
    scrollbar-width: thin;
    scrollbar-color: var(--border) transparent;
  }
  .scroll::-webkit-scrollbar { display: block; width: 6px; }
  .scroll::-webkit-scrollbar-track { background: transparent; }
  .scroll::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
  .scroll::-webkit-scrollbar-thumb:hover { background: var(--text-muted); }

  /* Admin page â€” wider content, no max-width constraint */
  .admin-page .scroll {
    max-width: none;
    padding: 0 40px 32px;
  }

  /* 5. Person card â€” wider, larger avatar */
  .person-card {
    max-width: 640px;
    margin: 0 auto 20px;
  }
  .person-avatar {
    width: 100px;
    height: 100px;
    font-size: 44px;
  }
  .person-name {
    font-size: clamp(20px, 2.5vw, 28px);
  }

  /* 6. Parent cards â€” wider, bigger avatars */
  .parent-cards {
    max-width: 640px;
    margin: 0 auto 8px;
    gap: 16px;
  }
  .parent-card {
    padding: 20px;
  }
  .parent-card .mini-avatar {
    width: 52px;
    height: 52px;
    font-size: 24px;
  }

  /* 7. Children grid â€” auto-fill */
  .children-grid {
    grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
  }

  /* 8. Spouses â€” horizontal row */
  .spouses-list {
    flex-direction: row;
    flex-wrap: wrap;
  }
  .spouse-card {
    min-width: 280px;
    flex: 1;
  }

  /* 9. Person list (search) â€” multi-column grid */
  .person-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(340px, 1fr));
    gap: 8px;
  }

  /* 10. Parente â€” handled by .parente-page scoped styles */

  /* 11. Forms (contribuer) â€” centered */
  .form-section {
    max-width: 700px;
    margin: 0 auto 16px;
  }
  .form-intro {
    max-width: 700px;
    margin: 0 auto 16px;
  }
  .form-actions {
    max-width: 700px;
    margin: 24px auto;
  }
  .form-note {
    max-width: 700px;
    margin: 0 auto;
  }

  /* 12. Suggestions â€” multi-column grid */
  .suggestions-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: 12px;
  }

  /* 13. Admin â€” content stretches full width */
  .admin-section {
    width: 100%;
  }

  /* 14. Login â€” wider card, larger logo */
  .login-container {
    max-width: 460px;
  }
  .login-box {
    padding: 36px 32px;
  }
  .login-logo-icon {
    width: 96px;
    height: 96px;
    font-size: 48px;
    border-radius: 28px;
  }

  /* 15. Modals â€” wider */
  .modal-content {
    max-width: 640px;
  }
  .tree-popup {
    max-width: 420px;
  }

  /* 16. Tree view â€” wider cards & bridges (vertical) */
  .tree-card {
    min-width: 150px;
    max-width: 220px;
    padding: 10px 14px;
    margin: 0 8px;
  }
  .tree-node-bridge {
    height: 28px;
  }
  .tree-child-row {
    padding-top: 28px;
  }
  .tree-child-row::after {
    height: 28px;
  }
  .tree-view-scroll {
    min-height: 65vh;
  }
  .tree-zoom-btn {
    width: 36px;
    height: 36px;
  }

  /* Toast â€” reposition without bottom nav */
  .toast {
    bottom: 40px;
  }

  /* Section title spacing */
  .section-title {
    max-width: 640px;
    margin: 24px auto 12px;
  }

  /* Children groups â€” center */
  .children-mother-group {
    max-width: 640px;
    margin: 0 auto 16px;
  }

  /* Gen legend â€” center */
  .gen-legend {
    max-width: 640px;
    margin: 24px auto 0;
  }
}

/* ---------- Wide (1440px+) ---------- */
@media (min-width: 1440px) {
  .app {
    grid-template-columns: 260px 1fr;
  }
  .scroll {
    max-width: 1000px;
  }
  .admin-page .scroll {
    max-width: none;
    padding: 0 56px 32px;
  }
  .children-grid {
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
  }
  .person-list {
    grid-template-columns: repeat(auto-fill, minmax(360px, 1fr));
  }
  .suggestions-list {
    grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
  }
  .nav-item {
    padding: 14px 20px;
  }
}

/* ---------- Hover effects (non-touch) ---------- */
@media (hover: hover) {
  .person-item:hover {
    background: var(--card-hover);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
  }
  .child-card:hover {
    background: var(--card-hover);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
  }
  .parent-card:hover {
    background: var(--card-hover);
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
  }
  .spouse-card.clickable:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
  }
  .nav-item:hover {
    color: var(--primary-light);
    background: rgba(99, 102, 241, 0.1);
  }
  .suggestion-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
  }
  .tree-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
    border-color: rgba(255, 255, 255, 0.2);
  }
  .tree-nav-item:hover {
    background: var(--primary);
    border-color: var(--primary);
    color: white;
  }
  .tree-toolbar-btn:hover {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
  }
  .tree-zoom-btn:hover {
    background: rgba(99, 102, 241, 0.15);
    color: var(--text);
  }
  .tree-zoom-fit:hover {
    background: var(--primary);
    color: white;
  }
  .view-toggle-btn:hover:not(.active) {
    background: rgba(99, 102, 241, 0.1);
    color: var(--text-secondary);
  }
  .admin-tab:hover:not(.active) {
    background: rgba(99, 102, 241, 0.1);
    color: var(--text-secondary);
  }
  .action-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
  }
  .terms-category-header:hover {
    background: var(--card-hover);
  }
  .term-card:hover:not(.editing) {
    background: var(--card-hover);
  }
}

/* ================================================================
   Relation system - Autocomplete
   ================================================================ */

.member-autocomplete {
  width: 100%;
  position: relative;
}

.member-autocomplete-label {
  display: block;
  font-size: 13px;
  color: var(--text-secondary);
  margin-bottom: 6px;
  font-weight: 500;
}

.member-autocomplete-selected {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 6px;
  padding: 6px 10px;
  background: rgba(99, 102, 241, 0.1);
  border-radius: 8px;
  font-size: 13px;
  color: var(--text);
}

/* ================================================================
   Relation system - Results list
   ================================================================ */

.relation-results {
  margin-top: 20px;
}

.relation-results-header {
  margin-bottom: 16px;
}

.relation-results-count {
  font-size: 14px;
  color: var(--text-secondary);
  font-weight: 500;
}

.relation-results-list {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

/* ================================================================
   Relation system - Card
   ================================================================ */

.relation-card {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 20px;
  transition: transform 0.2s, box-shadow 0.2s;
}

.relation-card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 16px;
}

.relation-card-category-block {
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.relation-card-category-songhoy {
  font-size: 18px;
  font-weight: 700;
  color: var(--accent);
  line-height: 1.2;
}

.relation-card-category {
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  color: var(--primary-light);
  background: rgba(99, 102, 241, 0.15);
  padding: 4px 10px;
  border-radius: var(--radius-full);
  align-self: flex-start;
}

.relation-card-distance {
  font-size: 11px;
  color: var(--text-muted);
}

/* Terms display */
.relation-card-terms {
  margin-bottom: 16px;
}

.relation-card-term-row {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px 0;
}

.relation-card-term-row + .relation-card-term-row {
  border-top: 1px solid var(--border);
}

.relation-card-person {
  font-size: 13px;
  color: var(--text-secondary);
  min-width: 80px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.relation-card-arrow {
  color: var(--text-muted);
  font-size: 14px;
  flex-shrink: 0;
}

.relation-card-term-block {
  display: flex;
  flex-direction: column;
  gap: 2px;
}

.relation-songhoy-term {
  font-size: 24px;
  font-weight: 700;
  color: var(--accent);
  line-height: 1.2;
}

.relation-songhoy-term.additional {
  font-size: 18px;
  color: var(--primary-light);
}

.relation-card-additional {
  margin-bottom: 12px;
  padding: 10px;
  background: rgba(99, 102, 241, 0.05);
  border-radius: 8px;
  border: 1px dashed var(--border);
}

.relation-card-additional-label {
  font-size: 12px;
  color: var(--text-muted);
  font-style: italic;
  display: block;
  margin-bottom: 6px;
}

.relation-card-label-fr {
  font-size: 13px;
  color: var(--text-secondary);
}

/* Footer */
.relation-card-footer {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid var(--border);
}

.relation-card-ancestor {
  font-size: 12px;
  color: var(--text-muted);
}

.relation-card-distances {
  font-size: 11px;
  color: var(--text-muted);
}

/* ================================================================
   Relation system - Path Graph
   ================================================================ */

.relation-graph {
  padding: 12px 0;
}

.relation-graph-ancestor {
  display: flex;
  justify-content: center;
  margin-bottom: 4px;
}

.relation-graph-node {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 12px;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: 8px;
  font-size: 12px;
}

.relation-graph-node.ancestor-node {
  background: rgba(99, 102, 241, 0.15);
  border-color: var(--primary);
}

.relation-graph-node.endpoint {
  background: rgba(34, 211, 238, 0.1);
  border-color: var(--accent);
}

.relation-graph-icon {
  font-size: 14px;
}

.relation-graph-name {
  color: var(--text);
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 120px;
}

.relation-graph-direct {
  color: var(--text-muted);
  font-style: italic;
}

/* Fork */
.relation-graph-fork {
  display: flex;
  flex-direction: column;
  align-items: center;
  position: relative;
  height: 24px;
}

.relation-graph-vline {
  width: 2px;
  height: 12px;
  background: var(--border);
}

.relation-graph-hline {
  width: 60%;
  max-width: 300px;
  height: 2px;
  background: var(--border);
}

/* Branches */
.relation-graph-branches {
  display: flex;
  justify-content: center;
  gap: 24px;
}

.relation-graph-branch {
  display: flex;
  flex-direction: column;
  align-items: center;
  min-width: 100px;
  max-width: 180px;
}

.relation-graph-step {
  display: flex;
  flex-direction: column;
  align-items: center;
}

.relation-graph-vline-branch {
  width: 2px;
  height: 12px;
  background: var(--border);
}


/* ================================================================
   Admin - Terms (edit form + add button + errors)
   ================================================================ */

.terms-error{
  color:#ef4444;font-size:13px;
  padding:8px 12px;
  background:rgba(239,68,68,0.1);
  border-radius:8px;margin-bottom:12px;
}

/* Term edit form */
.term-edit-form{display:flex;flex-direction:column;gap:10px}
.term-edit-row{display:flex;flex-direction:column;gap:4px}
.term-edit-row label{font-size:12px;color:var(--text-secondary);font-weight:500}
.term-edit-input{
  padding:8px 12px;
  background:var(--adm-input-bg, var(--bg));
  border:1px solid var(--adm-bdr, var(--border));
  border-radius:8px;
  color:var(--adm-txt, var(--text));
  font-size:14px;
}
.term-edit-input:focus{outline:none;border-color:var(--adm-gold, var(--primary))}
.term-edit-input.disabled{opacity:0.5;cursor:not-allowed}
.term-edit-actions{display:flex;gap:8px;justify-content:flex-end;margin-top:4px}
.term-edit-row-inline{display:flex;gap:12px}
.term-edit-row-inline .term-edit-row{flex:1}

.term-card.editing{
  background:var(--adm-card, var(--surface));
  border:1px solid var(--adm-gold, var(--primary));
  border-radius:10px;padding:12px;
}
.term-card.adding{
  background:var(--adm-card, var(--surface));
  border:1px solid var(--adm-green, var(--success));
  border-radius:10px;padding:12px;
}

.btn-add-term{
  width:100%;padding:10px;
  background:transparent;
  border:2px dashed var(--adm-bdr, var(--border));
  border-radius:8px;
  color:var(--adm-t2, var(--text-secondary));
  font-size:14px;cursor:pointer;
  transition:border-color 0.2s, color 0.2s;
}
.btn-add-term:hover{
  border-color:var(--adm-gold, var(--primary));
  color:var(--adm-gold, var(--primary));
}

/* ================================================================
   Responsive - Relation system
   ================================================================ */

@media (max-width: 480px) {
  .relation-songhoy-term {
    font-size: 20px;
  }

  .relation-card {
    padding: 14px;
  }

  .relation-card-person {
    min-width: 60px;
    font-size: 12px;
  }

  .relation-graph-branches {
    gap: 12px;
  }

  .relation-graph-branch {
    min-width: 80px;
  }

  .relation-graph-name {
    max-width: 80px;
    font-size: 11px;
  }


  .term-edit-actions {
    flex-direction: column;
  }
}

/* ================================================================
   Parente Page â€” Sahel Heritage Theme
   ================================================================ */

.parente-page {
  --sh-void: #070A14;
  --sh-deep: #0C1020;
  --sh-card: #111830;
  --sh-card-h: #161E3A;
  --sh-elev: #1A2344;
  --sh-gold: #D4A853;
  --sh-gold-d: rgba(212,168,83,.10);
  --sh-gold-g: rgba(212,168,83,.22);
  --sh-terra: #E0845A;
  --sh-terra-d: rgba(224,132,90,.07);
  --sh-cyan: #48E8D4;
  --sh-cyan-d: rgba(72,232,212,.07);
  --sh-cyan-g: rgba(72,232,212,.16);
  --sh-blue: #7090FF;
  --sh-green: #50E898;
  --sh-txt: #ECE8E0;
  --sh-t2: #969AB2;
  --sh-t3: #4E5370;
  --sh-bdr: rgba(255,255,255,0.05);
  --sh-bdr2: rgba(255,255,255,0.09);
  --sh-serif: 'Playfair Display', Georgia, serif;
  --sh-sans: 'Nunito Sans', system-ui, sans-serif;
}

/* â”€â”€ Header â”€â”€ */
.parente-hdr {
  display: flex;
  align-items: center;
  gap: 14px;
  margin-bottom: 30px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--sh-bdr);
}

.parente-hdr-i {
  width: 44px;
  height: 44px;
  border-radius: 12px;
  background: var(--sh-gold-d);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
}

.parente-hdr h1 {
  font-size: 1.3rem;
  font-weight: 700;
  letter-spacing: -0.3px;
  color: var(--sh-txt);
}

.parente-hdr small {
  display: block;
  font-size: 0.72rem;
  color: var(--sh-t3);
  margin-top: 2px;
}

/* â”€â”€ Selector row â”€â”€ */
.parente-sel {
  display: flex;
  align-items: stretch;
  gap: 0;
  margin-bottom: 22px;
}

/* â”€â”€ Person card â”€â”€ */
.parente-pc {
  flex: 1;
  background: var(--sh-card);
  border: 1px solid var(--sh-bdr2);
  border-radius: 18px;
  padding: 14px 16px;
  position: relative;
  cursor: pointer;
  transition: 0.3s;
}

.parente-pc:hover {
  background: var(--sh-card-h);
  border-color: rgba(255,255,255,0.12);
}

.parente-pc:focus-within {
  z-index: 20;
}

.parente-pc::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  border-radius: 18px 18px 0 0;
}

.parente-pc.a::before {
  background: linear-gradient(90deg, var(--sh-cyan), var(--sh-blue));
}

.parente-pc.b::before {
  background: linear-gradient(90deg, var(--sh-gold), var(--sh-terra));
}

.parente-pc-l {
  font-size: 0.54rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--sh-t3);
  font-weight: 600;
  margin-bottom: 10px;
}

.parente-pc-r {
  display: flex;
  align-items: center;
  gap: 12px;
}

.parente-pc-nm {
  font-size: 0.88rem;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 220px;
  color: var(--sh-txt);
}

.parente-pc-mt {
  font-size: 0.7rem;
  color: var(--sh-t2);
  margin-top: 2px;
  display: flex;
  gap: 6px;
  align-items: center;
}

.parente-pc-clear {
  background: none;
  border: none;
  color: var(--sh-t3);
  font-size: 18px;
  cursor: pointer;
  padding: 0 4px;
  line-height: 1;
  flex-shrink: 0;
  transition: color 0.2s;
}

.parente-pc-clear:hover {
  color: var(--sh-txt);
}

/* â”€â”€ Avatar â”€â”€ */
.parente-av {
  width: 44px;
  height: 44px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--sh-serif);
  font-size: 0.95rem;
  font-weight: 700;
  flex-shrink: 0;
  position: relative;
}

.parente-av.f {
  background: linear-gradient(140deg, #28123E, #3E1E58);
  color: #CCA0EE;
  box-shadow: 0 0 0 2px rgba(204,160,238,0.14);
}

.parente-av.m {
  background: linear-gradient(140deg, #0E2238, #182E50);
  color: #72B4EE;
  box-shadow: 0 0 0 2px rgba(114,180,238,0.14);
}

.parente-av-g {
  position: absolute;
  bottom: -2px;
  right: -4px;
  font-family: var(--sh-sans);
  font-size: 0.48rem;
  font-weight: 700;
  padding: 1px 5px;
  border-radius: 5px;
}

.parente-av.f .parente-av-g {
  background: #2A1146;
  color: #CCA0EE;
}

.parente-av.m .parente-av-g {
  background: #122844;
  color: #72B4EE;
}

/* â”€â”€ Swap button â”€â”€ */
.parente-sw {
  width: 50px;
  height: 50px;
  border-radius: 50%;
  background: var(--sh-elev);
  border: 2px solid var(--sh-bdr2);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  flex-shrink: 0;
  margin: 0 -10px;
  z-index: 5;
  align-self: center;
  transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  color: var(--sh-t2);
  font-size: 1.15rem;
}

.parente-sw:hover {
  border-color: var(--sh-gold);
  background: var(--sh-gold-d);
  color: var(--sh-gold);
  transform: rotate(180deg);
  box-shadow: 0 0 28px rgba(212,168,83,0.18);
}

/* â”€â”€ Flash summary â”€â”€ */
.parente-flash {
  background: var(--sh-card);
  border: 1px solid var(--sh-bdr2);
  border-radius: 14px;
  padding: 13px 18px;
  margin-bottom: 24px;
  display: flex;
  align-items: center;
  gap: 13px;
  animation: sh-rise 0.5s ease-out both;
}

.parente-flash-n {
  width: 36px;
  height: 36px;
  border-radius: 9px;
  background: var(--sh-gold-d);
  color: var(--sh-gold);
  font-weight: 700;
  font-size: 1.1rem;
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
}

.parente-flash-t {
  font-size: 0.84rem;
  color: var(--sh-t2);
  line-height: 1.55;
}

.parente-flash-t strong {
  color: var(--sh-cyan);
  font-weight: 700;
  font-family: var(--sh-serif);
  font-size: 0.92rem;
}

.parente-flash-t em {
  color: var(--sh-txt);
  font-style: normal;
  font-weight: 600;
}

/* â”€â”€ Relation card â”€â”€ */
.parente-rc {
  background: var(--sh-card);
  border: 1px solid var(--sh-bdr2);
  border-radius: 18px;
  overflow: hidden;
  margin-bottom: 20px;
  box-shadow: 0 8px 48px rgba(0,0,0,0.45), 0 2px 6px rgba(0,0,0,0.3);
  animation: sh-rise 0.6s ease-out both;
}

.parente-rc.dim {
  opacity: 0.4;
  transition: opacity 0.4s;
}

.parente-rc.dim:hover {
  opacity: 1;
}

/* Card header */
.parente-rh {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 14px 20px;
  border-bottom: 1px solid var(--sh-bdr);
  position: relative;
}

.parente-rh::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  border-radius: 0 4px 4px 0;
}

.parente-rh.kaaga::before { background: var(--sh-gold); }
.parente-rh.cousin::before { background: var(--sh-blue); }
.parente-rh.cross::before { background: var(--sh-green); }
.parente-rh.uncle::before { background: var(--sh-terra); }
.parente-rh.matri::before { background: #B070FF; }
.parente-rh.sibling::before { background: var(--sh-txt); }

.parente-rh-l {
  display: flex;
  align-items: center;
  gap: 11px;
}

.parente-ci {
  width: 36px;
  height: 36px;
  border-radius: 9px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.1rem;
}

.parente-rh.kaaga .parente-ci { background: var(--sh-gold-d); }
.parente-rh.cousin .parente-ci { background: rgba(112,144,255,0.1); }
.parente-rh.cross .parente-ci { background: rgba(80,232,152,0.1); }
.parente-rh.uncle .parente-ci { background: var(--sh-terra-d); }
.parente-rh.matri .parente-ci { background: rgba(176,112,255,0.1); }
.parente-rh.sibling .parente-ci { background: rgba(236,232,224,0.1); }

.parente-cn {
  font-family: var(--sh-serif);
  font-size: 1.4rem;
  font-weight: 700;
  letter-spacing: 0.5px;
}

.parente-rh.kaaga .parente-cn { color: var(--sh-gold); }
.parente-rh.cousin .parente-cn { color: var(--sh-blue); }
.parente-rh.cross .parente-cn { color: var(--sh-green); }
.parente-rh.uncle .parente-cn { color: var(--sh-terra); }
.parente-rh.matri .parente-cn { color: #B070FF; }
.parente-rh.sibling .parente-cn { color: var(--sh-txt); }

.parente-ct {
  font-size: 0.5rem;
  text-transform: uppercase;
  letter-spacing: 1.3px;
  padding: 3px 9px;
  border-radius: 5px;
  font-weight: 600;
  margin-top: 2px;
  display: inline-block;
}

.parente-rh.kaaga .parente-ct { background: var(--sh-gold-d); color: var(--sh-gold); }
.parente-rh.cousin .parente-ct { background: rgba(112,144,255,0.1); color: var(--sh-blue); }
.parente-rh.cross .parente-ct { background: rgba(80,232,152,0.1); color: var(--sh-green); }
.parente-rh.uncle .parente-ct { background: var(--sh-terra-d); color: var(--sh-terra); }
.parente-rh.matri .parente-ct { background: rgba(176,112,255,0.1); color: #B070FF; }
.parente-rh.sibling .parente-ct { background: rgba(236,232,224,0.1); color: var(--sh-txt); }

.parente-db {
  text-align: center;
}

.parente-dv {
  font-size: 1.3rem;
  font-weight: 700;
  color: var(--sh-t2);
  line-height: 1;
}

.parente-dl {
  font-size: 0.46rem;
  text-transform: uppercase;
  letter-spacing: 1.3px;
  color: var(--sh-t3);
  margin-top: 2px;
}

/* Card body */
.parente-rb {
  padding: 20px;
}

/* Relation row */
.parente-rr {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 10px 12px;
  border-radius: 8px;
  transition: background 0.2s;
}

.parente-rr:hover {
  background: rgba(255,255,255,0.012);
}

.parente-rw {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 155px;
  flex-shrink: 0;
}

.parente-ra {
  width: 30px;
  height: 30px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--sh-serif);
  font-size: 0.66rem;
  font-weight: 700;
}

.parente-ra.f {
  background: rgba(204,160,238,0.1);
  color: #CCA0EE;
}

.parente-ra.m {
  background: rgba(114,180,238,0.1);
  color: #72B4EE;
}

.parente-rn {
  font-size: 0.8rem;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 110px;
  color: var(--sh-txt);
}

.parente-arrow {
  color: var(--sh-t3);
  flex-shrink: 0;
  display: flex;
  align-items: center;
}

.parente-rt {
  flex: 1;
  text-align: center;
}

/* Songhoy term */
.parente-sg {
  font-family: var(--sh-serif);
  font-weight: 800;
  letter-spacing: 0.3px;
  line-height: 1.15;
  transition: text-shadow 0.3s;
}

.parente-sg:hover {
  text-shadow: 0 0 24px currentColor;
}

.parente-sg.xl {
  font-size: 1.65rem;
}

.parente-sg.lg {
  font-size: 1.3rem;
}

.parente-sg.c1 {
  color: var(--sh-cyan);
}

.parente-sg.c2 {
  color: var(--sh-gold);
}

.parente-td {
  font-size: 0.68rem;
  color: var(--sh-t3);
  margin-top: 3px;
}

.parente-sp {
  height: 1px;
  background: var(--sh-bdr);
  margin: 2px 12px;
}

/* Additional terms */
.parente-add {
  margin-top: 12px;
  padding: 10px;
  background: rgba(255,255,255,0.02);
  border-radius: 8px;
  border: 1px dashed var(--sh-bdr2);
}

.parente-add-label {
  font-size: 0.68rem;
  color: var(--sh-t3);
  font-style: italic;
  margin-bottom: 6px;
}

/* â”€â”€ Heritage Path â”€â”€ */
.parente-hp {
  margin-top: 18px;
  padding-top: 18px;
  border-top: 1px solid var(--sh-bdr);
}

.parente-hp-l {
  font-size: 0.52rem;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: var(--sh-t3);
  font-weight: 600;
  margin-bottom: 14px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.parente-hp-l::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--sh-bdr);
}

.parente-hp-t {
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding: 6px 0 2px;
  overflow-x: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--sh-elev) transparent;
}

/* Node */
.parente-nd {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  flex-shrink: 0;
  animation: sh-pop 0.45s cubic-bezier(0.34, 1.56, 0.64, 1) both;
}

.parente-nd:nth-child(1)  { animation-delay: 0.10s; }
.parente-nd:nth-child(3)  { animation-delay: 0.22s; }
.parente-nd:nth-child(5)  { animation-delay: 0.34s; }
.parente-nd:nth-child(7)  { animation-delay: 0.46s; }
.parente-nd:nth-child(9)  { animation-delay: 0.58s; }
.parente-nd:nth-child(11) { animation-delay: 0.70s; }
.parente-nd:nth-child(13) { animation-delay: 0.82s; }

.parente-nc {
  width: 46px;
  height: 46px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--sh-serif);
  font-size: 0.85rem;
  font-weight: 700;
  border: 2px solid var(--sh-bdr2);
  background: var(--sh-elev);
  transition: all 0.3s;
  position: relative;
  cursor: default;
  color: var(--sh-txt);
}

.parente-nc:hover {
  transform: scale(1.16);
  z-index: 2;
}

.parente-nd.src .parente-nc {
  background: linear-gradient(140deg, #0C2030, #164060);
  border-color: var(--sh-cyan);
  color: var(--sh-cyan);
  box-shadow: 0 0 20px var(--sh-cyan-g);
}

.parente-nd.tgt .parente-nc {
  background: linear-gradient(140deg, #302008, #4A3010);
  border-color: var(--sh-gold);
  color: var(--sh-gold);
  box-shadow: 0 0 20px var(--sh-gold-g);
}

.parente-nd.anc .parente-nc {
  border-color: var(--sh-terra);
  background: linear-gradient(140deg, #240E04, #3A1808);
  color: var(--sh-terra);
}

.parente-nd.anc .parente-nc::after {
  content: '\2605';
  position: absolute;
  top: -5px;
  right: -2px;
  font-size: 0.58rem;
  color: var(--sh-terra);
  filter: drop-shadow(0 0 4px rgba(224,132,90,0.6));
}

.parente-nn {
  font-size: 0.56rem;
  color: var(--sh-t2);
  max-width: 60px;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.parente-ng {
  font-size: 0.48rem;
  color: var(--sh-t3);
}

/* Connector */
.parente-co {
  width: 22px;
  height: 2px;
  flex-shrink: 0;
  margin: 23px 4px 0;
  position: relative;
  background: linear-gradient(90deg, rgba(255,255,255,0.05), rgba(255,255,255,0.13), rgba(255,255,255,0.05));
  animation: sh-rise 0.3s ease-out both;
}

.parente-co::after {
  content: '\203A';
  position: absolute;
  right: -2px;
  top: -8px;
  font-size: 0.72rem;
  color: var(--sh-t3);
}

.parente-co:nth-child(2)  { animation-delay: 0.16s; }
.parente-co:nth-child(4)  { animation-delay: 0.28s; }
.parente-co:nth-child(6)  { animation-delay: 0.40s; }
.parente-co:nth-child(8)  { animation-delay: 0.52s; }
.parente-co:nth-child(10) { animation-delay: 0.64s; }
.parente-co:nth-child(12) { animation-delay: 0.76s; }

/* Ancestor box */
.parente-ab {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 12px;
  padding: 9px 13px;
  border-radius: 8px;
  background: var(--sh-terra-d);
  border: 1px solid rgba(224,132,90,0.1);
}

.parente-ab .parente-ab-st {
  color: var(--sh-terra);
  font-size: 0.78rem;
  flex-shrink: 0;
}

.parente-ab p {
  font-size: 0.72rem;
  color: var(--sh-t2);
  margin: 0;
}

.parente-ab b {
  color: var(--sh-terra);
  font-weight: 600;
}

/* â”€â”€ Tree button â”€â”€ */
.parente-tree-btn {
  display: block;
  margin: 10px auto 0;
  padding: 6px 14px;
  background: transparent;
  border: 1px dashed var(--sh-bdr2);
  border-radius: 6px;
  color: var(--sh-t2);
  font-size: 0.72rem;
  cursor: pointer;
  transition: border-color 0.2s, color 0.2s, box-shadow 0.2s;
}

.parente-tree-btn:hover {
  border-color: var(--sh-gold);
  color: var(--sh-gold);
  box-shadow: 0 0 6px rgba(212, 168, 83, 0.15);
}

/* â”€â”€ Animations â”€â”€ */
@keyframes sh-rise {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes sh-pop {
  from { opacity: 0; transform: scale(0.6); }
  to { opacity: 1; transform: scale(1); }
}

/* â”€â”€ Responsive â€” Parente â”€â”€ */
@media (max-width: 680px) {
  .parente-sel {
    flex-direction: column;
    gap: 6px;
  }

  .parente-sw {
    margin: -5px 0;
    transform: rotate(90deg);
    align-self: center;
  }

  .parente-sw:hover {
    transform: rotate(270deg);
  }

  .parente-pc-nm {
    max-width: 200px;
  }

  .parente-rr {
    flex-wrap: wrap;
  }

  .parente-rw {
    width: auto;
  }

  .parente-sg.xl {
    font-size: 1.15rem;
  }

  .parente-sg.lg {
    font-size: 1rem;
  }

  .parente-hp-t {
    justify-content: flex-start;
  }
}

/* ================================================================
   Fiche Page â€” Sahel Heritage Theme
   ================================================================ */

.fiche-sh {
  --sh-void: #070A14;
  --sh-deep: #0C1020;
  --sh-card: #111830;
  --sh-card-h: #161E3A;
  --sh-elev: #1A2344;
  --sh-gold: #D4A853;
  --sh-gold-d: rgba(212,168,83,.10);
  --sh-gold-g: rgba(212,168,83,.22);
  --sh-terra: #E0845A;
  --sh-terra-d: rgba(224,132,90,.07);
  --sh-cyan: #48E8D4;
  --sh-cyan-d: rgba(72,232,212,.07);
  --sh-cyan-g: rgba(72,232,212,.16);
  --sh-blue: #7090FF;
  --sh-blue-d: rgba(112,144,255,.08);
  --sh-green: #5ACD8A;
  --sh-green-d: rgba(90,205,138,.08);
  --sh-violet: #CCA0EE;
  --sh-violet-d: rgba(204,160,238,.08);
  --sh-txt: #ECE8E0;
  --sh-t2: #969AB2;
  --sh-t3: #4E5370;
  --sh-bdr: rgba(255,255,255,0.05);
  --sh-bdr2: rgba(255,255,255,0.09);
  --sh-serif: 'Playfair Display', Georgia, serif;
  --sh-sans: 'Nunito Sans', system-ui, sans-serif;
  --sh-shadow: 0 2px 12px rgba(0,0,0,.3);
  --sh-shadow-h: 0 8px 30px rgba(0,0,0,.4);
  --sh-note-bg: rgba(212,168,83,.06);
  --sh-note-bdr: rgba(212,168,83,.18);
  --sh-bar-track: rgba(255,255,255,.08);
}

/* â”€â”€ Fiche Tabs â”€â”€ */
.fiche-sh .fiche-tabs {
  display: flex;
  align-items: center;
  gap: 0;
  margin-bottom: 20px;
  position: relative;
}

.fiche-sh .fiche-tab {
  flex: 1;
  padding: 11px 0;
  font-size: .78rem;
  font-weight: 600;
  letter-spacing: .5px;
  color: var(--sh-t3);
  cursor: pointer;
  position: relative;
  transition: color .3s;
  border-bottom: 2px solid var(--sh-bdr);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 7px;
}

.fiche-sh .fiche-tab.on {
  color: var(--sh-gold);
  border-bottom-color: var(--sh-gold);
}

.fiche-sh .fiche-tab:hover:not(.on) {
  color: var(--sh-t2);
}

.fiche-sh .fiche-tab-ico {
  width: 16px;
  height: 16px;
  flex-shrink: 0;
  stroke: currentColor;
  fill: none;
}

/* â”€â”€ Fiche Breadcrumb â”€â”€ */
.fiche-sh .fiche-bc {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-bottom: 18px;
  flex-wrap: wrap;
}

.fiche-sh .fiche-bc-item {
  font-size: .7rem;
  padding: 4px 11px;
  border-radius: 20px;
  background: var(--sh-card);
  border: 1px solid var(--sh-bdr2);
  color: var(--sh-t2);
  cursor: pointer;
  transition: .25s;
  white-space: nowrap;
  display: inline-flex;
  align-items: center;
  gap: 4px;
}

.fiche-sh .fiche-bc-item:hover {
  background: var(--sh-card-h);
  color: var(--sh-txt);
  border-color: rgba(255,255,255,.12);
}

.fiche-sh .fiche-bc-item.on {
  background: var(--sh-cyan-d);
  border-color: rgba(72,232,212,.2);
  color: var(--sh-cyan);
  font-weight: 600;
}

.fiche-sh .fiche-bc-ch {
  font-size: .55rem;
  color: var(--sh-t3);
}

/* â”€â”€ Fiche Portrait â”€â”€ */
.fiche-sh .fiche-portrait {
  background: var(--sh-card);
  border: 1px solid var(--sh-bdr2);
  border-radius: 18px;
  padding: 20px 22px 16px;
  position: relative;
  overflow: hidden;
  margin-bottom: 10px;
  box-shadow: var(--sh-shadow);
  animation: fiche-rise .5s ease-out both;
  transition: background .4s, border .4s, box-shadow .4s;
}

.fiche-sh .fiche-portrait::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 3px;
  background: linear-gradient(90deg, var(--sh-cyan), var(--sh-blue));
}

.fiche-sh .fiche-portrait-inner {
  display: flex;
  align-items: center;
  gap: 18px;
}

/* Avatar main */
.fiche-sh .fiche-av {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  flex-shrink: 0;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--sh-serif);
  font-size: 1.2rem;
  font-weight: 700;
  box-shadow: 0 0 24px var(--sh-cyan-g);
}

.fiche-sh .fiche-av.m {
  background: linear-gradient(140deg, #0E2238, #1C3860);
  color: #72B4EE;
  border: 2px solid rgba(114,180,238,.25);
}

.fiche-sh .fiche-av.f {
  background: linear-gradient(140deg, #28123E, #402060);
  color: #CCA0EE;
  border: 2px solid rgba(204,160,238,.25);
}

.fiche-sh .fiche-av-photo {
  width: 100%;
  height: 100%;
  object-fit: cover;
  border-radius: 50%;
}

.fiche-sh .fiche-av-gb {
  position: absolute;
  bottom: -3px;
  right: -3px;
  font-family: var(--sh-sans);
  font-size: .48rem;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 6px;
  background: rgba(72,232,212,.15);
  color: var(--sh-cyan);
}

/* Portrait info */
.fiche-sh .fiche-portrait-info {
  flex: 1;
  min-width: 0;
}

.fiche-sh .fiche-portrait-name {
  font-family: var(--sh-serif);
  font-size: 1.5rem;
  font-weight: 700;
  line-height: 1.2;
  letter-spacing: .3px;
  color: var(--sh-txt);
}

.fiche-sh .fiche-clan {
  font-family: var(--sh-serif);
  font-size: .95rem;
  font-weight: 400;
  font-style: italic;
  color: var(--sh-gold);
  margin-left: 6px;
}

.fiche-sh .fiche-portrait-meta {
  font-size: .72rem;
  color: var(--sh-t2);
  margin-top: 4px;
  display: flex;
  align-items: center;
  gap: 6px;
}

.fiche-sh .fiche-portrait-sex {
  font-size: .78rem;
}

.fiche-sh .fiche-portrait-note {
  font-size: .68rem;
  color: var(--sh-t3);
  margin-top: 4px;
  font-style: italic;
}

/* Generation gauge */
.fiche-sh .fiche-gen-gauge {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-top: 7px;
}

.fiche-sh .fiche-gen-bar {
  width: 100px;
  height: 5px;
  border-radius: 3px;
  background: var(--sh-bar-track);
  position: relative;
  overflow: hidden;
  flex-shrink: 0;
  transition: background .4s;
}

.fiche-sh .fiche-gen-fill {
  height: 100%;
  border-radius: 3px;
  background: linear-gradient(90deg, var(--sh-terra), var(--sh-gold));
  transition: width .6s ease-out;
}

.fiche-sh .fiche-gen-label {
  font-size: .6rem;
  color: var(--sh-t3);
  white-space: nowrap;
}

.fiche-sh .fiche-gen-label strong {
  color: var(--sh-t2);
  font-weight: 700;
}

/* â”€â”€ Note callout (PersonCard + TreePopup) â”€â”€ */
.note-callout {
  display: flex;
  align-items: flex-start;
  gap: 10px;
  margin-top: 12px;
  padding: 10px 14px;
  background: var(--sh-note-bg, rgba(212,168,83,.06));
  border: 1px solid var(--sh-note-bdr, rgba(212,168,83,.18));
  border-radius: 12px;
  position: relative;
  overflow: hidden;
  transition: background .4s, border .4s;
}

.note-callout::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  border-radius: 0 3px 3px 0;
  background: var(--sh-gold, #D4A853);
}

.note-callout-ico {
  width: 26px;
  height: 26px;
  border-radius: 7px;
  background: var(--sh-gold-d, rgba(212,168,83,.10));
  color: var(--sh-gold, #D4A853);
  display: flex;
  align-items: center;
  justify-content: center;
  flex-shrink: 0;
  font-size: 0.75rem;
  line-height: 1;
}

.note-callout-txt {
  font-size: 0.76rem;
  color: var(--sh-t2, #969AB2);
  line-height: 1.55;
  margin: 0;
  padding-top: 2px;
}

/* â”€â”€ Note hint (petites cartes : parent, Ã©pouse, enfant) â”€â”€ */
.note-hint {
  width: 100%;
  font-size: 0.7rem;
  color: var(--sh-gold, #D4A853);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  margin-top: 3px;
  opacity: 0.85;
  line-height: 1.4;
}

/* Portrait stats */
.fiche-sh .fiche-portrait-stats {
  display: flex;
  gap: 14px;
  margin-left: auto;
  flex-shrink: 0;
}

.fiche-sh .fiche-ps {
  text-align: center;
  min-width: 48px;
}

.fiche-sh .fiche-ps-n {
  font-size: 1.15rem;
  font-weight: 700;
  line-height: 1;
}

.fiche-sh .fiche-ps-l {
  font-size: .44rem;
  text-transform: uppercase;
  letter-spacing: 1.2px;
  color: var(--sh-t3);
  margin-top: 2px;
}

.fiche-sh .fiche-ps.sp .fiche-ps-n {
  color: var(--sh-gold);
}

.fiche-sh .fiche-ps.ch .fiche-ps-n {
  color: var(--sh-green);
}

/* â”€â”€ Section structure â”€â”€ */
.fiche-sh .fiche-section {
  margin-top: 0;
  position: relative;
  animation: fiche-rise .5s ease-out both;
}

.fiche-sh .fiche-section:nth-child(2) { animation-delay: .08s; }
.fiche-sh .fiche-section:nth-child(3) { animation-delay: .16s; }
.fiche-sh .fiche-section:nth-child(4) { animation-delay: .24s; }

/* Vertical connector */
.fiche-sh .fiche-conn {
  width: 1px;
  height: 18px;
  margin: 0 auto;
  border-left: 2px dashed var(--sh-bdr2);
  position: relative;
}

.fiche-sh .fiche-conn.c-terra { border-color: rgba(224,132,90,.2); }
.fiche-sh .fiche-conn.c-gold { border-color: rgba(212,168,83,.2); }
.fiche-sh .fiche-conn.c-green { border-color: rgba(90,205,138,.2); }

.fiche-sh .fiche-conn::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: -5px;
  width: 8px;
  height: 8px;
  border-radius: 50%;
  transition: background .4s;
}

.fiche-sh .fiche-conn.c-terra::after { background: var(--sh-terra); }
.fiche-sh .fiche-conn.c-gold::after { background: var(--sh-gold); }
.fiche-sh .fiche-conn.c-green::after { background: var(--sh-green); }

/* Section header */
.fiche-sh .fiche-sh-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin: 14px 0 12px;
}

.fiche-sh .fiche-sh-header::before,
.fiche-sh .fiche-sh-header::after {
  content: '';
  flex: 1;
  height: 1px;
  background: var(--sh-bdr);
}

.fiche-sh .fiche-sh-txt {
  font-size: .5rem;
  text-transform: uppercase;
  letter-spacing: 2.5px;
  font-weight: 700;
  color: var(--sh-t3);
  white-space: nowrap;
  display: flex;
  align-items: center;
  gap: 6px;
}

.fiche-sh .fiche-sh-ico {
  font-size: .75rem;
  opacity: .7;
}

.fiche-sh .fiche-sh-count {
  font-size: .55rem;
  padding: 1px 7px;
  border-radius: 8px;
  font-weight: 700;
  margin-left: 2px;
}

.fiche-sh .fiche-sh-header.parents .fiche-sh-txt { color: var(--sh-terra); }
.fiche-sh .fiche-sh-header.parents .fiche-sh-count { background: var(--sh-terra-d); color: var(--sh-terra); }
.fiche-sh .fiche-sh-header.spouses .fiche-sh-txt { color: var(--sh-gold); }
.fiche-sh .fiche-sh-header.spouses .fiche-sh-count { background: var(--sh-gold-d); color: var(--sh-gold); }
.fiche-sh .fiche-sh-header.children .fiche-sh-txt { color: var(--sh-green); }
.fiche-sh .fiche-sh-header.children .fiche-sh-count { background: var(--sh-green-d); color: var(--sh-green); }

/* â”€â”€ Parent cards â”€â”€ */
.fiche-sh .fiche-parents-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

.fiche-sh .fiche-p-card {
  background: var(--sh-card);
  border: 1px solid var(--sh-bdr2);
  border-radius: 14px;
  padding: 14px 14px;
  display: flex;
  align-items: center;
  gap: 11px;
  position: relative;
  overflow: hidden;
  cursor: pointer;
  box-shadow: var(--sh-shadow);
  transition: all .3s;
}

.fiche-sh .fiche-p-card.static {
  cursor: default;
}

.fiche-sh .fiche-p-card:not(.static):hover {
  background: var(--sh-card-h);
  transform: translateY(-2px);
  box-shadow: var(--sh-shadow-h);
}

.fiche-sh .fiche-p-card::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  border-radius: 0 3px 3px 0;
}

.fiche-sh .fiche-p-card.father::before { background: var(--sh-blue); }
.fiche-sh .fiche-p-card.mother::before { background: var(--sh-violet); }

/* Avatar small (parents) */
.fiche-sh .fiche-av-sm {
  width: 38px;
  height: 38px;
  border-radius: 50%;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--sh-serif);
  font-size: .78rem;
  font-weight: 700;
  position: relative;
}

.fiche-sh .fiche-av-sm.m {
  background: rgba(114,180,238,.1);
  color: #72B4EE;
  box-shadow: 0 0 0 1.5px rgba(114,180,238,.15);
}

.fiche-sh .fiche-av-sm.f {
  background: rgba(204,160,238,.1);
  color: #CCA0EE;
  box-shadow: 0 0 0 1.5px rgba(204,160,238,.15);
}

.fiche-sh .fiche-av-sm-gb {
  position: absolute;
  bottom: -2px;
  right: -3px;
  font-family: var(--sh-sans);
  font-size: .4rem;
  font-weight: 700;
  padding: 1px 4px;
  border-radius: 4px;
}

.fiche-sh .fiche-av-sm.m .fiche-av-sm-gb {
  background: rgba(114,180,238,.15);
  color: #72B4EE;
}

.fiche-sh .fiche-av-sm.f .fiche-av-sm-gb {
  background: rgba(204,160,238,.15);
  color: #CCA0EE;
}

.fiche-sh .fiche-p-info {
  flex: 1;
  min-width: 0;
}

.fiche-sh .fiche-p-name {
  font-family: var(--sh-serif);
  font-size: .85rem;
  font-weight: 600;
  line-height: 1.3;
  color: var(--sh-txt);
}

.fiche-sh .fiche-p-role {
  font-size: .62rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  margin-top: 2px;
}

.fiche-sh .fiche-p-card.father .fiche-p-role { color: var(--sh-blue); }
.fiche-sh .fiche-p-card.mother .fiche-p-role { color: var(--sh-violet); }

.fiche-sh .fiche-p-arrow {
  color: var(--sh-t3);
  font-size: .7rem;
  flex-shrink: 0;
  transition: transform .2s;
}

.fiche-sh .fiche-p-card:hover .fiche-p-arrow {
  transform: translateX(3px);
  color: var(--sh-t2);
}

/* â”€â”€ Spouse cards â”€â”€ */
.fiche-sh .fiche-spouses-list {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.fiche-sh .fiche-sp-card {
  background: var(--sh-card);
  border: 1px solid var(--sh-bdr2);
  border-radius: 14px;
  padding: 12px 14px;
  display: flex;
  align-items: center;
  gap: 10px;
  position: relative;
  overflow: hidden;
  cursor: pointer;
  box-shadow: var(--sh-shadow);
  transition: all .3s;
}

.fiche-sh .fiche-sp-card.static {
  cursor: default;
}

.fiche-sh .fiche-sp-card:not(.static):hover {
  background: var(--sh-card-h);
  transform: translateY(-1px);
  box-shadow: var(--sh-shadow-h);
}

.fiche-sh .fiche-sp-card::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 3px;
  border-radius: 0 3px 3px 0;
  background: var(--sh-gold);
}

.fiche-sh .fiche-sp-num {
  width: 24px;
  height: 24px;
  border-radius: 50%;
  flex-shrink: 0;
  background: var(--sh-gold-d);
  color: var(--sh-gold);
  font-size: .62rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
}

.fiche-sh .fiche-av-sp {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--sh-serif);
  font-size: .72rem;
  font-weight: 700;
  background: rgba(204,160,238,.1);
  color: #CCA0EE;
  box-shadow: 0 0 0 1.5px rgba(204,160,238,.12);
}

.fiche-sh .fiche-sp-info {
  flex: 1;
  min-width: 0;
}

.fiche-sh .fiche-sp-name {
  font-family: var(--sh-serif);
  font-size: .88rem;
  font-weight: 600;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--sh-txt);
}

.fiche-sh .fiche-sp-sub {
  font-size: .62rem;
  color: var(--sh-t2);
  margin-top: 1px;
}

.fiche-sh .fiche-sp-children {
  font-size: .56rem;
  color: var(--sh-green);
  background: var(--sh-green-d);
  border: 1px solid rgba(90,205,138,.15);
  padding: 3px 9px;
  border-radius: 6px;
  font-weight: 600;
  flex-shrink: 0;
  white-space: nowrap;
}

.fiche-sh .fiche-sp-children.zero {
  color: var(--sh-t3);
  background: var(--sh-elev, #1A2344);
  border: 1px solid var(--sh-bdr2);
}

.fiche-sh .fiche-sp-arrow {
  color: var(--sh-t3);
  font-size: .7rem;
  flex-shrink: 0;
  transition: transform .2s;
}

.fiche-sh .fiche-sp-card:hover .fiche-sp-arrow {
  transform: translateX(3px);
  color: var(--sh-t2);
}

/* â”€â”€ Add button â”€â”€ */
.fiche-sh .fiche-add-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  width: 100%;
  padding: 12px 16px;
  border-radius: 12px;
  border: 1px dashed rgba(212,168,83,.45);
  background: rgba(212,168,83,.06);
  color: var(--sh-gold, #D4A853);
  font-size: .82rem;
  font-family: var(--sh-sans);
  cursor: pointer;
  transition: .25s;
  margin-top: 8px;
}

.fiche-sh .fiche-add-btn:hover {
  border-color: rgba(212,168,83,.7);
  color: #e8bf6a;
  background: rgba(212,168,83,.12);
}

.fiche-sh .fiche-add-ico {
  font-size: 1.1rem;
  font-weight: 600;
}

/* â”€â”€ Children: Wife group accordion â”€â”€ */
.fiche-sh .fiche-wife-group {
  margin-bottom: 14px;
}

.fiche-sh .fiche-wg-header {
  display: flex;
  align-items: center;
  gap: 7px;
  padding: 8px 12px;
  border-radius: 10px;
  background: var(--sh-card);
  border: 1px solid var(--sh-bdr);
  cursor: pointer;
  box-shadow: var(--sh-shadow);
  transition: all .2s;
  margin-bottom: 8px;
}

.fiche-sh .fiche-wg-header:hover {
  background: var(--sh-card-h);
}

.fiche-sh .fiche-wg-av {
  width: 22px;
  height: 22px;
  border-radius: 50%;
  flex-shrink: 0;
  background: rgba(204,160,238,.08);
  color: #CCA0EE;
  font-family: var(--sh-serif);
  font-size: .5rem;
  font-weight: 700;
  display: flex;
  align-items: center;
  justify-content: center;
}

.fiche-sh .fiche-wg-name {
  font-size: .72rem;
  font-weight: 500;
  color: var(--sh-t2);
  flex: 1;
}

.fiche-sh .fiche-wg-count {
  font-size: .55rem;
  color: var(--sh-green);
  background: var(--sh-green-d);
  padding: 2px 8px;
  border-radius: 5px;
  font-weight: 700;
}

.fiche-sh .fiche-wg-chev {
  color: var(--sh-t3);
  font-size: .6rem;
  transition: transform .2s;
}

.fiche-sh .fiche-wg-header.open .fiche-wg-chev {
  transform: rotate(90deg);
}

/* â”€â”€ Children grid â”€â”€ */
.fiche-sh .fiche-kids-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  padding-left: 4px;
}

.fiche-sh .fiche-kid {
  background: var(--sh-card);
  border: 1px solid var(--sh-bdr2);
  border-radius: 10px;
  padding: 9px 10px;
  display: flex;
  align-items: center;
  gap: 7px;
  cursor: pointer;
  box-shadow: var(--sh-shadow);
  transition: all .2s;
  position: relative;
  overflow: hidden;
}

.fiche-sh .fiche-kid:hover {
  background: var(--sh-card-h);
  transform: translateY(-1px);
}

.fiche-sh .fiche-kid::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 2px;
  border-radius: 0 2px 2px 0;
  background: var(--sh-green);
}

.fiche-sh .fiche-kid.boy::before {
  background: var(--sh-blue);
}

.fiche-sh .fiche-kid.girl::before {
  background: var(--sh-violet);
}

.fiche-sh .fiche-av-kid {
  width: 26px;
  height: 26px;
  border-radius: 50%;
  flex-shrink: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-family: var(--sh-serif);
  font-size: .52rem;
  font-weight: 700;
}

.fiche-sh .fiche-av-kid.m {
  background: rgba(114,180,238,.12);
  color: #72B4EE;
  box-shadow: 0 0 0 1.5px rgba(114,180,238,.18);
}

.fiche-sh .fiche-av-kid.f {
  background: rgba(204,160,238,.12);
  color: #CCA0EE;
  box-shadow: 0 0 0 1.5px rgba(204,160,238,.18);
}

.fiche-sh .fiche-kid-info {
  display: flex;
  align-items: center;
  gap: 5px;
  min-width: 0;
  flex: 1;
}

.fiche-sh .fiche-kid-name {
  font-size: .72rem;
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  color: var(--sh-txt);
}

/* â”€â”€ Gender tags & icons â”€â”€ */
.fiche-sh .fiche-gender-tag {
  font-size: .6rem;
  flex-shrink: 0;
  line-height: 1;
}

.fiche-sh .fiche-gender-tag.m {
  color: #72B4EE;
}

.fiche-sh .fiche-gender-tag.f {
  color: #CCA0EE;
}

.fiche-sh .fiche-gender-ico {
  font-size: .7rem;
  margin-right: 1px;
}

.fiche-sh .fiche-gender-ico.m {
  color: #72B4EE;
}

.fiche-sh .fiche-gender-ico.f {
  color: #CCA0EE;
}

/* Spouse avatar â€” gender-aware */
.fiche-sh .fiche-av-sp.m {
  background: rgba(114,180,238,.1);
  color: #72B4EE;
  box-shadow: 0 0 0 1.5px rgba(114,180,238,.12);
}

.fiche-sh .fiche-av-sp.f {
  background: rgba(204,160,238,.1);
  color: #CCA0EE;
  box-shadow: 0 0 0 1.5px rgba(204,160,238,.12);
}

/* â”€â”€ Animation â”€â”€ */
@keyframes fiche-rise {
  from { opacity: 0; transform: translateY(14px); }
  to { opacity: 1; transform: translateY(0); }
}

/* â”€â”€ Responsive â€” Tablet â”€â”€ */
@media (max-width: 960px) {
  .fiche-sh .fiche-portrait-stats {
    gap: 12px;
  }

  .fiche-sh .fiche-ps-n {
    font-size: 1rem;
  }
}

/* â”€â”€ Responsive â€” Mobile â”€â”€ */
@media (max-width: 640px) {
  .fiche-sh .fiche-portrait {
    padding: 16px 14px 12px;
  }

  .fiche-sh .fiche-portrait-inner {
    flex-wrap: wrap;
  }

  .fiche-sh .fiche-portrait-stats {
    width: 100%;
    justify-content: flex-start;
    gap: 20px;
    margin-left: 0;
    margin-top: 8px;
    padding-top: 8px;
    border-top: 1px solid var(--sh-bdr2);
  }

  .fiche-sh .fiche-portrait-name {
    font-size: 1.15rem;
  }

  .fiche-sh .fiche-clan {
    font-size: .78rem;
  }

  .fiche-sh .fiche-gen-bar {
    width: 80px;
  }

  .fiche-sh .fiche-parents-grid {
    grid-template-columns: 1fr;
  }

  .fiche-sh .fiche-kids-grid {
    grid-template-columns: 1fr 1fr;
  }

  .fiche-sh .fiche-av {
    width: 48px;
    height: 48px;
    font-size: .95rem;
  }

  .fiche-sh .fiche-bc {
    flex-wrap: nowrap;
    overflow-x: auto;
    scrollbar-width: none;
    -webkit-overflow-scrolling: touch;
  }

  .fiche-sh .fiche-bc::-webkit-scrollbar {
    display: none;
  }
}

/* ================================================================
   Connection Status Indicator
   ================================================================ */

.conn-status {
  display: flex;
  align-items: center;
  gap: 6px;
  padding: 4px 16px;
  font-size: .68rem;
  font-weight: 500;
  animation: conn-slide .3s ease-out;
}

.conn-status.offline {
  background: rgba(239,68,68,.12);
  color: #f87171;
}

.conn-status.slow {
  background: rgba(245,158,11,.1);
  color: #fbbf24;
}

.conn-status.medium {
  background: rgba(72,232,212,.06);
  color: #48E8D4;
}

.conn-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  flex-shrink: 0;
}

.conn-status.offline .conn-dot {
  background: #ef4444;
  box-shadow: 0 0 6px rgba(239,68,68,.5);
}

.conn-status.slow .conn-dot {
  background: #f59e0b;
  box-shadow: 0 0 6px rgba(245,158,11,.5);
  animation: conn-pulse 2s ease infinite;
}

.conn-status.medium .conn-dot {
  background: #48E8D4;
}

.conn-label {
  white-space: nowrap;
}

@keyframes conn-slide {
  from { opacity: 0; transform: translateY(-100%); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes conn-pulse {
  0%,100% { opacity: 1; }
  50% { opacity: .4; }
}

/* ================================================================
   Skeleton Loaders
   ================================================================ */

.skel-wrap {
  padding: 16px 0;
  animation: skel-in .3s ease;
}

@keyframes skel-in {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes skel-shimmer {
  0% { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}

.skel-line,
.skel-circle,
.skel-block,
.skel-card,
.skel-card-sm {
  background: linear-gradient(90deg, var(--card) 25%, var(--card-hover) 50%, var(--card) 75%);
  background-size: 200% 100%;
  animation: skel-shimmer 1.5s ease infinite;
  border-radius: 8px;
}

.skel-line {
  height: 12px;
  margin-bottom: 8px;
}

.skel-line.skel-sm {
  height: 8px;
}

.skel-w70 { width: 70%; }
.skel-w60 { width: 60%; }
.skel-w50 { width: 50%; }
.skel-w40 { width: 40%; }
.skel-w30 { width: 30%; }

.skel-circle {
  border-radius: 50%;
  flex-shrink: 0;
}

.skel-av {
  width: 60px;
  height: 60px;
}

.skel-sm-av {
  width: 38px;
  height: 38px;
}

.skel-portrait {
  display: flex;
  align-items: center;
  gap: 16px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 18px;
  padding: 20px 24px;
  margin-bottom: 20px;
}

.skel-info {
  flex: 1;
}

.skel-stats {
  display: flex;
  gap: 12px;
  margin-left: auto;
}

.skel-stat {
  width: 48px;
  height: 36px;
  border-radius: 8px;
}

.skel-section {
  margin-top: 20px;
}

.skel-header {
  height: 8px;
  margin: 0 auto 14px;
}

.skel-grid2 {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

.skel-grid3 {
  display: grid;
  grid-template-columns: 1fr 1fr 1fr;
  gap: 8px;
}

.skel-card {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 14px 16px;
  border-radius: 14px;
}

.skel-card.skel-full {
  margin-bottom: 8px;
}

.skel-card-sm {
  height: 44px;
  border-radius: 10px;
}

/* ================================================================
   Font Optimization â€” Low Connectivity
   ================================================================ */

@media (prefers-reduced-data: reduce) {
  body,
  .fiche-sh .fiche-portrait-name,
  .fiche-sh .fiche-clan,
  .fiche-sh .fiche-p-name,
  .fiche-sh .fiche-sp-name {
    font-family: system-ui, -apple-system, sans-serif !important;
  }
}

/* ================================================================
   LIGHT THEME â€” Sahel-inspired warm palette
   Applied via html[data-theme="light"]
   ================================================================ */

html[data-theme="light"] {
  --bg: #F5F2EC;
  --card: #FFFFFF;
  --card-hover: #F8F6F1;
  --surface: #FAF8F4;
  --text: #1C1C28;
  --text-secondary: #5A5F7A;
  --text-muted: #8A8FA5;
  --border: rgba(0,0,0,0.08);
  --shadow: 0 4px 24px rgba(0,0,0,0.06);
  --success: #059669;
  --gen1-bg: rgba(245,158,11,0.22);
  --gen2-bg: rgba(16,185,129,0.22);
  --gen3-bg: rgba(99,102,241,0.22);
  --gen4-bg: rgba(236,72,153,0.22);
  --gen5-bg: rgba(139,92,246,0.22);
  --gen6-bg: rgba(20,184,166,0.22);
  --gen7-bg: rgba(249,115,22,0.22);
  --gen0-bg: rgba(147,51,234,0.22);
}

/* Fiche Sahel Heritage â€” light overrides */
html[data-theme="light"] .fiche-sh {
  --sh-void: #EDE9E0;
  --sh-deep: #F5F0E6;
  --sh-card: #FFFFFF;
  --sh-card-h: #FFFCF6;
  --sh-elev: #FAF8F4;
  --sh-gold: #B08830;
  --sh-gold-d: rgba(176,136,48,.08);
  --sh-gold-g: rgba(176,136,48,.28);
  --sh-terra: #B85A3A;
  --sh-terra-d: rgba(184,90,58,.06);
  --sh-cyan: #18887A;
  --sh-cyan-d: rgba(24,136,122,.06);
  --sh-cyan-g: rgba(24,136,122,.22);
  --sh-blue: #2E6EB5;
  --sh-blue-d: rgba(46,110,181,.08);
  --sh-green: #2E8550;
  --sh-green-d: rgba(46,133,80,.07);
  --sh-violet: #8B5EA6;
  --sh-violet-d: rgba(139,94,166,.08);
  --sh-txt: #2C2416;
  --sh-t2: #6B6050;
  --sh-t3: #A09880;
  --sh-bdr: #E4DCD0;
  --sh-bdr2: #EDE6DA;
  --sh-shadow: 0 2px 16px rgba(100,80,40,.08);
  --sh-shadow-h: 0 6px 28px rgba(100,80,40,.13);
  --sh-note-bg: #FEF4DE;
  --sh-note-bdr: #E8D5A0;
  --sh-bar-track: #E4DCD0;
}

/* ParentÃ© page â€” light overrides */
html[data-theme="light"] .parente-page {
  --sh-void: #EDE9E0;
  --sh-deep: #F5F2EC;
  --sh-card: #FFFFFF;
  --sh-card-h: #F8F6F1;
  --sh-elev: #FAF8F4;
  --sh-gold: #92700C;
  --sh-gold-d: rgba(146,112,12,.12);
  --sh-gold-g: rgba(146,112,12,.28);
  --sh-terra: #B5572A;
  --sh-terra-d: rgba(181,87,42,.10);
  --sh-cyan: #0E7C6B;
  --sh-cyan-d: rgba(14,124,107,.10);
  --sh-cyan-g: rgba(14,124,107,.22);
  --sh-green: #16A34A;
  --sh-green-d: rgba(22,163,74,.12);
  --sh-txt: #1C1C28;
  --sh-t2: #5A5F7A;
  --sh-t3: #8A8FA5;
  --sh-bdr: rgba(0,0,0,0.06);
  --sh-bdr2: rgba(0,0,0,0.10);
}

/* ---- Hardcoded color fixes for light theme ---- */

html[data-theme="light"] .login-screen {
  background: linear-gradient(135deg, #F5F2EC 0%, #EDE9E0 50%, #E8E4DB 100%);
}
html[data-theme="light"] .login-logo h1 {
  background: linear-gradient(135deg, #1C1C28, var(--primary));
  -webkit-background-clip: text;
  background-clip: text;
}
html[data-theme="light"] .header {
  background: linear-gradient(135deg, #FFFFFF 0%, #FAF8F4 100%);
  border-bottom: 1px solid rgba(0,0,0,0.08);
}
html[data-theme="light"] .nav {
  background: rgba(245,242,236,0.95);
}
html[data-theme="light"] .modal-content {
  background: #FFFFFF;
}
html[data-theme="light"] .person-card {
  background: linear-gradient(145deg, #FFFFFF, #FAF8F4);
}

/* ---- Add buttons â€” increase visibility on light bg ---- */

html[data-theme="light"] .fiche-sh .fiche-add-btn {
  border: 1px dashed rgba(180,140,50,.55);
  background: rgba(212,168,83,.10);
  color: #9A7B2E;
}
html[data-theme="light"] .fiche-sh .fiche-add-btn:hover {
  border-color: rgba(180,140,50,.8);
  background: rgba(212,168,83,.18);
  color: #7A6020;
}
html[data-theme="light"] .add-member-card {
  border-color: rgba(0,0,0,0.18);
  color: var(--text-secondary);
}
html[data-theme="light"] .add-member-card:hover {
  border-color: var(--primary);
  background: rgba(99,102,241,0.10);
}
html[data-theme="light"] .add-first-child {
  border-color: rgba(0,0,0,0.18);
}
html[data-theme="light"] .modal-body .fiche-add-btn {
  border: 1px dashed rgba(99,102,241,.45);
  background: rgba(99,102,241,.08);
  color: #4F46E5;
}
html[data-theme="light"] .modal-body .fiche-add-btn:hover {
  border-color: rgba(99,102,241,.7);
  background: rgba(99,102,241,.14);
  color: #4338CA;
}
html[data-theme="light"] .btn-add-term {
  border-color: rgba(0,0,0,0.18);
}
html[data-theme="light"] .btn-add-term:hover {
  border-color: var(--primary);
}
html[data-theme="light"] .add-child-btn {
  box-shadow: 0 2px 8px rgba(99,102,241,0.25);
}

/* ---- Gender icons â€” darken for light bg contrast ---- */

html[data-theme="light"] .fiche-sh .fiche-gender-tag.m,
html[data-theme="light"] .fiche-sh .fiche-gender-ico.m {
  color: #2E6EB5;
}
html[data-theme="light"] .fiche-sh .fiche-gender-tag.f,
html[data-theme="light"] .fiche-sh .fiche-gender-ico.f {
  color: #8B5EA6;
}

/* ---- Avatars â€” blue/violet for light ---- */

html[data-theme="light"] .fiche-sh .fiche-av.m {
  background: linear-gradient(140deg, #D8E8F8, #C0D8F0);
  color: #2E6EB5;
  border-color: rgba(46,110,181,.2);
}
html[data-theme="light"] .fiche-sh .fiche-av.f {
  background: linear-gradient(140deg, #ECD8F0, #DCC0E8);
  color: #8B5EA6;
  border-color: rgba(139,94,166,.2);
}
html[data-theme="light"] .fiche-sh .fiche-av-sm.m {
  background: rgba(46,110,181,.1);
  color: #2E6EB5;
  box-shadow: 0 0 0 1.5px rgba(46,110,181,.15);
}
html[data-theme="light"] .fiche-sh .fiche-av-sm.f {
  background: rgba(139,94,166,.1);
  color: #8B5EA6;
  box-shadow: 0 0 0 1.5px rgba(139,94,166,.15);
}
html[data-theme="light"] .fiche-sh .fiche-av-kid.m {
  background: rgba(46,110,181,.1);
  color: #2E6EB5;
  box-shadow: 0 0 0 1.5px rgba(46,110,181,.15);
}
html[data-theme="light"] .fiche-sh .fiche-av-kid.f {
  background: rgba(139,94,166,.1);
  color: #8B5EA6;
  box-shadow: 0 0 0 1.5px rgba(139,94,166,.15);
}
html[data-theme="light"] .fiche-sh .fiche-av-sp.f {
  background: rgba(139,94,166,.1);
  color: #8B5EA6;
  box-shadow: 0 0 0 1.5px rgba(139,94,166,.12);
}
html[data-theme="light"] .fiche-sh .fiche-av-sp.m {
  background: rgba(46,110,181,.1);
  color: #2E6EB5;
  box-shadow: 0 0 0 1.5px rgba(46,110,181,.12);
}

/* ---- Zero badge â€” grey on light ---- */
html[data-theme="light"] .fiche-sh .fiche-sp-children.zero {
  background: var(--sh-elev);
  border-color: var(--sh-bdr);
}
html[data-theme="light"] .parent-card .mini-avatar.male,
html[data-theme="light"] .child-card .mini-avatar.male {
  background: rgba(59,130,246,0.35);
}
html[data-theme="light"] .parent-card .mini-avatar.female,
html[data-theme="light"] .child-card .mini-avatar.female {
  background: rgba(236,72,153,0.35);
}
html[data-theme="light"] .tree-card.male .tree-card-avatar {
  background: rgba(59,130,246,0.35);
}
html[data-theme="light"] .tree-card.female .tree-card-avatar {
  background: rgba(236,72,153,0.35);
}

/* ---- Theme toggle button ---- */

.theme-toggle-btn {
  background: rgba(255,255,255,0.08);
  border: none;
  width: 40px;
  height: 40px;
  border-radius: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all 0.2s;
  color: var(--text-secondary);
}
.theme-toggle-btn svg {
  width: 20px;
  height: 20px;
}
.theme-toggle-btn:active {
  transform: scale(0.95);
}
/* ---- Green text â€” darken for light bg contrast ---- */

html[data-theme="light"] .login-success {
  color: #059669;
}
html[data-theme="light"] .status-approved {
  color: #059669;
}
html[data-theme="light"] .btn-approve {
  color: #059669;
}
html[data-theme="light"] .btn-toggle-active.activate {
  color: #059669;
}

html[data-theme="light"] .theme-toggle-btn {
  background: rgba(0,0,0,0.06);
}
