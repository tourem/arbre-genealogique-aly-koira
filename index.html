<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<title>GÃ©nÃ©alogie - Famille Aly KoÃ¯ra</title>
<link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ³</text></svg>">
<link rel="stylesheet" href="css/styles.css">
</head>
<body>

<!-- Ã‰cran de connexion -->
<div class="login-screen" id="loginScreen">
<div class="login-container">
<div class="login-logo">
<div class="login-logo-icon">ğŸŒ³</div>
<h1>Famille Aly KoÃ¯ra</h1>
<p>Arbre gÃ©nÃ©alogique familial</p>
</div>

<div class="login-box">
<div class="login-title">
<span>ğŸ”</span>
AccÃ¨s rÃ©servÃ© Ã  la famille
</div>

<div class="login-form">
<div class="login-input-group">
<label>Mot de passe</label>
<div class="login-input-wrapper">
<input type="password" id="loginPassword" placeholder="Entrez le mot de passe" onkeypress="if(event.key==='Enter')login()">
<button class="toggle-password" onclick="togglePassword()">ğŸ‘ï¸</button>
</div>
</div>

<label class="remember-me">
<input type="checkbox" id="rememberMe">
<span class="checkmark"></span>
Se souvenir de moi
</label>

<button class="login-btn" onclick="login()">
AccÃ©der Ã  l'arbre familial
</button>

<div class="login-error" id="loginError"></div>
</div>
</div>

<div class="login-footer">
<p>ğŸ”’ Espace privÃ© familial</p>
</div>
</div>
</div>

<!-- Application principale (cachÃ©e par dÃ©faut) -->
<div class="app" id="mainApp" style="display:none">
<!-- Header -->
<header class="header">
<div class="header-top">
<div class="logo">
<div class="logo-icon">ğŸŒ³</div>
<div class="logo-text">
<h1>Famille Aly KoÃ¯ra</h1>
<span>Arbre gÃ©nÃ©alogique</span>
</div>
</div>
<button class="logout-btn" onclick="logout()" title="DÃ©connexion">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
</button>
</div>
<div class="header-stats">
<div class="header-stat">
<div class="header-stat-value" id="memberCount">-</div>
<div class="header-stat-label">Membres</div>
</div>
<div class="header-stat">
<div class="header-stat-value" id="genCount">-</div>
<div class="header-stat-label">GÃ©nÃ©rations</div>
</div>
<div class="header-stat">
<div class="header-stat-value" id="maleCount">-</div>
<div class="header-stat-label">Hommes</div>
</div>
<div class="header-stat">
<div class="header-stat-value" id="femaleCount">-</div>
<div class="header-stat-label">Femmes</div>
</div>
</div>
</header>

<!-- Main content -->
<main>
<!-- Page Famille -->
<div class="page active" id="pageFamille">
<div class="scroll">
<select class="root-select" id="rootSelect" onchange="changeRoot()">
<option value="">ğŸ“ Choisir un point de dÃ©part...</option>
</select>

<div class="tree-nav" id="breadcrumb"></div>

<div id="personView"></div>
</div>
</div>

<!-- Page Recherche -->
<div class="page" id="pageRecherche">
<div class="scroll">
<div class="search-box">
<svg class="search-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
<input type="text" id="searchInput" placeholder="Rechercher un membre..." oninput="filterSearch()">
</div>
<div id="searchResults"></div>
</div>
</div>

<!-- Page ParentÃ© -->
<div class="page" id="pageParente">
<div class="scroll">
<h2 class="page-title">ğŸ”— Trouver un lien de parentÃ©</h2>
<p class="page-subtitle">SÃ©lectionnez deux personnes pour dÃ©couvrir leur lien familial</p>

<div class="parente-form">
<div class="parente-select-group">
<label>PremiÃ¨re personne</label>
<select id="person1Select" class="parente-select">
<option value="">Choisir...</option>
</select>
</div>

<div class="parente-vs">â†”ï¸</div>

<div class="parente-select-group">
<label>DeuxiÃ¨me personne</label>
<select id="person2Select" class="parente-select">
<option value="">Choisir...</option>
</select>
</div>

<button class="parente-btn" onclick="findRelationship()">
Trouver le lien
</button>
</div>

<div id="parenteResult"></div>
</div>
</div>

<!-- Page Contribuer -->
<div class="page" id="pageContribuer">
<div class="scroll">
<h2 class="page-title">â• Contribuer Ã  l'arbre</h2>
<p class="page-subtitle">Ajoutez des informations pour enrichir l'arbre familial</p>

<form id="contributeForm" class="contribute-form">
<div class="form-section-title">ğŸ‘¤ Informations de la personne</div>

<div class="form-row">
<div class="form-group">
<label>Nom complet *</label>
<input type="text" id="f_nom" required placeholder="Ex: Moussa Ali">
</div>
<div class="form-group">
<label>Surnom</label>
<input type="text" id="f_surnom" placeholder="Ex: KoÃ¯ra">
</div>
</div>

<div class="form-group">
<label>Genre *</label>
<div class="gender-select">
<div class="gender-option" onclick="selectGender('M', this)">ğŸ‘¨ Homme</div>
<div class="gender-option" onclick="selectGender('F', this)">ğŸ‘© Femme</div>
</div>
<input type="hidden" id="f_genre" required>
</div>

<div class="form-section-title">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ Parents</div>

<div class="form-row">
<div class="form-group">
<label>Nom du pÃ¨re</label>
<input type="text" id="f_pere" placeholder="Ex: Ali Alkamahamane">
</div>
<div class="form-group">
<label>Nom de la mÃ¨re</label>
<input type="text" id="f_mere" placeholder="Ex: Farimata Alassane">
</div>
</div>

<div class="form-section-title" id="spouseSectionTitle" style="display:none">
ğŸ’‘ Ã‰poux/Ã‰pouse(s)
</div>

<div id="spouseSection" style="display:none">
<div id="spouseContent"></div>
</div>

<div class="form-section-title">
ğŸ‘¶ Enfants
<button type="button" class="add-child-btn" onclick="addChildField()">+ Ajouter</button>
</div>

<div id="childrenFields">
<div class="no-children" id="noChildrenMsg">
<p>Aucun enfant ajoutÃ©</p>
<button type="button" class="add-first-child" onclick="addChildField()">+ Ajouter un enfant</button>
</div>
</div>

<div class="form-section-title">ğŸ“ Informations complÃ©mentaires</div>

<div class="form-group">
<label>Notes ou prÃ©cisions</label>
<textarea id="f_notes" rows="3" placeholder="Informations supplÃ©mentaires..."></textarea>
</div>

<div class="form-group">
<label>Votre contact (pour vÃ©rification)</label>
<input type="text" id="f_contact" placeholder="Email ou tÃ©lÃ©phone">
</div>

<button type="submit" class="submit-btn">
ğŸ“¤ Envoyer la contribution
</button>
</form>

<div id="formResult"></div>
</div>
</div>
</main>

<!-- Navigation -->
<nav class="nav">
<button class="nav-item active" onclick="showPage('pageFamille', this)">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
<span>Famille</span>
</button>
<button class="nav-item" onclick="showPage('pageRecherche', this)">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg>
<span>Recherche</span>
</button>
<button class="nav-item" onclick="showPage('pageParente', this)">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>
<span>ParentÃ©</span>
</button>
<button class="nav-item" onclick="showPage('pageContribuer', this)">
<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 5v14M5 12h14"/></svg>
<span>Contribuer</span>
</button>
</nav>
</div>

<!-- IMPORTANT: Charger les donnÃ©es AVANT l'application -->
<script src="data/members.js"></script>
<script src="js/app.js"></script>
</body>
</html>
